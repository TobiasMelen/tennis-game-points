!function(){function t(){if(!t._executed){var e,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={};Object.defineProperty(i,"__esModule",{value:!0});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},u={};Object.defineProperty(u,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var a={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(t,e){if(!t)throw h(e)},h=function(t){return new Error("Firebase Database ("+a.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},f=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,u=s?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,h=o>>2,f=(3&o)<<4|u>>4,l=(15&u)<<2|c>>6,p=63&c;a||(p=64,s||(l=64)),r.push(n[h],n[f],n[l],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(f(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(u=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var u=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,u=++i<t.length?n[t.charAt(i)]:64,a=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==u||null==a)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==u){var h=s<<4&240|u>>2;if(r.push(h),64!==a){var f=u<<6&192|a;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},p=function(t){try{return l.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}(),v=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,y.prototype.create),i}return Ss(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Us(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new v(i,u),c=0,h=Object.keys(r);c<h.length;c++){var f=h[c];"_"!==f.slice(-1)&&(f in a&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),a[f]=r[f])}return a},t}(),g=/\{\$([^}]+)}/g,m=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Ms(p(o[0])||""),n=Ms(p(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,u=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^a&(c^h),s=1518500249):(o=a^c^h,s=1859775393):r<60?(o=a&c|h&(a|c),s=2400959708):(o=a^c^h,s=3395469782);i=(u<<5|u>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(a<<30|a>>>2),a=u,u=i}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=js),void 0===r.error&&(r.error=js),void 0===r.complete&&(r.complete=js);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}(),E=a;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */u.CONSTANTS=E;var I=d;u.Deferred=I;var _=y;u.ErrorFactory=_;var T=v;u.FirebaseError=T;u.MAX_VALUE_MILLIS=144e5;u.RANDOM_FACTOR=.5;var N=b;u.Sha1=N;var A=function(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;u.areCookiesEnabled=A;var S=c;u.assert=S;var D=h;u.assertionError=D;var O=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}};u.async=O;var x=l;u.base64=x;var C=p;u.base64Decode=C;var k=function(t){var e=f(t);return l.encodeByteArray(e,!0)};u.base64Encode=k;var R=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)};u.calculateBackoffMillis=R;var L=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};u.contains=L;var P=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)};u.createSubscribe=P;var V=m;u.decode=V;var U=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return Ls(void 0,t)};u.deepCopy=U;var M=Ls;u.deepExtend=M;var j=Fs;u.errorPrefix=j;var F=Ps;u.getUA=F;var B=function(t){var e=m(t).claims;return"object"==typeof e&&!0===e.admin};u.isAdmin=B;var q=function(){return"object"==typeof self&&self.self===self};u.isBrowser=q;var G=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id};u.isBrowserExtension=G;var z=function(){return Ps().indexOf("Electron/")>=0};u.isElectron=z;var W=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0};u.isEmpty=W;var K=function(){var t=Ps();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0};u.isIE=K;var H=function(){return"indexedDB"in self&&null!=indexedDB};u.isIndexedDBAvailable=H;var Q=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ps())};u.isMobileCordova=Q;var Y=Vs;u.isNode=Y;var X=function(){return!0===a.NODE_CLIENT||!0===a.NODE_ADMIN};u.isNodeSdk=X;var $=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product};u.isReactNative=$;var J=function(){return!Vs()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")};u.isSafari=J;var Z=function(){return Ps().indexOf("MSAppHost/")>=0};u.isUWP=Z;var tt=function(t){var e=m(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")};u.isValidFormat=tt;var et=function(t){var e=m(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i};u.isValidTimestamp=et;var nt=function(t){var e=m(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null};u.issuedAtTime=nt;var rt=Ms;u.jsonEval=rt;var it=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;u.map=it;var ot=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""};u.querystring=ot;var st=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;u.querystringDecode=st;var ut=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0};u.safeGet=ut;var at=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};u.stringLength=at;var ct=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,c(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};u.stringToByteArray=ct;var ht=function(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;u.stringify=ht;var ft=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};u.validateArgCount=ft;var lt=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Fs(t,e,r)+"must be a valid function.")};u.validateCallback=lt;var pt=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Fs(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;u.validateContextObject=pt;var dt=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))};u.validateIndexedDBOpenable=dt;var vt=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(Fs(t,e,r)+"must be a valid firebase namespace.")};u.validateNamespace=vt;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});var gt=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),mt=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new u.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=s({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=xs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Cs(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Ds(this,void 0,void 0,(function(){var t;return Os(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ks(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),bt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new mt(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}(),wt=gt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.Component=wt;var Et=bt;yt.ComponentContainer=Et;var It,_t=mt;yt.Provider=_t;var Tt,Nt,At=[];(Nt=Tt||(Tt={}))[Nt.DEBUG=0]="DEBUG",Nt[Nt.VERBOSE=1]="VERBOSE",Nt[Nt.INFO=2]="INFO",Nt[Nt.WARN=3]="WARN",Nt[Nt.ERROR=4]="ERROR",Nt[Nt.SILENT=5]="SILENT";var St,Dt,Ot={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},xt=Tt.INFO,Ct=((It={})[Tt.DEBUG]="log",It[Tt.VERBOSE]="log",It[Tt.INFO]="info",It[Tt.WARN]="warn",It[Tt.ERROR]="error",It),kt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ct[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Bs(["["+i+"]  "+t.name+":"],n))}},Rt=function(){function t(t){this.name=t,this._logLevel=xt,this._logHandler=kt,this._userLogHandler=null,At.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Tt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ot[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bs([this,Tt.DEBUG],t)),this._logHandler.apply(this,Bs([this,Tt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bs([this,Tt.VERBOSE],t)),this._logHandler.apply(this,Bs([this,Tt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bs([this,Tt.INFO],t)),this._logHandler.apply(this,Bs([this,Tt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bs([this,Tt.WARN],t)),this._logHandler.apply(this,Bs([this,Tt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Bs([this,Tt.ERROR],t)),this._logHandler.apply(this,Bs([this,Tt.ERROR],t))},t}(),Lt=((St={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",St["bad-app-name"]="Illegal App name: '{$appName}",St["duplicate-app"]="Firebase App named '{$appName}' already exists",St["app-deleted"]="Firebase App named '{$appName}' already deleted",St["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",St["invalid-log-argument"]="First argument to `onLog` must be null or a function.",St),Pt=new u.ErrorFactory("app","Firebase",Lt),Vt=((Dt={})["@firebase/app"]="fire-core",Dt["@firebase/analytics"]="fire-analytics",Dt["@firebase/auth"]="fire-auth",Dt["@firebase/database"]="fire-rtdb",Dt["@firebase/functions"]="fire-fn",Dt["@firebase/installations"]="fire-iid",Dt["@firebase/messaging"]="fire-fcm",Dt["@firebase/performance"]="fire-perf",Dt["@firebase/remote-config"]="fire-rc",Dt["@firebase/storage"]="fire-gcs",Dt["@firebase/firestore"]="fire-fst",Dt["fire-js"]="fire-js",Dt["firebase-wrapper"]="fire-js-all",Dt),Ut=new Rt("@firebase/app"),Mt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=u.deepCopy(t),this.container=new yt.ComponentContainer(e.name),this._addComponent(new yt.Component("app",(function(){return o}),"PUBLIC"));try{for(var s=xs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var c=a.value;this._addComponent(c)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ut.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Pt.create("app-deleted",{appName:this.name_})},t}();Mt.prototype.name&&Mt.prototype.options||Mt.prototype.delete||console.log("dc");var jt=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=Gs(Mt);return e.INTERNAL=s(s({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){u.deepExtend(e,t)},createSubscribe:u.createSubscribe,ErrorFactory:u.ErrorFactory,deepExtend:u.deepExtend}),e}(),Ft=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(u.isBrowser()&&void 0!==self.firebase){Ut.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bt=self.firebase.SDK_VERSION;Bt&&Bt.indexOf("LITE")>=0&&Ut.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qt=jt.initializeApp;jt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return u.isNode()&&Ut.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),qt.apply(void 0,t)};var Gt,zt,Wt=jt;(Gt=Wt).INTERNAL.registerComponent(new yt.Component("platform-logger",(function(t){return new Ft(t)}),"PRIVATE")),Gt.registerVersion("@firebase/app","0.6.11",zt),Gt.registerVersion("fire-js","");var Kt=Wt;i.default=Kt;var Ht=Wt;i.firebase=Ht;var Qt=zs(i);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Qt.default.registerVersion("firebase","7.23.0","app"),e=Qt.default;var Yt,Xt,$t,Jt,Zt={},te=Xt={};!function(){try{$t="function"==typeof setTimeout?setTimeout:Ws}catch(t){$t=Ws}try{Jt="function"==typeof clearTimeout?clearTimeout:Ks}catch(t){Jt=Ks}}();var ee,ne=[],re=!1,ie=-1;te.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ne.push(new Xs(t,e)),1!==ne.length||re||Hs(Ys)},Xs.prototype.run=function(){this.fun.apply(null,this.array)},te.title="browser",te.browser=!0,te.env={},te.argv=[],te.version="",te.versions={},te.on=$s,te.addListener=$s,te.once=$s,te.off=$s,te.removeListener=$s,te.removeAllListeners=$s,te.emit=$s,te.prependListener=$s,te.prependOnceListener=$s,te.listeners=function(t){return[]},te.binding=function(t){throw new Error("process.binding is not supported")},te.cwd=function(){return"/"},te.chdir=function(t){throw new Error("process.chdir is not supported")},te.umask=function(){return 0},Object.defineProperty(Zt,"__esModule",{value:!0});var oe,se={};oe=se,Object.defineProperty(oe,"__esModule",{value:!0});var ue,ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ce="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},he=he||{},fe=ce||self,le="closure_uid_"+(1e9*Math.random()>>>0),pe=0,de=Date.now;au.prototype.j=!1,au.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,le)&&t[le]||(t[le]=++pe)})(this)},au.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ve,ye=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ge=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},me=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};t:{var be=fe.navigator;if(be){var we=be.userAgent;if(we){ve=we;break t}}ve=""}var Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");gu[" "]=Zs;var Ie,_e=lu(ve,"Opera"),Te=lu(ve,"Trident")||lu(ve,"MSIE"),Ne=lu(ve,"Edge"),Ae=Ne||Te,Se=lu(ve,"Gecko")&&!(lu(ve.toLowerCase(),"webkit")&&!lu(ve,"Edge"))&&!(lu(ve,"Trident")||lu(ve,"MSIE"))&&!lu(ve,"Edge"),De=lu(ve.toLowerCase(),"webkit")&&!lu(ve,"Edge");t:{var Oe="",xe=function(){var t=ve;return Se?/rv:([^\);]+)(\)|;)/.exec(t):Ne?/Edge\/([\d\.]+)/.exec(t):Te?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):De?/WebKit\/(\S+)/.exec(t):_e?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(xe&&(Oe=xe?xe[1]:""),Te){var Ce=mu();if(null!=Ce&&Ce>parseFloat(Oe)){Ie=String(Ce);break t}}Ie=Oe}var ke,Re={};if(fe.document&&Te){var Le=mu();ke=Le||(parseInt(Ie,10)||void 0)}else ke=void 0;var Pe=ke,Ve=!Te||9<=Number(Pe),Ue=Te&&!bu("9"),Me=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{fe.addEventListener("test",Zs,e),fe.removeEventListener("test",Zs,e)}catch(t){}return t}();wu.prototype.b=function(){this.defaultPrevented=!0},uu(Eu,wu);var je={2:"touch",3:"pen",4:"mouse"};Eu.prototype.b=function(){Eu.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Fe="closure_listenable_"+(1e6*Math.random()|0),Be=0;Tu.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Au(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Iu(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var qe="closure_lm_"+(1e6*Math.random()|0),Ge={},ze="__closure_events_fn_"+(1e9*Math.random()>>>0);uu(Pu,au),Pu.prototype[Fe]=!0,(ue=Pu.prototype).addEventListener=function(t,e,n,r){Su(this,t,e,n,r)},ue.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=nu(i)?!!i.capture:!!i,r=Lu(r),e&&e[Fe]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Au(s=e.a[n],r,i,o))&&(_u(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=Ru(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Au(n,r,i,o)),(r=-1<e?n[e]:null)&&Ou(r))}(this,t,e,n,r)},ue.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new wu(t,n);else if(t instanceof wu)t.target=t.target||n;else{var i=t;yu(t=new wu(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Vu(s,r,!0,t)&&i}if(i=Vu(s=t.a=n,r,!0,t)&&i,i=Vu(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Vu(s=t.a=e[o],r,!1,t)&&i;return i},ue.G=function(){if(Pu.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)_u(n[r]);delete e.a[t],e.b--}}this.C=null},ue.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ue.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var We,Ke=fe.JSON.stringify,He=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new ju}),(function(t){t.reset()}),100);Uu.prototype.add=function(t,e){var n=He.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ju.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ju.prototype.reset=function(){this.next=this.b=this.a=null};var Qe=!1,Ye=new Uu;uu(Gu,Pu),(ue=Gu.prototype).aa=!1,ue.M=null,ue.Ya=function(){if(this.aa){var t=de()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zu(this),this.start()))}},ue.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=de())},ue.G=function(){Gu.S.G.call(this),zu(this),delete this.a};var Xe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ku(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(fe.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(au);uu(Hu,au);var $e=[];Hu.prototype.G=function(){Hu.S.G.call(this),Yu(this)},Hu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xu.prototype.info=function(){};var Je=null;uu(Zu,wu),uu(ea,wu),uu(ra,wu);var Ze={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},tn={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};oa.prototype.a=null;var en,nn={OPEN:"a",$a:"b",Ea:"c",jb:"d"};uu(aa,wu),uu(ca,wu),uu(ha,oa),en=new ha;var rn=45e3,on={},sn={};(ue=fa.prototype).setTimeout=function(t){this.P=t},ue.Wa=function(t){t=t.target;var e=this.F;e&&3==ac(t)?e.f():this.Ca(t)},ue.Ca=function(t){try{if(t==this.a)t:{var e=ac(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Ae&&!this.a.$())){this.A||4!=e||7==n||ta(8==n||0>=r?3:2),ma(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fu(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,na(12),wa(this),ba(this);break t}$u(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ea(this,a)}this.I?(da(this,e,o),Ae&&this.b&&3==e&&(Qu(this.J,this.R,"tick",this.Va),this.R.start())):($u(this.c,this.f,o,null),Ea(this,o)),4==e&&wa(this),this.b&&!this.A&&(4==e?Nc(this.g,this):(this.b=!1,ya(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,na(12)):(this.h=0,na(13)),wa(this),ba(this)}}}catch(t){}},ue.Va=function(){if(this.a){var t=ac(this.a),e=this.a.$();this.D<e.length&&(ma(this),da(this,t,e),this.b&&4!=t&&ya(this))}},ue.cancel=function(){this.A=!0,wa(this)},ue.Ua=function(){this.o=null;var t=de();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(ta(3),na(17)),wa(this),this.h=2,ba(this)):ga(this,this.U-t)},(ue=_a.prototype).K=function(){Ta(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ue.L=function(){return Ta(this),this.a.concat()},ue.get=function(t,e){return Na(this.b,t)?this.b[t]:e},ue.set=function(t,e){Na(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ue.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var un=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Aa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Pa(e,an,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Pa(e,an,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pa(n,"/"==n.charAt(0)?hn:cn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Pa(n,ln)),t.join("")};var an=/[#\/\?@]/g,cn=/[#\?:]/g,hn=/[#\?]/g,fn=/[#\?@]/g,ln=/#/g;(ue=Ua.prototype).add=function(t,e){Ma(this),this.c=null,t=qa(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ue.forEach=function(t,e){Ma(this),this.a.forEach((function(n,r){ge(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ue.L=function(){Ma(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ue.K=function(t){Ma(this);var e=[];if("string"==typeof t)Fa(this,t)&&(e=cu(e,this.a.get(qa(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=cu(e,t[n])}return e},ue.set=function(t,e){return Ma(this),this.c=null,Fa(this,t=qa(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ue.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ue.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var pn=10;za.prototype.cancel=function(){var t,e;if(this.c=Xa(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Js(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},$a.prototype.stringify=function(t){return fe.JSON.stringify(t,void 0)},$a.prototype.parse=function(t){return fe.JSON.parse(t,void 0)};var dn=fe.JSON.parse;uu(ec,Pu);var vn="",yn=/^https?$/i,gn=["POST","PUT"];(ue=ec.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?sa(this.H):sa(en),this.a.onreadystatechange=ou(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void rc(this,t)}t=n||"";var i=new _a(this.headers);r&&Ia(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=nc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=fe.FormData&&t instanceof fe.FormData,!(0<=ye(gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{uc(this),0<this.o&&((this.D=function(t){return Te&&bu(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ou(this.xa,this)):this.m=Wu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){rc(this,t)}},ue.xa=function(){void 0!==he&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ue.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),sc(this))},ue.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),sc(this,!0)),ec.S.G.call(this)},ue.za=function(){this.j||(this.A||this.l||this.g?oc(this):this.Ta())},ue.Ta=function(){oc(this)},ue.X=function(){try{return 2<ac(this)?this.a.status:-1}catch(t){return-1}},ue.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ue.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dn(e)}},ue.ua=function(){return this.h},ue.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ue=fc.prototype).ha=8,ue.v=1,ue.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new fa(this,this.c,t,void 0),r=this.l;if(this.O&&(r?yu(r=vu(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=bc(this,n,e),ka(i=Sa(this.B),"RID",t),ka(i,"CVER",22),this.A&&ka(i,"X-HTTP-Session-Id",this.A),mc(this,i),this.i&&r&&cc(i,this.i,r),Qa(this.b,n),this.Ga&&ka(i,"TYPE","init"),this.da?(ka(i,"$req",e),ka(i,"SID","null"),n.V=!0,la(n,i,null)):la(n,i,e),this.v=2}}else 3==this.v&&(t?gc(this,t):0==this.g.length||Wa(this.b)||gc(this))},ue.Aa=function(){if(this.j=null,_c(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ia(ou(this.Sa,this),t)}},ue.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,pc(this),_c(this))},ue.Ra=function(){null!=this.m&&(this.m=null,pc(this),Ec(this),na(19))},ue.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),na(2)):(this.c.info("Failed to ping google.com"),na(1))},(ue=Cc.prototype).ta=function(){},ue.sa=function(){},ue.ra=function(){},ue.qa=function(){},ue.Ha=function(){},kc.prototype.a=function(t,e){return new Rc(t,e)},uu(Rc,Pu),(ue=Rc.prototype).addEventListener=function(t,e,n,r){Rc.S.addEventListener.call(this,t,e,n,r)},ue.removeEventListener=function(t,e,n,r){Rc.S.removeEventListener.call(this,t,e,n,r)},ue.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;na(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Oc(t,null,t.fa),yc(t)},ue.close=function(){lc(this.a)},ue.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,vc(this.a,e)}else this.g?((e={}).__data__=Ke(t),vc(this.a,e)):vc(this.a,t)},ue.G=function(){this.a.f=null,delete this.f,lc(this.a),delete this.a,Rc.S.G.call(this)},uu(Lc,aa),uu(Pc,ca),uu(Vc,Cc),Vc.prototype.ta=function(){this.a.dispatchEvent("a")},Vc.prototype.sa=function(t){this.a.dispatchEvent(new Lc(t))},Vc.prototype.ra=function(t){this.a.dispatchEvent(new Pc(t))},Vc.prototype.qa=function(){this.a.dispatchEvent("b")},kc.prototype.createWebChannel=kc.prototype.a,Rc.prototype.send=Rc.prototype.Pa,Rc.prototype.open=Rc.prototype.Oa,Rc.prototype.close=Rc.prototype.close,Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,tn.COMPLETE="complete",ua.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",Pu.prototype.listen=Pu.prototype.va,ec.prototype.listenOnce=ec.prototype.wa,ec.prototype.getLastError=ec.prototype.Qa,ec.prototype.getLastErrorCode=ec.prototype.ua,ec.prototype.getStatus=ec.prototype.X,ec.prototype.getResponseJson=ec.prototype.Na,ec.prototype.getResponseText=ec.prototype.$,ec.prototype.send=ec.prototype.ba;var mn={createWebChannelTransport:function(){return new kc},ErrorCode:Ze,EventType:tn,WebChannel:ua,XhrIo:ec},bn=mn.createWebChannelTransport;se.createWebChannelTransport=bn;var wn=mn.ErrorCode;se.ErrorCode=wn;var En=mn.EventType;se.EventType=En;var In=mn.WebChannel;se.WebChannel=In;var _n=mn.XhrIo;se.XhrIo=_n,se.default=mn;var Tn,Nn=(Tn=i)&&"object"==typeof Tn&&"default"in Tn?Tn:{default:Tn},An={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Sn=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Ss(e,t),e}(Error),Dn=new Rt("@firebase/firestore"),On=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&qc(),void 0===n?n=t.length-e:n>t.length-e&&qc(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.P=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Sn(An.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.g=function(){return new e([])},e}(On),Cn=/^[_a-zA-Z][_a-zA-Z0-9]*$/,kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return Cn.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Sn(An.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new Sn(An.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Sn(An.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Sn(An.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.g=function(){return new e([])},e}(On),Rn=function(){function t(t){this.path=t}return t.D=function(e){return new t(xn.P(e))},t.C=function(e){return new t(xn.P(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===xn.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return xn.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new xn(e.slice()))},t}(),Ln=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ph(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}(),Pn=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.M,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return dh(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.B=new Pn("");var Vn,Un,Mn=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(Pn.fromBase64String(e))}catch(e){throw new Sn(An.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Pn.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}(),jn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.fromBase64String=function(t){Yc("Blob.fromBase64String",arguments,1),Jc("Blob.fromBase64String","string",1,t),mh();try{return new e(Pn.fromBase64String(t))}catch(t){throw new Sn(An.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(Yc("Blob.fromUint8Array",arguments,1),gh(),!(t instanceof Uint8Array))throw ch("Blob.fromUint8Array","Uint8Array",1,t);return new e(Pn.fromUint8Array(t))},e.prototype.toBase64=function(){return Yc("Blob.toBase64",arguments,0),mh(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Yc("Blob.toUint8Array",arguments,0),gh(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Mn),Fn=function(t,e,n,r,i){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Bn=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"W",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return dh(this.projectId,t.projectId)||dh(this.database,t.database)},t}(),qn=function(){function t(t,e){this.j=t,this.K=e,this.G={}}return t.prototype.get=function(t){var e=this.j(t),n=this.G[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.K(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.j(t),r=this.G[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.K(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.G[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.j(t),n=this.G[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.K(n[r][0],t))return 1===n.length?delete this.G[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Kc(this.G,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.m=function(){return Hc(this.G)},t}(),Gn=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Sn(An.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Sn(An.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Sn(An.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Sn(An.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.H=function(t){return this.seconds===t.seconds?dh(this.nanoseconds,t.nanoseconds):dh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zn=function(){function t(t){this.timestamp=t}return t.Y=function(e){return new t(e)},t.min=function(){return new t(new Gn(0,0))},t.prototype.L=function(t){return this.timestamp.H(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.J=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.X=function(){return this.timestamp},t}(),Wn=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Z=null},Kn=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=zn.min()),void 0===o&&(o=zn.min()),void 0===s&&(s=Pn.B),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),Hn=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Un=Vn||(Vn={}))[Un.OK=0]="OK",Un[Un.CANCELLED=1]="CANCELLED",Un[Un.UNKNOWN=2]="UNKNOWN",Un[Un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Un[Un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Un[Un.NOT_FOUND=5]="NOT_FOUND",Un[Un.ALREADY_EXISTS=6]="ALREADY_EXISTS",Un[Un.PERMISSION_DENIED=7]="PERMISSION_DENIED",Un[Un.UNAUTHENTICATED=16]="UNAUTHENTICATED",Un[Un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Un[Un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Un[Un.ABORTED=10]="ABORTED",Un[Un.OUT_OF_RANGE=11]="OUT_OF_RANGE",Un[Un.UNIMPLEMENTED=12]="UNIMPLEMENTED",Un[Un.INTERNAL=13]="INTERNAL",Un[Un.UNAVAILABLE=14]="UNAVAILABLE",Un[Un.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qn=function(){function t(t,e){this.i=t,this.root=e||Xn.EMPTY}return t.prototype.rt=function(e,n){return new t(this.i,this.root.rt(e,n,this.i).copy(null,null,Xn.ot,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Xn.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new Yn(this.root,null,this.i,!1)},t.prototype._t=function(t){return new Yn(this.root,t,this.i,!1)},t.prototype.ft=function(){return new Yn(this.root,null,this.i,!0)},t.prototype.dt=function(t){return new Yn(this.root,t,this.i,!0)},t}(),Yn=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.m();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.m();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),Xn=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.m()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.gt()||i.left.left.gt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.Vt()),i.right.m()||i.right.gt()||i.right.left.gt()||(i=i.bt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.vt()),t.left.gt()&&t.left.left.gt()&&(t=t.Vt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.yt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Vt())).vt()).St()),t},t.prototype.bt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.Vt()).St()),t},t.prototype.vt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Vt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw qc();if(this.right.gt())throw qc();var t=this.left.Ct();if(t!==this.right.Ct())throw qc();return t+(this.gt()?0:1)},t}();Xn.EMPTY=null,Xn.RED=!0,Xn.ot=!1,Xn.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw qc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw qc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new Xn(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $n=function(){function t(t){this.i=t,this.data=new Qn(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.$t=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new Jn(this.data.lt())},t.prototype._t=function(t){return new Jn(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.xt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Jn=function(){function t(t){this.kt=t}return t.prototype.Et=function(){return this.kt.Et().key},t.prototype.It=function(){return this.kt.It()},t}(),Zn=new Qn(Rn.i),tr=new Qn(Rn.i),er=new Qn(Rn.i),nr=new $n(Rn.i),rr=new $n(dh),ir=function(){function t(t){this.i=t?function(e,n){return t(e,n)||Rn.i(e.key,n.key)}:function(t,e){return Rn.i(t.key,e.key)},this.Mt=xh(),this.Ot=new Qn(this.i)}return t.Lt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Mt.get(t)},t.prototype.get=function(t){return this.Mt.get(t)},t.prototype.first=function(){return this.Ot.at()},t.prototype.last=function(){return this.Ot.ct()},t.prototype.m=function(){return this.Ot.m()},t.prototype.indexOf=function(t){var e=this.Mt.get(t);return e?this.Ot.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ot.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ot.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Mt.rt(t.key,t),e.Ot.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Mt.remove(t),this.Ot.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ot.lt(),r=e.Ot.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Mt=e,r.Ot=n,r},t}(),or=function(){function t(){this.Bt=new Qn(Rn.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):qc():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut((function(e,n){t.push(n)})),t},t}(),sr=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=u}return t.Kt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ir.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&ol(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ur=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Yt=i}return t.Jt=function(e,n){var r=new Map;return r.set(e,ar.Xt(e,n)),new t(zn.min(),r,kh(),Dh(),Ch())},t}(),ar=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t(Pn.B,n,Ch(),Ch(),Ch())},t}(),cr=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},hr=function(t,e){this.targetId=t,this.re=e},fr=function(t,e,n,r){void 0===n&&(n=Pn.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},lr=function(){function t(){this.oe=0,this.ae=Lh(),this.ce=Pn.B,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.O()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=Ch(),e=Ch(),n=Ch();return this.ae.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:qc()}})),new ar(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=Lh()},t.prototype.me=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Te=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ee=function(){this.oe+=1},t.prototype.Ie=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),pr=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=Dh(),this.ye=Rh(),this.Ve=new $n(dh)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof Vr?this.be(r,t.ie):t.ie instanceof Ur&&this.ve(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ve(s,t.key,t.ie)}},t.prototype.Se=function(t){var e=this;this.De(t,(function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.Ie(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.Ie(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.Fe(n),r.fe(t.resumeToken));break;default:qc()}}))},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Ne(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.re.count,r=this.xe(e);if(r){var i=r.target;if(Nh(i))if(0===n){var o=new Rn(i.path);this.ve(e,o,new Ur(o,zn.min()))}else Gc(1===n);else this.ke(e)!==n&&(this.Fe(e),this.Ve=this.Ve.add(e))}},t.prototype.Me=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.xe(i);if(o){if(r.Zt&&Nh(o.target)){var s=new Rn(o.target.path);null!==e.ge.get(s)||e.Oe(i,s)||e.ve(i,s,new Ur(s,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=Ch();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.xe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ur(t,n,this.Ve,this.ge,r);return this.ge=Dh(),this.ye=Rh(),this.Ve=new $n(dh),i},t.prototype.be=function(t,e){if(this.Ne(t)){var n=this.Oe(t,e.key)?2:0;this.Ce(t).me(e.key,n),this.ge=this.ge.rt(e.key,e),this.ye=this.ye.rt(e.key,this.Le(e.key).add(t))}},t.prototype.ve=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.Oe(t,e)?r.me(e,1):r.Te(e),this.ye=this.ye.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.ke=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ee=function(t){this.Ce(t).Ee()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new lr,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.ye.get(t);return e||(e=new $n(dh),this.ye=this.ye.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.xe(t);return e||Mc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.xe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.Fe=function(t){var e=this;this.Pe.set(t,new lr),this.Re.Be(t).forEach((function(n){e.ve(t,n,null)}))},t.prototype.Oe=function(t,e){return this.Re.Be(t).has(e)},t}(),dr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),vr={asc:"ASCENDING",desc:"DESCENDING"},yr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gr=function(t,e){this.U=t,this.Ue=e},mr=function(){this.ze=void 0},br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e}(mr),wr=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ss(e,t),e}(mr),Er=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Ss(e,t),e}(mr),Ir=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return Ss(e,t),e}(mr),_r=function(){function t(t){this.fields=t,t.sort(kn.i)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return vh(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Tr=function(t,e){this.field=t,this.transform=e},Nr=function(t,e){this.version=t,this.transformResults=e},Ar=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}(),Sr=function(){},Dr=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ke=r,i.type=0,i}return Ss(e,t),e}(Sr),Or=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ke=i,o.type=1,o}return Ss(e,t),e}(Sr),xr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ke=Ar.exists(!0),r}return Ss(e,t),e}(Sr),Cr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ke=n,r.type=3,r}return Ss(e,t),e}(Sr),kr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ke=n,r.type=4,r}return Ss(e,t),e}(Sr),Rr=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!$h(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return Mh(this.proto,t.proto)},t}(),Lr=function(){function t(t){void 0===t&&(t=Rr.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Uh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Je=function(){var t=this.en(kn.g(),this.Ze);return null!=t?new Rr(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=$h(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}(),Pr=function(t,e){this.key=t,this.version=e},Vr=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Ss(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Pr),Ur=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Ss(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Pr),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Pr),jr=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.on=o,this.startAt=s,this.endAt=u,this.an=null,this.cn=null,this.startAt,this.endAt},Fr=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Ss(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.hn(t,n,r):new Br(t,n,r);if(Yh(r)){if("=="!==n&&"!="!==n)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(Xh(r)){if("=="!==n&&"!="!==n)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new zr(t,r):"in"===n?new Wr(t,r):"not-in"===n?new Kr(t,r):"array-contains-any"===n?new Hr(t,r):new e(t,n,r)},e.hn=function(t,e,n){return"in"===e?new qr(t,n):new Gr(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.ln(Fh(e,this.value)):null!==e&&Uh(this.value)===Uh(e)&&this.ln(Fh(e,this.value))},e.prototype.ln=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return qc()}},e.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Br=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Rn.C(r.referenceValue),i}return Ss(e,t),e.prototype.matches=function(t){var e=Rn.i(t.key,this.key);return this.ln(e)},e}(Fr),qr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=hl("in",n),r}return Ss(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Fr),Gr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=hl("not-in",n),r}return Ss(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Fr),zr=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Ss(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Qh(e)&&jh(e.arrayValue,this.value)},e}(Fr),Wr=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Ss(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&jh(this.value.arrayValue,e)},e}(Fr),Kr=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Ss(e,t),e.prototype.matches=function(t){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!jh(this.value.arrayValue,e)},e}(Fr),Hr=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Ss(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Qh(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return jh(e.value.arrayValue,t)}))},e}(Fr),Qr=function(t,e){this.position=t,this.before=e},Yr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Xr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},$r=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this._n=t,this.fn=e,this.dn=n,this.wn=r,this.mn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.An=function(){this.Tn=this.mn},t.prototype.Rn=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Pn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&Mc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this._n.gn(this.fn,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.wn,this.Tn<this.dn&&(this.Tn=this.dn),this.Tn>this.mn&&(this.Tn=this.mn)},t.prototype.yn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.Tn},t}(),Jr=function(){function t(t){var e=this;this.pn=null,this.bn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.Sn=!1,t((function(t){e.vn=!0,e.result=t,e.pn&&e.pn(t)}),(function(t){e.vn=!0,e.error=t,e.bn&&e.bn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Sn&&qc(),this.Sn=!0,this.vn?this.error?this.Dn(n,this.error):this.Cn(e,this.result):new t((function(t,i){r.pn=function(n){r.Cn(e,n).next(t,i)},r.bn=function(e){r.Dn(n,e).next(t,i)}}))},t.prototype.Nn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Dn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.xn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),Zr=function(){function t(e,n,r){this.name=e,this.version=n,this.kn=r,12.2===t.Mn(u.getUA())&&jc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mc("SimpleDb","Removing database:",t),gl(window.indexedDB.deleteDatabase(t)).Nn()},t.On=function(){if("undefined"==typeof indexedDB)return!1;if(t.Ln())return!0;var e=u.getUA(),n=t.Mn(e),r=0<n&&n<10,i=t.Bn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Ln=function(){var t;return void 0!==Xt&&"YES"===(null===(t=Xt.env)||void 0===t?void 0:t.qn)},t.Un=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Bn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return Ds(this,void 0,void 0,(function(){var e,n=this;return Os(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Mc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ei(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Sn(An.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ei(t,n))},i.onupgradeneeded=function(t){Mc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.kn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){Mc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Ds(this,void 0,void 0,(function(){var i,o,s,u,a;return Os(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return Os(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Qn(t)];case 2:return u.db=f.sent(),e=ni.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Jr.reject(t)})).Nn(),a={},s.catch((function(){})),[4,e.Kn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,Mc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ti=function(){function t(t){this.Gn=t,this.zn=!1,this.Hn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Gn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.zn=!0},t.prototype.Jn=function(t){this.Hn=t},t.prototype.delete=function(){return gl(this.Gn.delete())},t}(),ei=function(t){function e(e,n){var r=this;return(r=t.call(this,An.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Ss(e,t),e}(Sn),ni=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Xn=new Xr,this.transaction.oncomplete=function(){n.Xn.resolve()},this.transaction.onabort=function(){e.error?n.Xn.reject(new ei(t,e.error)):n.Xn.resolve()},this.transaction.onerror=function(e){var r=ml(e.target.error);n.Xn.reject(new ei(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ei(n,e)}},Object.defineProperty(t.prototype,"Kn",{get:function(){return this.Xn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Xn.reject(t),this.aborted||(Mc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ri(e)},t}(),ri=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),gl(n)},t.prototype.add=function(t){return Mc("SimpleDb","ADD",this.store.name,t,t),gl(this.store.add(t))},t.prototype.get=function(t){var e=this;return gl(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Mc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Mc("SimpleDb","DELETE",this.store.name,t),gl(this.store.delete(t))},t.prototype.count=function(){return Mc("SimpleDb","COUNT",this.store.name),gl(this.store.count())},t.prototype.Zn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ts(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.es=function(t,e){Mc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ns=!1;var r=this.cursor(n);return this.ts(r,(function(t,e,n){return n.delete()}))},t.prototype.ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ts(r,e)},t.prototype.rs=function(t){var e=this.cursor({});return new Jr((function(n,r){e.onerror=function(t){var e=ml(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ts=function(t,e){var n=[];return new Jr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ti(i),s=e(i.primaryKey,i.value,o);if(s instanceof Jr){var u=s.catch((function(t){return o.done(),Jr.reject(t)}));n.push(u)}o.vn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return Jr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}(),ii=!1,oi=function(){function t(t,e,n,r,i){this.os=t,this.fn=e,this.cs=n,this.op=r,this.us=i,this.hs=new Xr,this.then=this.hs.promise.then.bind(this.hs.promise),this.hs.promise.catch((function(t){}))}return t.ls=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this._s=setTimeout((function(){return e.fs()}),t)},t.prototype.Vn=function(){return this.fs()},t.prototype.cancel=function(t){null!==this._s&&(this.clearTimeout(),this.hs.reject(new Sn(An.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.fs=function(){var t=this;this.os.ds((function(){return null!==t._s?(t.clearTimeout(),t.op().then((function(e){return t.hs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this._s&&(this.us(this),clearTimeout(this._s),this._s=null)},t}(),si=function(){function t(){var t=this;this.ws=Promise.resolve(),this.Ts=[],this.Es=!1,this.Is=[],this.As=null,this.Rs=!1,this.Ps=[],this.gs=new $r(this,"async_queue_retry"),this.ys=function(){var e=wl();e&&Mc("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.gs.yn()};var e=wl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Es},enumerable:!1,configurable:!0}),t.prototype.ds=function(t){this.enqueue(t)},t.prototype.ps=function(t){this.bs(),this.vs(t)},t.prototype.Ss=function(){if(!this.Es){this.Es=!0;var t=wl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.bs(),this.Es?new Promise((function(t){})):this.vs(t)},t.prototype.Ds=function(t){var e=this;this.Ts.push(t),this.ds((function(){return e.Cs()}))},t.prototype.Cs=function(){return Ds(this,void 0,void 0,(function(){var t,e=this;return Os(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.gs.reset(),[3,4];case 3:if(!yl(t=n.sent()))throw t;return Mc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.gs.Rn((function(){return e.Cs()})),n.label=5;case 5:return[2]}}))}))},t.prototype.vs=function(t){var e=this,n=this.ws.then((function(){return e.Rs=!0,t().catch((function(t){throw e.As=t,e.Rs=!1,jc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Rs=!1,t}))}));return this.ws=n,n},t.prototype.gn=function(t,e,n){var r=this;this.bs(),this.Ps.indexOf(t)>-1&&(e=0);var i=oi.ls(this,t,e,n,(function(t){return r.Ns(t)}));return this.Is.push(i),i},t.prototype.bs=function(){this.As&&qc()},t.prototype.Fs=function(){},t.prototype.$s=function(){return Ds(this,void 0,void 0,(function(){var t;return Os(this,(function(e){switch(e.label){case 0:return[4,t=this.ws];case 1:e.sent(),e.label=2;case 2:if(t!==this.ws)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.xs=function(t){for(var e=0,n=this.Is;e<n.length;e++)if(n[e].fn===t)return!0;return!1},t.prototype.ks=function(t){var e=this;return this.$s().then((function(){e.Is.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.Is;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i.fn===t)break}return e.$s()}))},t.prototype.Ms=function(t){this.Ps.push(t)},t.prototype.Ns=function(t){var e=this.Is.indexOf(t);this.Is.splice(e,1)},t}(),ui=function(){this.Os=void 0,this.listeners=[]},ai=function(){this.Ls=new qn((function(t){return sl(t)}),ol),this.onlineState="Unknown",this.Bs=new Set},ci=function(){function t(t,e,n){this.query=t,this.js=e,this.Ks=!1,this.Gs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sr(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Ks?this.zs(t)&&(this.js.next(t),o=!0):this.Hs(t,this.onlineState)&&(this.Ys(t),o=!0),this.Gs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Us=function(t){this.onlineState=t;var e=!1;return this.Gs&&!this.Ks&&this.Hs(this.Gs,t)&&(this.Ys(this.Gs),e=!0),e},t.prototype.Hs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Js&&n||t.docs.m()&&"Offline"!==e)},t.prototype.zs=function(t){if(t.docChanges.length>0)return!0;var e=this.Gs&&this.Gs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=sr.Kt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.js.next(t)},t}(),hi=function(){function t(t){this.uid=t}return t.prototype.Xs=function(){return null!=this.uid},t.prototype.Zs=function(){return this.Xs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hi.UNAUTHENTICATED=new hi(null),hi.ti=new hi("google-credentials-uid"),hi.ei=new hi("first-party-uid");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ni=function(t){return n.si(t)},this.ii=function(t){return e.ri(t)})}return t.prototype.si=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ii&&this.ii(t),t},t}();fi.oi=-1;var li=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ai=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Sn(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(jc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ai=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Sn(r.error.code,r.error.message)),i?new t(e,r.state,o):(jc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),di=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ai=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=kh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Eh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(jc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ai=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(jc("SharedClientState","Failed to parse online state: "+e),null)},t}(),yi=function(){function t(){this.activeTargetIds=kh()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),gi=function(){function t(t,e,n,r,i){this.window=t,this._n=e,this.persistenceKey=n,this.li=r,this._i=null,this.fi=null,this.ni=null,this.di=this.wi.bind(this),this.mi=new Qn(dh),this.Ti=!1,this.Ei=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ii=Sl(this.persistenceKey,this.li),this.Ai=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.mi=this.mi.rt(this.li,new yi),this.Ri=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.gi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.di)}return t.On=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Ds(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return Os(this,(function(l){switch(l.label){case 0:return[4,this._i.Vi()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.li&&(i=this.getItem(Sl(this.persistenceKey,r)))&&(o=di.ai(r,i))&&(this.mi=this.mi.rt(o.clientId,o));for(this.pi(),(s=this.storage.getItem(this.yi))&&(u=this.bi(s))&&this.vi(u),a=0,c=this.Ei;a<c.length;a++)h=c[a],this.wi(h);return this.Ei=[],this.window.addEventListener("unload",(function(){return f.Si()})),this.Ti=!0,[2]}}))}))},t.prototype.ri=function(t){this.setItem(this.Ai,JSON.stringify(t))},t.prototype.Di=function(){return this.Ci(this.mi)},t.prototype.Ni=function(t){var e=!1;return this.mi.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.$i(t,"pending")},t.prototype.xi=function(t,e,n){this.$i(t,e,n),this.ki(t)},t.prototype.Mi=function(t){var e="not-current";if(this.Ni(t)){var n=this.storage.getItem(Ol(this.persistenceKey,t));if(n){var r=pi.ai(t,n);r&&(e=r.state)}}return this.Oi.ui(t),this.pi(),e},t.prototype.Li=function(t){this.Oi.hi(t),this.pi()},t.prototype.Bi=function(t){return this.Oi.activeTargetIds.has(t)},t.prototype.qi=function(t){this.removeItem(Ol(this.persistenceKey,t))},t.prototype.Ui=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.ki(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Ki(t)},t.prototype.Si=function(){this.Ti&&(this.window.removeEventListener("storage",this.di),this.removeItem(this.Ii),this.Ti=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ii)return void jc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._n.Ds((function(){return Ds(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Os(this,(function(u){if(this.Ti){if(null!==n.key)if(this.Ri.test(n.key)){if(null==n.newValue)return t=this.Gi(n.key),[2,this.zi(t,null)];if(e=this.Hi(n.key,n.newValue))return[2,this.zi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(r=this.Yi(n.key,n.newValue)))return[2,this.Ji(r)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(i=this.Xi(n.key,n.newValue)))return[2,this.Zi(i)]}else if(n.key===this.yi){if(null!==n.newValue&&(o=this.bi(n.newValue)))return[2,this.vi(o)]}else n.key===this.Ai&&(s=function(t){var e=fi.oi;if(null!=t)try{var n=JSON.parse(t);Gc("number"==typeof n),e=n}catch(t){jc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==fi.oi&&this.ni(s)}else this.Ei.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oi",{get:function(){return this.mi.get(this.li)},enumerable:!1,configurable:!0}),t.prototype.pi=function(){this.setItem(this.Ii,this.Oi.ci())},t.prototype.$i=function(t,e,n){var r=new li(this.currentUser,t,e,n),i=Dl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.ki=function(t){var e=Dl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ki=function(t){var e={clientId:this.li,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},t.prototype.Qi=function(t,e,n){var r=Ol(this.persistenceKey,t),i=new pi(t,e,n);this.setItem(r,i.ci())},t.prototype.Gi=function(t){var e=this.Ri.exec(t);return e?e[1]:null},t.prototype.Hi=function(t,e){var n=this.Gi(t);return di.ai(n,e)},t.prototype.Yi=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return li.ai(new hi(i),r,e)},t.prototype.Xi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]);return pi.ai(r,e)},t.prototype.bi=function(t){return vi.ai(t)},t.prototype.Ji=function(t){return Ds(this,void 0,void 0,(function(){return Os(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._i.tr(t.batchId,t.state,t.error)]:(Mc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Zi=function(t){return this._i.er(t.targetId,t.state,t.error)},t.prototype.zi=function(t,e){var n=this,r=e?this.mi.rt(t,e):this.mi.remove(t),i=this.Ci(this.mi),o=this.Ci(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this._i.nr(s,u).then((function(){n.mi=r}))},t.prototype.vi=function(t){this.mi.get(t.clientId)&&this.fi(t.onlineState)},t.prototype.Ci=function(t){var e=kh();return t.forEach((function(t,n){e=e.xt(n.activeTargetIds)})),e},t}(),mi=function(){function t(){this.sr=new yi,this.ir={},this.fi=null,this.ni=null}return t.prototype.Fi=function(t){},t.prototype.xi=function(t,e,n){},t.prototype.Mi=function(t){return this.sr.ui(t),this.ir[t]||"not-current"},t.prototype.Ui=function(t,e,n){this.ir[t]=e},t.prototype.Li=function(t){this.sr.hi(t)},t.prototype.Bi=function(t){return this.sr.activeTargetIds.has(t)},t.prototype.qi=function(t){delete this.ir[t]},t.prototype.Di=function(){return this.sr.activeTargetIds},t.prototype.Ni=function(t){return this.sr.activeTargetIds.has(t)},t.prototype.start=function(){return this.sr=new yi,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Si=function(){},t.prototype.ri=function(t){},t}(),bi=function(){function t(t,e,n,r){this.batchId=t,this.rr=e,this.baseMutations=n,this.mutations=r}return t.prototype.ar=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Mf(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=jf(i,e,e,this.rr))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=jf(a,e,o,this.rr))}return e},t.prototype.hr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ch())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vh(this.mutations,t.mutations,(function(t,e){return Bf(t,e)}))&&vh(this.baseMutations,t.baseMutations,(function(t,e){return Bf(t,e)}))},t}(),wi=function(){function t(t,e,n,r){this.batch=t,this.lr=e,this.cr=n,this._r=r}return t.from=function(e,n,r){Gc(e.mutations.length===r.length);for(var i=er,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ei=function(){function t(){this.dr=new qn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.wr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.mr},set:function(t){this.mr=t},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t,e){this.Er(),this.readTime=e,this.dr.set(t.key,t)},t.prototype.Ir=function(t,e){this.Er(),e&&(this.readTime=e),this.dr.set(t,null)},t.prototype.Ar=function(t,e){this.Er();var n=this.dr.get(e);return void 0!==n?Jr.resolve(n):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Er(),this.wr=!0,this.gr(t)},t.prototype.Er=function(){},t}(),Ii="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_i=function(){function t(){this.yr=[]}return t.prototype.Vr=function(t){this.yr.push(t)},t.prototype.pr=function(){this.yr.forEach((function(t){return t()}))},t}(),Ti=function(){function t(t,e,n){this.br=t,this.vr=e,this.Sr=n}return t.prototype.Dr=function(t,e){var n=this;return this.vr.Cr(t,e).next((function(r){return n.Nr(t,e,r)}))},t.prototype.Nr=function(t,e,n){return this.br.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.Fr=function(t,e,n){var r=Oh();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.rt(t,e)})),r},t.prototype.$r=function(t,e){var n=this;return this.br.getEntries(t,e).next((function(e){return n.kr(t,e)}))},t.prototype.kr=function(t,e){var n=this;return this.vr.Mr(t,e).next((function(r){var i=n.Fr(t,e,r),o=Dh();return i.forEach((function(t,e){e||(e=new Ur(t,zn.min())),o=o.rt(t,e)})),o}))},t.prototype.Or=function(t,e,n){return function(t){return Rn.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Lr(t,e.path):Zf(e)?this.Br(t,e,n):this.qr(t,e,n)},t.prototype.Lr=function(t,e){return this.Dr(t,new Rn(e)).next((function(t){var e=xh();return t instanceof Vr&&(e=e.rt(t.key,t)),e}))},t.prototype.Br=function(t,e,n){var r=this,i=e.collectionGroup,o=xh();return this.Sr.Ur(t,i).next((function(s){return Jr.forEach(s,(function(s){var u=function(t,e){return new jr(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(e,s.child(i));return r.qr(t,u,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.qr=function(t,e,n){var r,i,o=this;return this.br.Or(t,e,n).next((function(n){return r=n,o.vr.Qr(t,e)})).next((function(e){return i=e,o.Wr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=jf(a,h,h,o.rr);r=f instanceof Vr?r.rt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){al(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=Ch(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Or&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.br.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Vr&&(c=c.rt(t,e))})),c}))},t}(),Ni=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Kr=r}return t.Gr=function(e,n){for(var r=Ch(),i=Ch(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ai=function(){function t(t){this.zr=t,this.buffer=new $n(xl),this.Hr=0}return t.prototype.Yr=function(){return++this.Hr},t.prototype.Jr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.zr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Si={Xr:!1,Zr:0,eo:0,no:0},Di=function(){function t(t,e,n){this.so=t,this.io=e,this.ro=n}return t.oo=function(e){return new t(e,t.ao,t.co)},t}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.uo=-1,Di.ho=1048576,Di.lo=41943040,Di.ao=10,Di.co=1e3,Di._o=new Di(Di.lo,Di.ao,Di.co),Di.fo=new Di(Di.uo,0,0);var Oi=function(){function t(t,e){this.do=t,this.os=e,this.wo=!1,this.mo=null}return t.prototype.start=function(t){this.do.params.so!==Di.uo&&this.To(t)},t.prototype.stop=function(){this.mo&&(this.mo.cancel(),this.mo=null)},Object.defineProperty(t.prototype,"Ti",{get:function(){return null!==this.mo},enumerable:!1,configurable:!0}),t.prototype.To=function(t){var e=this,n=this.wo?3e5:6e4;Mc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.mo=this.os.gn("lru_garbage_collection",n,(function(){return Ds(e,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:this.mo=null,this.wo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Eo(this.do)];case 2:return n.sent(),[3,7];case 3:return yl(e=n.sent())?(Mc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.To(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),xi=function(){function t(t,e){this.Io=t,this.params=e}return t.prototype.Ao=function(t,e){return this.Io.Ro(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Po=function(t,e){var n=this;if(0===e)return Jr.resolve(fi.oi);var r=new Ai(e);return this.Io.De(t,(function(t){return r.Jr(t.sequenceNumber)})).next((function(){return n.Io.yo(t,(function(t){return r.Jr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Vo=function(t,e,n){return this.Io.Vo(t,e,n)},t.prototype.po=function(t,e){return this.Io.po(t,e)},t.prototype.bo=function(t,e){var n=this;return this.params.so===Di.uo?(Mc("LruGarbageCollector","Garbage collection skipped; disabled"),Jr.resolve(Si)):this.vo(t).next((function(r){return r<n.params.so?(Mc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.so),Si):n.So(t,e)}))},t.prototype.vo=function(t){return this.Io.vo(t)},t.prototype.So=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.Ao(t,this.params.io).next((function(e){return e>c.params.ro?(Mc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.ro+" from "+e),r=c.params.ro):r=e,o=Date.now(),c.Po(t,r)})).next((function(r){return n=r,s=Date.now(),c.Vo(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.po(t,n)})).next((function(t){return a=Date.now(),Uc()<=Tt.DEBUG&&Mc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),Jr.resolve({Xr:!0,Zr:r,eo:i,no:t})}))},t}(),Ci=function(t){this.Do=t},ki=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Sr=n,this.Co=r,this.No={}}return t.Fo=function(e,n,r,i){return Gc(""!==e.uid),new t(e.Xs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kl(t).ss({index:Bi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.xo=function(t,e,n,r){var i=this,o=Hl(t),s=Kl(t);return s.add({}).next((function(u){Gc("number"==typeof u);for(var a=new bi(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return vf(t.Do,e)})),i=n.mutations.map((function(e){return vf(t.Do,e)}));return new Bi(e,n.batchId,n.rr.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new $n((function(t,e){return dh(t.R(),e.R())})),l=0,p=r;l<p.length;l++){var d=p[l],v=qi.key(i.userId,d.key.path,u);f=f.add(d.key.path.h()),h.push(s.put(c)),h.push(o.put(v,qi.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Sr.ko(t,e))})),t.Vr((function(){i.No[u]=a.keys()})),Jr.$n(h).next((function(){return a}))}))},t.prototype.Mo=function(t,e){var n=this;return Kl(t).get(e).next((function(t){return t?(Gc(t.userId===n.userId),Bl(n.serializer,t)):null}))},t.prototype.Oo=function(t,e){var n=this;return this.No[e]?Jr.resolve(this.No[e]):this.Mo(t,e).next((function(t){if(t){var r=t.keys();return n.No[e]=r,r}return null}))},t.prototype.Lo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Kl(t).ss({index:Bi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Gc(e.batchId>=r),o=Bl(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Kl(t).ss({index:Bi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.qo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kl(t).Zn(Bi.userMutationsIndex,n).next((function(t){return t.map((function(t){return Bl(e.serializer,t)}))}))},t.prototype.Cr=function(t,e){var n=this,r=qi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Hl(t).ss({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Ll(a);if(u===n.userId&&e.path.isEqual(h))return Kl(t).get(c).next((function(t){if(!t)throw qc();Gc(t.userId===n.userId),o.push(Bl(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Mr=function(t,e){var n=this,r=new $n(dh),i=[];return e.forEach((function(e){var o=qi.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Hl(t).ss({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Ll(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Jr.$n(i).next((function(){return n.Uo(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=qi.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new $n(dh);return Hl(t).ss({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Ll(a);s===n.userId&&r.T(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Uo(t,u)}))},t.prototype.Uo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Kl(t).get(e).next((function(t){if(null===t)throw qc();Gc(t.userId===n.userId),r.push(Bl(n.serializer,t))})))})),Jr.$n(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return Wl(t.Wo,this.userId,e).next((function(r){return t.Vr((function(){n.jo(e.batchId)})),Jr.forEach(r,(function(e){return n.Co.Ko(t,e)}))}))},t.prototype.jo=function(t){delete this.No[t]},t.prototype.Go=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return Jr.resolve();var r=IDBKeyRange.lowerBound(qi.prefixForUser(e.userId)),i=[];return Hl(t).ss({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ll(t[1]);i.push(o)}else r.done()})).next((function(){Gc(0===i.length)}))}))},t.prototype.zo=function(t,e){return zl(t,this.userId,e)},t.prototype.Ho=function(t){var e=this;return Ql(t).get(this.userId).next((function(t){return t||new Fi(e.userId,-1,"")}))},t}(),Ri=function(){function t(t,e){this.serializer=t,this.Sr=e}return t.prototype.Tr=function(t,e,n){return Xl(t).put($l(e),n)},t.prototype.Ir=function(t,e){var n=Xl(t),r=$l(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return Xl(t).get($l(e)).next((function(t){return n.Jo(t)}))},t.prototype.Xo=function(t,e){var n=this;return Xl(t).get($l(e)).next((function(t){var e=n.Jo(t);return e?{Zo:e,size:Jl(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Oh();return this.ta(t,e,(function(t,e){var i=n.Jo(e);r=r.rt(t,i)})).next((function(){return r}))},t.prototype.ea=function(t,e){var n=this,r=Oh(),i=new Qn(Rn.i);return this.ta(t,e,(function(t,e){var o=n.Jo(e);o?(r=r.rt(t,o),i=i.rt(t,Jl(e))):(r=r.rt(t,null),i=i.rt(t,0))})).next((function(){return{na:r,sa:i}}))},t.prototype.ta=function(t,e,n){if(e.m())return Jr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e.lt(),o=i.Et();return Xl(t).ss({range:r},(function(t,e,r){for(var s=Rn.$(t);o&&Rn.i(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Or=function(t,e,n){var r=this,i=xh(),o=e.path.length+1,s={};if(n.isEqual(zn.min())){var u=e.path.A();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.A(),c=Ul(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Wi.collectionReadTimeIndex}return Xl(t).ss(s,(function(t,n,s){if(t.length===o){var u=Pl(r.serializer,n);e.path.T(u.key.path)?u instanceof Vr&&al(e,u)&&(i=i.rt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ia=function(t){return new Li(this,!!t&&t.ra)},t.prototype.oa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Yl(t).get(Ki.key).next((function(t){return Gc(!!t),t}))},t.prototype.Yo=function(t,e){return Yl(t).put(Ki.key,e)},t.prototype.Jo=function(t){if(t){var e=Pl(this.serializer,t);return e instanceof Ur&&e.version.isEqual(zn.min())?null:e}return null},t}(),Li=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).aa=e,r.ra=n,r.ca=new qn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Ss(e,t),e.prototype.gr=function(t){var e=this,n=[],r=0,i=new $n((function(t,e){return dh(t.R(),e.R())}));return this.dr.forEach((function(o,s){var u=e.ca.get(o);if(s){var a=Vl(e.aa.serializer,s,e.readTime);i=i.add(o.path.h());var c=Jl(a);r+=c-u,n.push(e.aa.Tr(t,o,a))}else if(r-=u,e.ra){var h=Vl(e.aa.serializer,new Ur(o,zn.min()),e.readTime);n.push(e.aa.Tr(t,o,h))}else n.push(e.aa.Ir(t,o))})),i.forEach((function(r){n.push(e.aa.Sr.ko(t,r))})),n.push(this.aa.updateMetadata(t,r)),Jr.$n(n)},e.prototype.Rr=function(t,e){var n=this;return this.aa.Xo(t,e).next((function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.Zo)}))},e.prototype.Pr=function(t,e){var n=this;return this.aa.ea(t,e).next((function(t){var e=t.na;return t.sa.forEach((function(t,e){n.ca.set(t,e)})),e}))},e}(Ei),Pi=function(){function t(){this.ua=new Vi}return t.prototype.ko=function(t,e){return this.ua.add(e),Jr.resolve()},t.prototype.Ur=function(t,e){return Jr.resolve(this.ua.getEntries(e))},t}(),Vi=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new $n(xn.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new $n(xn.i)).A()},t}(),Ui=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Gc(n<r&&n>=0&&r<=10);var o=new ni("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ji.store)}(t),function(t){t.createObjectStore(Fi.store,{keyPath:Fi.keyPath}),t.createObjectStore(Bi.store,{keyPath:Bi.keyPath,autoIncrement:!0}).createIndex(Bi.userMutationsIndex,Bi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(qi.store)}(t),Zl(t),function(t){t.createObjectStore(Wi.store)}(t));var s=Jr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Qi.store),t.deleteObjectStore(Hi.store),t.deleteObjectStore(Yi.store)}(t),Zl(t)),s=s.next((function(){return function(t){var e=t.store(Yi.store),n=new Yi(0,0,zn.min().X(),0);return e.put(Yi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Bi.store).Zn().next((function(n){t.deleteObjectStore(Bi.store),t.createObjectStore(Bi.store,{keyPath:Bi.keyPath,autoIncrement:!0}).createIndex(Bi.userMutationsIndex,Bi.userMutationsKeyPath,{unique:!0});var r=e.store(Bi.store),i=n.map((function(t){return r.put(t)}));return Jr.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore($i.store,{keyPath:$i.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Ki.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Wi.store);e.createIndex(Wi.readTimeIndex,Wi.readTimeIndexPath,{unique:!1}),e.createIndex(Wi.collectionReadTimeIndex,Wi.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Wi.store).ss((function(t,n){e+=Jl(n)})).next((function(){var n=new Ki(e);return t.store(Ki.store).put(Ki.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Fi.store),r=t.store(Bi.store);return n.Zn().next((function(n){return Jr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Zn(Bi.userMutationsIndex,i).next((function(r){return Jr.forEach(r,(function(r){Gc(r.userId===n.userId);var i=Bl(e.serializer,r);return Wl(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Qi.store),n=t.store(Wi.store);return t.store(Yi.store).get(Yi.key).next((function(t){var r=[];return n.ss((function(n,i){var o=new xn(n),s=function(t){return[0,Cl(t)]}(o);r.push(e.get(s).next((function(n){return n?Jr.resolve():function(n){return e.put(new Qi(0,Cl(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Jr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Xi.store,{keyPath:Xi.keyPath});var n=e.store(Xi.store),r=new Vi,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:Cl(i)})}};return e.store(Wi.store).ss({ns:!0},(function(t,e){var n=new xn(t);return i(n.h())})).next((function(){return e.store(qi.store).ss({ns:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ll(n));return i(r.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Hi.store);return n.ss((function(t,r){var i=ql(r),o=Gl(e.serializer,i);return n.put(o)}))},t}(),Mi=function(t,e){this.seconds=t,this.nanoseconds=e},ji=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji.store="owner",ji.key="owner";var Fi=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Fi.store="mutationQueues",Fi.keyPath="userId";var Bi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Bi.store="mutations",Bi.keyPath="batchId",Bi.userMutationsIndex="userMutationsIndex",Bi.userMutationsKeyPath=["userId","batchId"];var qi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Cl(e)]},t.key=function(t,e,n){return[t,Cl(e),n]},t}();qi.store="documentMutations",qi.PLACEHOLDER=new qi;var Gi=function(t,e){this.path=t,this.readTime=e},zi=function(t,e){this.path=t,this.version=e},Wi=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Wi.store="remoteDocuments",Wi.readTimeIndex="readTimeIndex",Wi.readTimeIndexPath="readTime",Wi.collectionReadTimeIndex="collectionReadTimeIndex",Wi.collectionReadTimeIndexPath=["parentPath","readTime"];var Ki=function(t){this.byteSize=t};Ki.store="remoteDocumentGlobal",Ki.key="remoteDocumentGlobalKey";var Hi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Hi.store="targets",Hi.keyPath="targetId",Hi.queryTargetsIndexName="queryTargetsIndex",Hi.queryTargetsKeyPath=["canonicalId","targetId"];var Qi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Qi.store="targetDocuments",Qi.keyPath=["targetId","path"],Qi.documentTargetsIndex="documentTargetsIndex",Qi.documentTargetsKeyPath=["path","targetId"];var Yi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yi.key="targetGlobalKey",Yi.store="targetGlobal";var Xi=function(t,e){this.collectionId=t,this.parent=e};Xi.store="collectionParents",Xi.keyPath=["collectionId","parent"];var $i=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$i.store="clientMetadata",$i.keyPath="clientId";var Ji=Rs(Rs(Rs([Fi.store,Bi.store,qi.store,Wi.store,Hi.store,ji.store,Yi.store,Qi.store],[$i.store]),[Ki.store]),[Xi.store]),Zi=function(){function t(){this.ha=new Vi}return t.prototype.ko=function(t,e){var n=this;if(!this.ha.has(e)){var r=e._(),i=e.h();t.Vr((function(){n.ha.add(e)}));var o={collectionId:r,parent:Cl(i)};return tp(t).put(o)}return Jr.resolve()},t.prototype.Ur=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[yh(e),""],!1,!0);return tp(t).Zn(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ll(o.parent))}return n}))},t}(),to=function(){function t(t){this.la=t}return t.prototype.next=function(){return this.la+=2,this.la},t._a=function(){return new t(0)},t.fa=function(){return new t(-1)},t}(),eo=function(){function t(t,e){this.Co=t,this.serializer=e}return t.prototype.da=function(t){var e=this;return this.wa(t).next((function(n){var r=new to(n.highestTargetId);return n.highestTargetId=r.next(),e.ma(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ta=function(t){return this.wa(t).next((function(t){return zn.Y(new Gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ea=function(t){return this.wa(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ia=function(t,e,n){var r=this;return this.wa(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.X()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ma(t,i)}))},t.prototype.Aa=function(t,e){var n=this;return this.Ra(t,e).next((function(){return n.wa(t).next((function(r){return r.targetCount+=1,n.Pa(e,r),n.ma(t,r)}))}))},t.prototype.ga=function(t,e){return this.Ra(t,e)},t.prototype.ya=function(t,e){var n=this;return this.Va(t,e.targetId).next((function(){return ep(t).delete(e.targetId)})).next((function(){return n.wa(t)})).next((function(e){return Gc(e.targetCount>0),e.targetCount-=1,n.ma(t,e)}))},t.prototype.Vo=function(t,e,n){var r=this,i=0,o=[];return ep(t).ss((function(s,u){var a=ql(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.ya(t,a)))})).next((function(){return Jr.$n(o)})).next((function(){return i}))},t.prototype.De=function(t,e){return ep(t).ss((function(t,n){var r=ql(n);e(r)}))},t.prototype.wa=function(t){return np(t).get(Yi.key).next((function(t){return Gc(null!==t),t}))},t.prototype.ma=function(t,e){return np(t).put(Yi.key,e)},t.prototype.Ra=function(t,e){return ep(t).put(Gl(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.pa=function(t){return this.wa(t).next((function(t){return t.targetCount}))},t.prototype.ba=function(t,e){var n=_h(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ep(t).ss({range:r,index:Hi.queryTargetsIndexName},(function(t,n,r){var o=ql(n);Th(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.va=function(t,e,n){var r=this,i=[],o=rp(t);return e.forEach((function(e){var s=Cl(e.path);i.push(o.put(new Qi(n,s))),i.push(r.Co.Sa(t,n,e))})),Jr.$n(i)},t.prototype.Da=function(t,e,n){var r=this,i=rp(t);return Jr.forEach(e,(function(e){var o=Cl(e.path);return Jr.$n([i.delete([n,o]),r.Co.Ca(t,n,e)])}))},t.prototype.Va=function(t,e){var n=rp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Na=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=rp(t),i=Ch();return r.ss({range:n,ns:!0},(function(t,e,n){var r=Ll(t[1]),o=new Rn(r);i=i.add(o)})).next((function(){return i}))},t.prototype.zo=function(t,e){var n=Cl(e.path),r=IDBKeyRange.bound([n],[yh(n)],!1,!0),i=0;return rp(t).ss({index:Qi.documentTargetsIndex,ns:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.qe=function(t,e){return ep(t).get(e).next((function(t){return t?ql(t):null}))},t}(),no="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ro=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Fa=n,r}return Ss(e,t),e}(_i),io=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._n=o,this.window=s,this.document=u,this.$a=c,this.xa=h,this.ka=null,this.Ma=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oa=null,this.inForeground=!1,this.La=null,this.Ba=null,this.qa=Number.NEGATIVE_INFINITY,this.Ua=function(t){return Promise.resolve()},!t.On())throw new Sn(An.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Co=new oo(this,i),this.Qa=n+"main",this.serializer=new Ci(a),this.Wa=new Zr(this.Qa,10,new Ui(this.serializer)),this.ja=new eo(this.Co,this.serializer),this.Sr=new Zi,this.br=function(t,e){return new Ri(t,e)}(this.serializer,this.Sr),this.window&&this.window.localStorage?this.Ka=this.window.localStorage:(this.Ka=null,!1===h&&jc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Un=function(t,e){if(t instanceof ro)return Zr.Un(t.Wo,e);throw qc()},t.prototype.start=function(){var t=this;return this.Ga().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Sn(An.FAILED_PRECONDITION,no);return t.za(),t.Ha(),t.Ya(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ja.Ea(e)}))})).then((function(e){t.ka=new fi(e,t.$a)})).then((function(){t.Ma=!0})).catch((function(e){return t.Wa&&t.Wa.close(),Promise.reject(e)}))},t.prototype.Ja=function(t){var e=this;return this.Ua=function(n){return Ds(e,void 0,void 0,(function(){return Os(this,(function(e){return this.Ti?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xa=function(t){var e=this;this.Wa.jn((function(n){return Ds(e,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Za=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this._n.ds((function(){return Ds(e,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return this.Ti?[4,this.Ga()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ga=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return op(e).put(new $i(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.tc(e).next((function(e){e||(t.isPrimary=!1,t._n.Ds((function(){return t.Ua(!1)})))}))})).next((function(){return t.ec(e)})).next((function(n){return t.isPrimary&&!n?t.nc(e).next((function(){return!1})):!!n&&t.sc(e).next((function(){return!0}))}))})).catch((function(e){if(yl(e))return Mc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t._n.Ds((function(){return t.Ua(e)})),t.isPrimary=e}))},t.prototype.tc=function(t){var e=this;return ip(t).get(ji.key).next((function(t){return Jr.resolve(e.ic(t))}))},t.prototype.rc=function(t){return op(t).delete(this.clientId)},t.prototype.oc=function(){return Ds(this,void 0,void 0,(function(){var e,n,r,i,o=this;return Os(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.ac(this.qa,18e5)?[3,2]:(this.qa=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Un(e,$i.store);return n.Zn().next((function(t){var e=o.cc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Jr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Ka)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ka.removeItem(this.uc(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.Ya=function(){var t=this;this.Ba=this._n.gn("client_metadata_refresh",4e3,(function(){return t.Ga().then((function(){return t.oc()})).then((function(){return t.Ya()}))}))},t.prototype.ic=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.ec=function(t){var e=this;return this.xa?Jr.resolve(!0):ip(t).get(ji.key).next((function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e.hc(n.ownerId)){if(e.ic(n)&&e.networkEnabled)return!0;if(!e.ic(n)){if(!n.allowTabSynchronization)throw new Sn(An.FAILED_PRECONDITION,no);return!1}}return!(!e.networkEnabled||!e.inForeground)||op(t).Zn().next((function(t){return void 0===e.cc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Mc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Si=function(){return Ds(this,void 0,void 0,(function(){var t=this;return Os(this,(function(e){switch(e.label){case 0:return this.Ma=!1,this.lc(),this.Ba&&(this.Ba.cancel(),this.Ba=null),this._c(),this.fc(),[4,this.Wa.runTransaction("shutdown","readwrite",[ji.store,$i.store],(function(e){var n=new ro(e,fi.oi);return t.nc(n).next((function(){return t.rc(n)}))}))];case 1:return e.sent(),this.Wa.close(),this.dc(),[2]}}))}))},t.prototype.cc=function(t,e){var n=this;return t.filter((function(t){return n.ac(t.updateTimeMs,e)&&!n.hc(t.clientId)}))},t.prototype.Vi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return op(e).Zn().next((function(e){return t.cc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ti",{get:function(){return this.Ma},enumerable:!1,configurable:!0}),t.prototype.wc=function(t){return ki.Fo(t,this.serializer,this.Sr,this.Co)},t.prototype.mc=function(){return this.ja},t.prototype.Tc=function(){return this.br},t.prototype.Ec=function(){return this.Sr},t.prototype.runTransaction=function(t,e,n){var r=this;Mc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wa.runTransaction(t,o,Ji,(function(o){return i=new ro(o,r.ka?r.ka.next():fi.oi),"readwrite-primary"===e?r.tc(i).next((function(t){return!!t||r.ec(i)})).next((function(e){if(!e)throw jc("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r._n.Ds((function(){return r.Ua(!1)})),new Sn(An.FAILED_PRECONDITION,Ii);return n(i)})).next((function(t){return r.sc(i).next((function(){return t}))})):r.Ic(i).next((function(){return n(i)}))})).then((function(t){return i.pr(),t}))},t.prototype.Ic=function(t){var e=this;return ip(t).get(ji.key).next((function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e.hc(t.ownerId)&&!e.ic(t)&&!(e.xa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Sn(An.FAILED_PRECONDITION,no)}))},t.prototype.sc=function(t){var e=new ji(this.clientId,this.allowTabSynchronization,Date.now());return ip(t).put(ji.key,e)},t.On=function(){return Zr.On()},t.prototype.nc=function(t){var e=this,n=ip(t);return n.get(ji.key).next((function(t){return e.ic(t)?(Mc("IndexedDbPersistence","Releasing primary lease."),n.delete(ji.key)):Jr.resolve()}))},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(jc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.za=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.La=function(){t._n.ds((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ga()}))},this.document.addEventListener("visibilitychange",this.La),this.inForeground="visible"===this.document.visibilityState)},t.prototype._c=function(){this.La&&(this.document.removeEventListener("visibilitychange",this.La),this.La=null)},t.prototype.Ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Oa=function(){e.lc(),e._n.ds((function(){return e.Si()}))},this.window.addEventListener("unload",this.Oa))},t.prototype.fc=function(){this.Oa&&(this.window.removeEventListener("unload",this.Oa),this.Oa=null)},t.prototype.hc=function(t){var e;try{var n=null!==(null===(e=this.Ka)||void 0===e?void 0:e.getItem(this.uc(t)));return Mc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return jc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.lc=function(){if(this.Ka)try{this.Ka.setItem(this.uc(this.clientId),String(Date.now()))}catch(t){jc("Failed to set zombie client id.",t)}},t.prototype.dc=function(){if(this.Ka)try{this.Ka.removeItem(this.uc(this.clientId))}catch(t){}},t.prototype.uc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}(),oo=function(){function t(t,e){this.db=t,this.do=new xi(this,e)}return t.prototype.Ro=function(t){var e=this.Ac(t);return this.db.mc().pa(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ac=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.De=function(t,e){return this.db.mc().De(t,e)},t.prototype.yo=function(t,e){return this.Rc(t,(function(t,n){return e(n)}))},t.prototype.Sa=function(t,e,n){return sp(t,n)},t.prototype.Ca=function(t,e,n){return sp(t,n)},t.prototype.Vo=function(t,e,n){return this.db.mc().Vo(t,e,n)},t.prototype.Ko=function(t,e){return sp(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return Ql(t).rs((function(r){return zl(t,r,e).next((function(t){return t&&(n=!0),Jr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.po=function(t,e){var n=this,r=this.db.Tc().ia(),i=[],o=0;return this.Rc(t,(function(s,u){if(u<=e){var a=n.Pc(t,s).next((function(e){if(!e)return o++,r.Ar(t,s).next((function(){return r.Ir(s),rp(t).delete([0,Cl(s.path)])}))}));i.push(a)}})).next((function(){return Jr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Fa);return this.db.mc().ga(t,n)},t.prototype.gc=function(t,e){return sp(t,e)},t.prototype.Rc=function(t,e){var n,r=rp(t),i=fi.oi;return r.ss({index:Qi.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==fi.oi&&e(new Rn(Ll(n)),i),i=u,n=s):i=fi.oi})).next((function(){i!==fi.oi&&e(new Rn(Ll(n)),i)}))},t.prototype.vo=function(t){return this.db.Tc().oa(t)},t}(),so=function(){function t(t,e,n){this.persistence=t,this.yc=e,this.Vc=new Qn(dh),this.bc=new qn((function(t){return _h(t)}),Th),this.vc=zn.min(),this.vr=t.wc(n),this.Sc=t.Tc(),this.ja=t.mc(),this.Dc=new Ti(this.Sc,this.vr,this.persistence.Ec()),this.yc.Cc(this.Dc)}return t.prototype.Eo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.bo(n,e.Vc)}))},t}(),uo=function(){function t(){this.$c=new $n(ao.xc),this.kc=new $n(ao.Mc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Sa=function(t,e){var n=new ao(t,e);this.$c=this.$c.add(n),this.kc=this.kc.add(n)},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.Sa(t,e)}))},t.prototype.Ca=function(t,e){this.Lc(new ao(t,e))},t.prototype.Bc=function(t,e){var n=this;t.forEach((function(t){return n.Ca(t,e)}))},t.prototype.qc=function(t){var e=this,n=new Rn(new xn([])),r=new ao(n,t),i=new ao(n,t+1),o=[];return this.kc.Nt([r,i],(function(t){e.Lc(t),o.push(t.key)})),o},t.prototype.Uc=function(){var t=this;this.$c.forEach((function(e){return t.Lc(e)}))},t.prototype.Lc=function(t){this.$c=this.$c.delete(t),this.kc=this.kc.delete(t)},t.prototype.Qc=function(t){var e=new Rn(new xn([])),n=new ao(e,t),r=new ao(e,t+1),i=Ch();return this.kc.Nt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.zo=function(t){var e=new ao(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),ao=function(){function t(t,e){this.key=t,this.Wc=e}return t.xc=function(t,e){return Rn.i(t.key,e.key)||dh(t.Wc,e.Wc)},t.Mc=function(t,e){return dh(t.Wc,e.Wc)||Rn.i(t.key,e.key)},t}(),co=function(t,e){this.user=e,this.type="OAuth",this.jc={},this.jc.Authorization="Bearer "+t},ho=function(){function t(){this.Kc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Gc=function(){},t.prototype.zc=function(t){this.Kc=t,t(hi.UNAUTHENTICATED)},t.prototype.Hc=function(){this.Kc=null},t}(),fo=function(){function t(t){var e=this;this.Yc=null,this.currentUser=hi.UNAUTHENTICATED,this.Jc=!1,this.Xc=0,this.Kc=null,this.forceRefresh=!1,this.Yc=function(){e.Xc++,e.currentUser=e.Zc(),e.Jc=!0,e.Kc&&e.Kc(e.currentUser)},this.Xc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Yc):(this.Yc(null),t.get().then((function(t){e.auth=t,e.Yc&&e.auth.addAuthTokenListener(e.Yc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Xc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Xc!==e?(Mc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Gc("string"==typeof n.accessToken),new co(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Gc=function(){this.forceRefresh=!0},t.prototype.zc=function(t){this.Kc=t,this.Jc&&t(this.currentUser)},t.prototype.Hc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Yc),this.Yc=null,this.Kc=null},t.prototype.Zc=function(){var t=this.auth&&this.auth.getUid();return Gc(null===t||"string"==typeof t),new hi(t)},t}(),lo=function(){function t(t,e){this.tu=t,this.eu=e,this.type="FirstParty",this.user=hi.ei}return Object.defineProperty(t.prototype,"jc",{get:function(){var t={"X-Goog-AuthUser":this.eu},e=this.tu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),po=function(){function t(t,e){this.tu=t,this.eu=e}return t.prototype.getToken=function(){return Promise.resolve(new lo(this.tu,this.eu))},t.prototype.zc=function(t){t(hi.ei)},t.prototype.Hc=function(){},t.prototype.Gc=function(){},t}(),vo=function(){function t(t,e,n,r,i,o){this._n=t,this.nu=n,this.su=r,this.iu=i,this.listener=o,this.state=0,this.ru=0,this.ou=null,this.stream=null,this.gs=new $r(t,e)}return t.prototype.au=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.cu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.uu()},t.prototype.stop=function(){return Ds(this,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return this.au()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.hu=function(){this.state=0,this.gs.reset()},t.prototype.lu=function(){var t=this;this.cu()&&null===this.ou&&(this.ou=this._n.gn(this.nu,6e4,(function(){return t._u()})))},t.prototype.fu=function(t){this.du(),this.stream.send(t)},t.prototype._u=function(){return Ds(this,void 0,void 0,(function(){return Os(this,(function(t){return this.cu()?[2,this.close(0)]:[2]}))}))},t.prototype.du=function(){this.ou&&(this.ou.cancel(),this.ou=null)},t.prototype.close=function(t,e){return Ds(this,void 0,void 0,(function(){return Os(this,(function(n){switch(n.label){case 0:return this.du(),this.gs.cancel(),this.ru++,3!==t?this.gs.reset():e&&e.code===An.RESOURCE_EXHAUSTED?(jc(e.toString()),jc("Using maximum backoff delay to prevent overloading the backend."),this.gs.An()):e&&e.code===An.UNAUTHENTICATED&&this.iu.Gc(),null!==this.stream&&(this.wu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.mu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.wu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Tu(this.ru),n=this.ru;this.iu.getToken().then((function(e){t.ru===n&&t.Eu(e)}),(function(n){e((function(){var e=new Sn(An.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Iu(e)}))}))},t.prototype.Eu=function(t){var e=this,n=this.Tu(this.ru);this.stream=this.Au(t),this.stream.Ru((function(){n((function(){return e.state=2,e.listener.Ru()}))})),this.stream.mu((function(t){n((function(){return e.Iu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.uu=function(){var t=this;this.state=4,this.gs.Rn((function(){return Ds(t,void 0,void 0,(function(){return Os(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Iu=function(t){return Mc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Tu=function(t){var e=this;return function(n){e._n.ds((function(){return e.ru===t?n():(Mc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),yo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Ss(e,t),e.prototype.Au=function(t){return this.su.Pu("Listen",t)},e.prototype.onMessage=function(t){this.gs.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:qc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(Gc(void 0===e||"string"==typeof e),Pn.fromBase64String(e||"")):(Gc(void 0===e||e instanceof Uint8Array),Pn.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?An.UNKNOWN:Sh(t.code);return new Sn(e,t.message||"")}(s);n=new fr(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=cf(t,a.document.name),h=of(a.document.updateTime),f=new Rr({mapValue:{fields:a.document.fields}}),l=new Vr(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new cr(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=cf(t,v.document),g=v.readTime?of(v.readTime):zn.min(),m=new Ur(y,g),b=v.removedTargetIds||[];n=new cr([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var E=cf(t,w.document),I=w.removedTargetIds||[];n=new cr([],I,E,null)}else{if(!("filter"in e))return qc();e.filter;var _=e.filter;_.targetId;var T=_.count||0,N=new Hn(T),A=_.targetId;n=new hr(A,N)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return zn.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zn.min():e.readTime?of(e.readTime):zn.min()}(t);return this.listener.gu(e,n)},e.prototype.yu=function(t){var e={};e.database=lf(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Nh(r)?{documents:gf(t,r)}:{query:mf(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=nf(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qc()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.fu(e)},e.prototype.Vu=function(t){var e={};e.database=lf(this.serializer),e.removeTarget=t,this.fu(e)},e}(vo),go=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.pu=!1,s}return Ss(e,t),Object.defineProperty(e.prototype,"bu",{get:function(){return this.pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.wu=function(){this.pu&&this.vu([])},e.prototype.Au=function(t){return this.su.Pu("Write",t)},e.prototype.onMessage=function(t){if(Gc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pu){this.gs.reset();var e=function(t,e){return t&&t.length>0?(Gc(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?of(t.updateTime):of(e);n.isEqual(zn.min())&&(n=of(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Nr(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=of(t.commitTime);return this.listener.Su(n,e)}return Gc(!t.writeResults||0===t.writeResults.length),this.pu=!0,this.listener.Du()},e.prototype.Cu=function(){var t={};t.database=lf(this.serializer),this.fu(t)},e.prototype.vu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return vf(e.serializer,t)}))};this.fu(n)},e}(vo),mo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.su=n,i.serializer=r,i.Nu=!1,i}return Ss(e,t),e.prototype.Fu=function(){if(this.Nu)throw new Sn(An.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var r=this;return this.Fu(),this.credentials.getToken().then((function(i){return r.su.$u(t,e,n,i)})).catch((function(t){throw t.code===An.UNAUTHENTICATED&&r.credentials.Gc(),t}))},e.prototype.xu=function(t,e,n){var r=this;return this.Fu(),this.credentials.getToken().then((function(i){return r.su.xu(t,e,n,i)})).catch((function(t){throw t.code===An.UNAUTHENTICATED&&r.credentials.Gc(),t}))},e.prototype.terminate=function(){this.Nu=!1},e}((function(){})),bo=function(){function t(t,e){this.os=t,this.fi=e,this.state="Unknown",this.ku=0,this.Mu=null,this.Ou=!0}return t.prototype.Lu=function(){var t=this;0===this.ku&&(this.Bu("Unknown"),this.Mu=this.os.gn("online_state_timeout",1e4,(function(){return t.Mu=null,t.qu("Backend didn't respond within 10 seconds."),t.Bu("Offline"),Promise.resolve()})))},t.prototype.Uu=function(t){"Online"===this.state?this.Bu("Unknown"):(this.ku++,this.ku>=1&&(this.Qu(),this.qu("Connection failed 1 times. Most recent error: "+t.toString()),this.Bu("Offline")))},t.prototype.set=function(t){this.Qu(),this.ku=0,"Online"===t&&(this.Ou=!1),this.Bu(t)},t.prototype.Bu=function(t){t!==this.state&&(this.state=t,this.fi(t))},t.prototype.qu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ou?(jc(e),this.Ou=!1):Mc("OnlineStateTracker",e)},t.prototype.Qu=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t}(),wo=function(t,e,n,r,i){var o=this;this.Wu=t,this.ju=e,this.os=n,this.Ku={},this.Gu=[],this.zu=new Map,this.Hu=new Set,this.Yu=[],this.Ju=i,this.Ju.Xu((function(t){n.ds((function(){return Ds(o,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return Dp(this)?(Mc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Ds(this,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:return(e=zc(t)).Hu.add(4),[4,wp(e)];case 1:return n.sent(),e.Zu.set("Unknown"),e.Hu.delete(4),[4,bp(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Zu=new bo(n,r)},Eo=function(t){this.key=t},Io=function(t){this.key=t},_o=function(){function t(t,e){this.query=t,this.ah=e,this.uh=null,this.Zt=!1,this.hh=Ch(),this.Qt=Ch(),this.lh=cl(t),this._h=new ir(this.lh)}return Object.defineProperty(t.prototype,"fh",{get:function(){return this.ah},enumerable:!1,configurable:!0}),t.prototype.dh=function(t,e){var n=this,r=e?e.wh:new or,i=e?e._h:this._h,o=e?e.Qt:this.Qt,s=i,u=!1,a=Yf(this.query)&&i.size===this.query.limit?i.last():null,c=Xf(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof Vr?e:null;f&&(f=al(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.mh(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.lh(f,a)>0||c&&n.lh(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Yf(this.query)||Xf(this.query))for(;s.size>this.query.limit;){var h=Yf(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_h:s,wh:r,Th:u,Qt:o}},t.prototype.mh=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.gr=function(t,e,n){var r=this,i=this._h;this._h=t._h,this.Qt=t.Qt;var o=t.wh.qt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qc()}};return n(t)-n(e)}(t.type,e.type)||r.lh(t.doc,e.doc)})),this.Eh(n);var s=e?this.Ih():[],u=0===this.hh.size&&this.Zt?1:0,a=u!==this.uh;return this.uh=u,0!==o.length||a?{snapshot:new sr(this.query,t._h,i,o,t.Qt,0===u,a,!1),Ah:s}:{Ah:s}},t.prototype.Us=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.gr({_h:this._h,wh:new or,Qt:this.Qt,Th:!1},!1)):{Ah:[]}},t.prototype.Rh=function(t){return!this.ah.has(t)&&!!this._h.has(t)&&!this._h.get(t).Ye},t.prototype.Eh=function(t){var e=this;t&&(t.te.forEach((function(t){return e.ah=e.ah.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.ah=e.ah.delete(t)})),this.Zt=t.Zt)},t.prototype.Ih=function(){var t=this;if(!this.Zt)return[];var e=this.hh;this.hh=Ch(),this._h.forEach((function(e){t.Rh(e.key)&&(t.hh=t.hh.add(e.key))}));var n=[];return e.forEach((function(e){t.hh.has(e)||n.push(new Io(e))})),this.hh.forEach((function(t){e.has(t)||n.push(new Eo(t))})),n},t.prototype.Ph=function(t){this.ah=t.Nc,this.hh=Ch();var e=this.dh(t.documents);return this.gr(e,!0)},t.prototype.gh=function(){return sr.Kt(this.query,this._h,this.Qt,0===this.uh)},t}(),To=function(t,e,n){this.query=t,this.targetId=e,this.view=n},No=function(t){this.key=t,this.yh=!1},Ao=function(){function t(t,e,n,r,i,o){this.Wu=t,this.Vh=e,this.ph=n,this.bh=r,this.currentUser=i,this.Sh=o,this.Dh={},this.Ch=new qn((function(t){return sl(t)}),ol),this.Nh=new Map,this.Fh=[],this.$h=new Qn(Rn.i),this.xh=new Map,this.kh=new uo,this.Mh={},this.Oh=new Map,this.Lh=to.fa(),this.onlineState="Unknown",this.Bh=void 0}return Object.defineProperty(t.prototype,"qh",{get:function(){return!0===this.Bh},enumerable:!1,configurable:!0}),t}(),So=function(){function t(){}return t.prototype.Cc=function(t){this.Gh=t},t.prototype.Or=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.p())}(e)||n.isEqual(zn.min())?this.zh(t,e):this.Gh.$r(t,r).next((function(o){var s=i.Hh(e,o);return(Yf(e)||Xf(e))&&i.Th(e.on,s,r,n)?i.zh(t,e):(Uc()<=Tt.DEBUG&&Mc("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ul(e)),i.Gh.Or(t,e,n).next((function(t){return s.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.Hh=function(t,e){var n=new $n(cl(t));return e.forEach((function(e,r){r instanceof Vr&&al(t,r)&&(n=n.add(r))})),n},t.prototype.Th=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.zh=function(t,e){return Uc()<=Tt.DEBUG&&Mc("IndexFreeQueryEngine","Using full collection scan to execute query:",ul(e)),this.Gh.Or(t,e,zn.min())},t}(),Do=function(){function t(t,e){this.Sr=t,this.Co=e,this.vr=[],this.Yh=1,this.Jh=new $n(ao.xc)}return t.prototype.$o=function(t){return Jr.resolve(0===this.vr.length)},t.prototype.xo=function(t,e,n,r){var i=this.Yh;this.Yh++,this.vr.length>0&&this.vr[this.vr.length-1];var o=new bi(i,e,n,r);this.vr.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Jh=this.Jh.add(new ao(a.key,i)),this.Sr.ko(t,a.key.path.h())}return Jr.resolve(o)},t.prototype.Mo=function(t,e){return Jr.resolve(this.Xh(e))},t.prototype.Lo=function(t,e){var n=e+1,r=this.Zh(n),i=r<0?0:r;return Jr.resolve(this.vr.length>i?this.vr[i]:null)},t.prototype.Bo=function(){return Jr.resolve(0===this.vr.length?-1:this.Yh-1)},t.prototype.qo=function(t){return Jr.resolve(this.vr.slice())},t.prototype.Cr=function(t,e){var n=this,r=new ao(e,0),i=new ao(e,Number.POSITIVE_INFINITY),o=[];return this.Jh.Nt([r,i],(function(t){var e=n.Xh(t.Wc);o.push(e)})),Jr.resolve(o)},t.prototype.Mr=function(t,e){var n=this,r=new $n(dh);return e.forEach((function(t){var e=new ao(t,0),i=new ao(t,Number.POSITIVE_INFINITY);n.Jh.Nt([e,i],(function(t){r=r.add(t.Wc)}))})),Jr.resolve(this.tl(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;Rn.F(i)||(i=i.child(""));var o=new ao(new Rn(i),0),s=new $n(dh);return this.Jh.Ft((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.Wc)),!0)}),o),Jr.resolve(this.tl(s))},t.prototype.tl=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Xh(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;Gc(0===this.el(e.batchId,"removed")),this.vr.shift();var r=this.Jh;return Jr.forEach(e.mutations,(function(i){var o=new ao(i.key,e.batchId);return r=r.delete(o),n.Co.Ko(t,i.key)})).next((function(){n.Jh=r}))},t.prototype.jo=function(t){},t.prototype.zo=function(t,e){var n=new ao(e,0),r=this.Jh.$t(n);return Jr.resolve(e.isEqual(r&&r.key))},t.prototype.Go=function(t){return this.vr.length,Jr.resolve()},t.prototype.el=function(t,e){return this.Zh(t)},t.prototype.Zh=function(t){return 0===this.vr.length?0:t-this.vr[0].batchId},t.prototype.Xh=function(t){var e=this.Zh(t);return e<0||e>=this.vr.length?null:this.vr[e]},t}(),Oo=function(){function t(t,e){this.Sr=t,this.nl=e,this.docs=new Qn(Rn.i),this.size=0}return t.prototype.Tr=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.nl(e);return this.docs=this.docs.rt(r,{Zo:e,size:s,readTime:n}),this.size+=s-o,this.Sr.ko(t,r.path.h())},t.prototype.Ir=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return Jr.resolve(n?n.Zo:null)},t.prototype.getEntries=function(t,e){var n=this,r=Oh();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.Zo:null)})),Jr.resolve(r)},t.prototype.Or=function(t,e,n){for(var r=xh(),i=new Rn(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),u=s.key,a=s.value,c=a.Zo,h=a.readTime;if(!e.path.T(u.path))break;h.L(n)<=0||c instanceof Vr&&al(e,c)&&(r=r.rt(c.key,c))}return Jr.resolve(r)},t.prototype.sl=function(t,e){return Jr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ia=function(t){return new xo(this)},t.prototype.oa=function(t){return Jr.resolve(this.size)},t}(),xo=function(t){function e(e){var n=this;return(n=t.call(this)||this).aa=e,n}return Ss(e,t),e.prototype.gr=function(t){var e=this,n=[];return this.dr.forEach((function(r,i){i?n.push(e.aa.Tr(t,i,e.readTime)):e.aa.Ir(r)})),Jr.$n(n)},e.prototype.Rr=function(t,e){return this.aa.Ar(t,e)},e.prototype.Pr=function(t,e){return this.aa.getEntries(t,e)},e}(Ei),Co=function(){function t(t){this.persistence=t,this.il=new qn((function(t){return _h(t)}),Th),this.lastRemoteSnapshotVersion=zn.min(),this.highestTargetId=0,this.rl=0,this.ol=new uo,this.targetCount=0,this.al=to._a()}return t.prototype.De=function(t,e){return this.il.forEach((function(t,n){return e(n)})),Jr.resolve()},t.prototype.Ta=function(t){return Jr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ea=function(t){return Jr.resolve(this.rl)},t.prototype.da=function(t){return this.highestTargetId=this.al.next(),Jr.resolve(this.highestTargetId)},t.prototype.Ia=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.rl&&(this.rl=e),Jr.resolve()},t.prototype.Ra=function(t){this.il.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.al=new to(e),this.highestTargetId=e),t.sequenceNumber>this.rl&&(this.rl=t.sequenceNumber)},t.prototype.Aa=function(t,e){return this.Ra(e),this.targetCount+=1,Jr.resolve()},t.prototype.ga=function(t,e){return this.Ra(e),Jr.resolve()},t.prototype.ya=function(t,e){return this.il.delete(e.target),this.ol.qc(e.targetId),this.targetCount-=1,Jr.resolve()},t.prototype.Vo=function(t,e,n){var r=this,i=0,o=[];return this.il.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.il.delete(s),o.push(r.Va(t,u.targetId)),i++)})),Jr.$n(o).next((function(){return i}))},t.prototype.pa=function(t){return Jr.resolve(this.targetCount)},t.prototype.ba=function(t,e){var n=this.il.get(e)||null;return Jr.resolve(n)},t.prototype.va=function(t,e,n){return this.ol.Oc(e,n),Jr.resolve()},t.prototype.Da=function(t,e,n){this.ol.Bc(e,n);var r=this.persistence.Co,i=[];return r&&e.forEach((function(e){i.push(r.Ko(t,e))})),Jr.$n(i)},t.prototype.Va=function(t,e){return this.ol.qc(e),Jr.resolve()},t.prototype.Na=function(t,e){var n=this.ol.Qc(e);return Jr.resolve(n)},t.prototype.zo=function(t,e){return Jr.resolve(this.ol.zo(e))},t}(),ko=function(){function t(t){var e=this;this.cl={},this.ka=new fi(0),this.Ma=!1,this.Ma=!0,this.Co=t(this),this.ja=new Co(this),this.Sr=new Pi,this.br=function(t,n){return new Oo(t,(function(t){return e.Co.ul(t)}))}(this.Sr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Si=function(){return this.Ma=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ti",{get:function(){return this.Ma},enumerable:!1,configurable:!0}),t.prototype.Xa=function(){},t.prototype.Za=function(){},t.prototype.Ec=function(){return this.Sr},t.prototype.wc=function(t){var e=this.cl[t.Zs()];return e||(e=new Do(this.Sr,this.Co),this.cl[t.Zs()]=e),e},t.prototype.mc=function(){return this.ja},t.prototype.Tc=function(){return this.br},t.prototype.runTransaction=function(t,e,n){var r=this;Mc("MemoryPersistence","Starting transaction:",t);var i=new Ro(this.ka.next());return this.Co.hl(),n(i).next((function(t){return r.Co.ll(i).next((function(){return t}))})).Nn().then((function(t){return i.pr(),t}))},t.prototype._l=function(t,e){return Jr.xn(Object.values(this.cl).map((function(n){return function(){return n.zo(t,e)}})))},t}(),Ro=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return Ss(e,t),e}(_i),Lo=function(){function t(t){this.persistence=t,this.fl=new uo,this.dl=null}return t.wl=function(e){return new t(e)},Object.defineProperty(t.prototype,"ml",{get:function(){if(this.dl)return this.dl;throw qc()},enumerable:!1,configurable:!0}),t.prototype.Sa=function(t,e,n){return this.fl.Sa(n,e),this.ml.delete(n.toString()),Jr.resolve()},t.prototype.Ca=function(t,e,n){return this.fl.Ca(n,e),this.ml.add(n.toString()),Jr.resolve()},t.prototype.Ko=function(t,e){return this.ml.add(e.toString()),Jr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.fl.qc(e.targetId).forEach((function(t){return n.ml.add(t.toString())}));var r=this.persistence.mc();return r.Na(t,e.targetId).next((function(t){t.forEach((function(t){return n.ml.add(t.toString())}))})).next((function(){return r.ya(t,e)}))},t.prototype.hl=function(){this.dl=new Set},t.prototype.ll=function(t){var e=this,n=this.persistence.Tc().ia();return Jr.forEach(this.ml,(function(r){var i=Rn.D(r);return e.Tl(t,i).next((function(t){t||n.Ir(i)}))})).next((function(){return e.dl=null,n.apply(t)}))},t.prototype.gc=function(t,e){var n=this;return this.Tl(t,e).next((function(t){t?n.ml.delete(e.toString()):n.ml.add(e.toString())}))},t.prototype.ul=function(t){return 0},t.prototype.Tl=function(t,e){var n=this;return Jr.xn([function(){return Jr.resolve(n.fl.zo(e))},function(){return n.persistence.mc().zo(t,e)},function(){return n.persistence._l(t,e)}])},t}(),Po=function(){function t(t){this.El=t.El,this.Il=t.Il}return t.prototype.Ru=function(t){this.Al=t},t.prototype.mu=function(t){this.Rl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Il()},t.prototype.send=function(t){this.El(t)},t.prototype.gl=function(){this.Al()},t.prototype.yl=function(t){this.Rl(t)},t.prototype.Vl=function(t){this.Pl(t)},t}(),Vo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Uo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n}return Ss(e,t),e.prototype.Cl=function(t,e,n,r){return new Promise((function(i,o){var s=new _n;s.listenOnce(En.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case wn.NO_ERROR:var e=s.getResponseJson();Mc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case wn.TIMEOUT:Mc("Connection",'RPC "'+t+'" timed out'),o(new Sn(An.DEADLINE_EXCEEDED,"Request time out"));break;case wn.HTTP_ERROR:var n=s.getStatus();if(Mc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(An).indexOf(e)>=0?e:An.UNKNOWN}(r.status);o(new Sn(u,r.message))}else o(new Sn(An.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Sn(An.UNAVAILABLE,"Connection failed."));break;default:qc()}}finally{Mc("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Pu=function(t,e){var n=[this.bl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=bn(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Dl(i.initMessageHeaders,e),u.isMobileCordova()||u.isReactNative()||u.isElectron()||u.isIE()||u.isUWP()||u.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Mc("Connection","Creating WebChannel: "+o,i);var s=r.createWebChannel(o,i),a=!1,c=!1,h=new Po({El:function(t){c?Mc("Connection","Not sending because WebChannel is closed:",t):(a||(Mc("Connection","Opening WebChannel transport."),s.open(),a=!0),Mc("Connection","WebChannel sending:",t),s.send(t))},Il:function(){return s.close()}}),f=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(In.EventType.OPEN,(function(){c||Mc("Connection","WebChannel transport opened.")})),f(In.EventType.CLOSE,(function(){c||(c=!0,Mc("Connection","WebChannel transport closed"),h.yl())})),f(In.EventType.ERROR,(function(t){c||(c=!0,Fc("Connection","WebChannel transport errored:",t),h.yl(new Sn(An.UNAVAILABLE,"The operation could not be completed")))})),f(In.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Gc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Mc("Connection","WebChannel received error:",i);var o=i.status,u=function(t){var e=Vn[t];if(void 0!==e)return Sh(e)}(o),a=i.message;void 0===u&&(u=An.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.yl(new Sn(u,a)),s.close()}else Mc("Connection","WebChannel received:",n),h.Vl(n)}})),setTimeout((function(){h.gl()}),0),h},e}(function(){function t(t){this.pl=t,this.U=t.U;var e=t.ssl?"https":"http";this.bl=e+"://"+t.host,this.vl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,r){var i=this.Sl(t,e);Mc("RestConnection","Sending: ",i,n);var o={};return this.Dl(o,r),this.Cl(t,i,o,n).then((function(t){return Mc("RestConnection","Received: ",t),t}),(function(e){throw Fc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.xu=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Dl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.23.0",t["Content-Type"]="text/plain",e)for(var n in e.jc)e.jc.hasOwnProperty(n)&&(t[n]=e.jc[n])},t.prototype.Sl=function(t,e){var n=Vo[t];return this.bl+"/v1/"+e+":"+n},t}()),Mo=function(){function t(){var t=this;this.Nl=function(){return t.Fl()},this.$l=function(){return t.xl()},this.kl=[],this.Ml()}return t.prototype.Xu=function(t){this.kl.push(t)},t.prototype.Si=function(){window.removeEventListener("online",this.Nl),window.removeEventListener("offline",this.$l)},t.prototype.Ml=function(){window.addEventListener("online",this.Nl),window.addEventListener("offline",this.$l)},t.prototype.Fl=function(){Mc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.kl;t<e.length;t++)(0,e[t])(0)},t.prototype.xl=function(){Mc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.kl;t<e.length;t++)(0,e[t])(1)},t.On=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),jo=function(){function t(){}return t.prototype.Xu=function(t){},t.prototype.Si=function(){},t}(),Fo="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Bo=function(){function t(){}return t.prototype.initialize=function(t){return Ds(this,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return this.bh=this.Ol(t),this.persistence=this.Ll(t),[4,this.persistence.start()];case 1:return e.sent(),this.Bl=this.ql(t),this.Wu=this.Ul(t),[2]}}))}))},t.prototype.ql=function(t){return null},t.prototype.Ul=function(t){return e=this.persistence,n=new So,r=t.Ql,new so(e,n,r);var e,n,r},t.prototype.Ll=function(t){if(t.persistenceSettings.Wl)throw new Sn(An.FAILED_PRECONDITION,Fo);return new ko(Lo.wl)},t.prototype.Ol=function(t){return new mi},t.prototype.terminate=function(){return Ds(this,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return this.Bl&&this.Bl.stop(),[4,this.bh.Si()];case 1:return t.sent(),[4,this.persistence.Si()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new Sn(An.FAILED_PRECONDITION,Fo)},t}(),qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.initialize=function(e){return Ds(this,void 0,void 0,(function(){var n,r=this;return Os(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.jl._i,this.bh instanceof gi?(this.bh._i={tr:hd.bind(null,n),er:vd.bind(null,n),nr:yd.bind(null,n),Vi:dd.bind(null,n)},[4,this.bh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ja((function(t){return Ds(r,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return[4,fd(this.jl._i,t)];case 1:return e.sent(),this.Bl&&(t&&!this.Bl.Ti?this.Bl.start(this.Wu):t||this.Bl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Ol=function(t){if(t.persistenceSettings.Wl&&t.persistenceSettings.synchronizeTabs){var e=bl();if(!gi.On(e))throw new Sn(An.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=up(t.pl.U,t.pl.persistenceKey);return new gi(e,t.os,n,t.clientId,t.Ql)}return new mi},e}(function(t){function e(e){var n=this;return(n=t.call(this)||this).jl=e,n}return Ss(e,t),e.prototype.initialize=function(e){return Ds(this,void 0,void 0,(function(){return Os(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,gp(this.Wu)];case 2:return n.sent(),[4,this.jl.initialize(this,e)];case 3:return n.sent(),[4,md(this.jl._i)];case 4:return n.sent(),[4,Pp(this.jl.Vh)];case 5:return n.sent(),[2]}}))}))},e.prototype.ql=function(t){var e=this.persistence.Co.do;return new Oi(e,t.os)},e.prototype.Ll=function(t){var e=up(t.pl.U,t.pl.persistenceKey),n=bd(t.pl.U);return new io(t.persistenceSettings.synchronizeTabs,e,t.clientId,Di.oo(t.persistenceSettings.cacheSizeBytes),t.os,bl(),wl(),n,this.bh,t.persistenceSettings.xa)},e.prototype.Ol=function(t){return new mi},e.prototype.clearPersistence=function(t,e){return function(t){return Ds(this,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:return Zr.On()?(e=t+"main",[4,Zr.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(up(t,e))},e}(Bo)),Go=function(){function t(){}return t.prototype.initialize=function(t,e){return Ds(this,void 0,void 0,(function(){var n=this;return Os(this,(function(r){switch(r.label){case 0:return this.Wu?[3,2]:(this.Wu=t.Wu,this.bh=t.bh,this.ju=this.Kl(e),this.Vh=this.Gl(e),this.ph=this.zl(e),this._i=this.Hl(e),this.bh.fi=function(t){return Yp(n._i,t,1)},this.Vh.Ku.Yl=ud.bind(null,this._i),[4,qp(this.Vh,this._i.qh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.zl=function(t){return new ai},t.prototype.Kl=function(t){var e,n=bd(t.pl.U),r=(e=t.pl,new Uo(e));return function(t,e,n){return new mo(t,e,n)}(t.credentials,r,n)},t.prototype.Gl=function(t){var e,n,r,i,o,s=this;return e=this.Wu,n=this.ju,r=t.os,i=function(t){return Yp(s._i,t,0)},o=Mo.On()?new Mo:new jo,new wo(e,n,r,i,o)},t.prototype.Hl=function(t){return function(t,e,n,r,i,o,s){var u=new Ao(t,e,n,r,i,o);return s&&(u.Bh=!0),u}(this.Wu,this.Vh,this.ph,this.bh,t.Ql,t.Sh,!t.persistenceSettings.Wl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return Ep(this.Vh)},t}(),zo=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Jl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Jl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xl=function(){this.muted=!0},t.prototype.Jl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Wo=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Sn(An.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+lh(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Jc("FieldPath","string",e,t[e]),0===t[e].length)throw new Sn(An.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new kn(t)},Ko=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return Ss(e,t),e.documentId=function(){return new e(kn.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ch("isEqual","FieldPath",1,t);return this.Zl.isEqual(t.Zl)},e}(Wo),Ho=new RegExp("[~\\*/\\[\\]]"),Qo=function(t){this.t_=t},Yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Qo),Xo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.e_=function(t){return new Tr(t.path,new br)},e.prototype.isEqual=function(t){return t instanceof e},e}(Qo),$o=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return Ss(e,t),e.prototype.e_=function(t){var e=wd(this,t,!0),n=this.o_.map((function(t){return Ad(t,e)})),r=new wr(n);return new Tr(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Qo),Jo=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return Ss(e,t),e.prototype.e_=function(t){var e=wd(this,t,!0),n=this.o_.map((function(t){return Ad(t,e)})),r=new Er(n);return new Tr(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Qo),Zo=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return Ss(e,t),e.prototype.e_=function(t){var e=new Ir(t.serializer,tf(t.serializer,this.a_));return new Tr(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Qo),ts=function(){function t(t,e){if(Yc("GeoPoint",arguments,2),Jc("GeoPoint","number",1,t),Jc("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Sn(An.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Sn(An.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.c_=t,this.u_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.c_===t.c_&&this.u_===t.u_},t.prototype.toJSON=function(){return{latitude:this.c_,longitude:this.u_}},t.prototype.H=function(t){return dh(this.c_,t.c_)||dh(this.u_,t.u_)},t}(),es=function(t){this.h_=t},ns=/^__.*__$/,rs=function(t,e,n){this.l_=t,this.__=e,this.f_=n},is=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new Or(t,this.data,this.Qe,e)):n.push(new Dr(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new xr(t,this.fieldTransforms)),n},t}(),os=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[new Or(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new xr(t,this.fieldTransforms)),n},t}(),ss=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),t.prototype.m_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.T_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.m_({path:n,r_:!1});return r.E_(t),r},t.prototype.I_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.m_({path:n,r_:!1});return r.w_(),r},t.prototype.A_=function(t){return this.m_({path:void 0,r_:!0})},t.prototype.s_=function(t){return kd(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.E_(this.path.get(t))},t.prototype.E_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(Ed(this.n_)&&ns.test(t))throw this.s_('Document fields cannot begin and end with "__"')},t}(),us=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||bd(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new ss({n_:t,methodName:e,i_:n,path:kn.g(),r_:!1,R_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}(),as=function(){function t(t){this.ju=t,this.g_=new Map,this.mutations=[],this.y_=!1,this.V_=null,this.p_=new Set}return t.prototype.b_=function(t){return Ds(this,void 0,void 0,(function(){var e,n=this;return Os(this,(function(r){switch(r.label){case 0:if(this.v_(),this.mutations.length>0)throw new Sn(An.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Os(this,(function(a){switch(a.label){case 0:return n=zc(t),r=lf(n.serializer)+"/documents",i={documents:e.map((function(t){return af(n.serializer,t)}))},[4,n.xu("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Gc(!!e.found),e.found.name,e.found.updateTime;var n=cf(t,e.found.name),r=of(e.found.updateTime),i=new Rr({mapValue:{fields:e.found.fields}});return new Vr(n,r,i,{})}(t,e):"missing"in e?function(t,e){Gc(!!e.missing),Gc(!!e.readTime);var n=cf(t,e.missing),r=of(e.readTime);return new Ur(n,r)}(t,e):qc()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Gc(!!e),u.push(e)})),u)]}}))}))}(this.ju,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Ur||t instanceof Vr?n.S_(t):qc()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.d_(t,this.Ke(t))),this.p_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.V_=t}this.p_.add(t.toString())},t.prototype.delete=function(t){this.write([new Cr(t,this.Ke(t))]),this.p_.add(t.toString())},t.prototype.commit=function(){return Ds(this,void 0,void 0,(function(){var t,e=this;return Os(this,(function(n){switch(n.label){case 0:if(this.v_(),this.V_)throw this.V_;return t=this.g_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Rn.D(n);e.mutations.push(new kr(r,e.Ke(r)))})),[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i;return Os(this,(function(o){switch(o.label){case 0:return n=zc(t),r=lf(n.serializer)+"/documents",i={writes:e.map((function(t){return vf(n.serializer,t)}))},[4,n.$u("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.ju,this.mutations)];case 1:return n.sent(),this.y_=!0,[2]}}))}))},t.prototype.S_=function(t){var e;if(t instanceof Vr)e=t.version;else{if(!(t instanceof Ur))throw qc();e=zn.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Sn(An.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},t.prototype.Ke=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?Ar.updateTime(e):Ar.Ge()},t.prototype.D_=function(t){var e=this.g_.get(t.toString());if(!this.p_.has(t.toString())&&e){if(e.isEqual(zn.min()))throw new Sn(An.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(e)}return Ar.exists(!0)},t.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},t.prototype.v_=function(){},t}(),cs=function(){function t(t,e,n,r){this.os=t,this.ju=e,this.updateFunction=n,this.hs=r,this.C_=5,this.gs=new $r(this.os,"transaction_retry")}return t.prototype.run=function(){this.N_()},t.prototype.N_=function(){var t=this;this.gs.Rn((function(){return Ds(t,void 0,void 0,(function(){var t,e,n=this;return Os(this,(function(r){return t=new as(this.ju),(e=this.F_(t))&&e.then((function(e){n.os.ds((function(){return t.commit().then((function(){n.hs.resolve(e)})).catch((function(t){n.x_(t)}))}))})).catch((function(t){n.x_(t)})),[2]}))}))}))},t.prototype.F_=function(t){try{var e=this.updateFunction(t);return!bh(e)&&e.catch&&e.then?e:(this.hs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.hs.reject(t),null}},t.prototype.x_=function(t){var e=this;this.C_>0&&this.k_(t)?(this.C_-=1,this.os.ds((function(){return e.N_(),Promise.resolve()}))):this.hs.reject(t)},t.prototype.k_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ah(e)}return!1},t}(),hs=function(){function t(t,e){this.credentials=t,this.os=e,this.clientId=Ln.k(),this.M_=new Xr}return t.prototype.start=function(t,e,n,r){var i=this;this.O_(),this.pl=t;var o=new Xr,s=!1;return this.credentials.zc((function(t){if(!s)return s=!0,Mc("FirestoreClient","Initializing. user=",t.uid),i.L_(e,n,r,t,o).then(i.M_.resolve,i.M_.reject);i.os.Ds((function(){return function(t,e){return Ds(this,void 0,void 0,(function(){var n,r;return Os(this,(function(i){switch(i.label){case 0:return(n=zc(t)).os.Fs(),Mc("RemoteStore","RemoteStore received new credentials"),r=Dp(n),n.Hu.add(3),[4,wp(n)];case 1:return i.sent(),r&&n.Zu.set("Unknown"),[4,n.Ku.Yl(e)];case 2:return i.sent(),n.Hu.delete(3),[4,bp(n)];case 3:return i.sent(),[2]}}))}))}(i.Vh,t)}))})),this.os.ds((function(){return i.M_.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.O_(),this.os.enqueue((function(){return t.persistence.Za(!0),function(t){var e=zc(t);return e.Hu.delete(0),bp(e)}(t.Vh)}))},t.prototype.L_=function(t,e,n,r,i){return Ds(this,void 0,void 0,(function(){var o,s,u=this;return Os(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),o={os:this.os,pl:this.pl,clientId:this.clientId,credentials:this.credentials,Ql:r,Sh:100,persistenceSettings:n},[4,t.initialize(o)];case 1:return a.sent(),[4,e.initialize(t,o)];case 2:return a.sent(),this.persistence=t.persistence,this.bh=t.bh,this.Wu=t.Wu,this.Bl=t.Bl,this.ju=e.ju,this.Vh=e.Vh,this._i=e._i,this.B_=e.ph,this.B_.qs=Wp.bind(null,this._i),this.B_.Ws=Hp.bind(null,this._i),this.persistence.Xa((function(){return Ds(u,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(s=a.sent(),i.reject(s),!this.q_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.L_(new Bo,new Go,{Wl:!1},r,i))];case 4:return[2]}}))}))},t.prototype.q_=function(t){return"FirebaseError"===t.name?t.code===An.FAILED_PRECONDITION||t.code===An.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.O_=function(){if(this.os.Vs)throw new Sn(An.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.O_(),this.os.enqueue((function(){return t.persistence.Za(!1),function(t){return Ds(this,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:return(e=zc(t)).Hu.add(0),[4,wp(e)];case 1:return n.sent(),e.Zu.set("Offline"),[2]}}))}))}(t.Vh)}))},t.prototype.terminate=function(){var t=this;this.os.Ss();var e=new Xr;return this.os.ps((function(){return Ds(t,void 0,void 0,(function(){var t,n;return Os(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.Bl&&this.Bl.stop(),[4,Ep(this.Vh)];case 1:return r.sent(),[4,this.bh.Si()];case 2:return r.sent(),[4,this.persistence.Si()];case 3:return r.sent(),this.credentials.Hc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=El(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.O_();var e=new Xr;return this.os.ds((function(){return function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s;return Os(this,(function(u){switch(u.label){case 0:Dp((n=zc(t)).Vh)||Mc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=zc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.vr.Bo(t)}))}(n.Wu)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Oh.get(r)||[]).push(e),n.Oh.set(r,i),[3,4]);case 3:return o=u.sent(),s=El(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}(t._i,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.O_();var i=new zo(n),o=new ci(t,i,e);return this.os.ds((function(){return Il(r.B_,o)})),function(){i.Xl(),r.os.ds((function(){return _l(r.B_,o)}))}},t.prototype.U_=function(t){return Ds(this,void 0,void 0,(function(){var e,n=this;return Os(this,(function(r){switch(r.label){case 0:return this.O_(),[4,this.M_.promise];case 1:return r.sent(),e=new Xr,[2,(this.os.ds((function(){return function(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o;return Os(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=zc(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Dc.Dr(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof Vr?n.resolve(r):r instanceof Ur?n.resolve(null):n.reject(new Sn(An.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=El(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}(n.Wu,t,e)})),e.promise)]}}))}))},t.prototype.Q_=function(t,e){return void 0===e&&(e={}),Ds(this,void 0,void 0,(function(){var n,r=this;return Os(this,(function(i){switch(i.label){case 0:return this.O_(),[4,this.M_.promise];case 1:return i.sent(),n=new Xr,[2,(this.os.ds((function(){return function(t,e,n,r,i){var o=new zo({next:function(o){e.ds((function(){return _l(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Sn(An.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Sn(An.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ci(Qf(n.path),o,{includeMetadataChanges:!0,Js:!0});return Il(t,s)}(r.B_,r.os,t,e,n)})),n.promise)]}}))}))},t.prototype.W_=function(t){return Ds(this,void 0,void 0,(function(){var e,n=this;return Os(this,(function(r){switch(r.label){case 0:return this.O_(),[4,this.M_.promise];case 1:return r.sent(),e=new Xr,[2,(this.os.ds((function(){return function(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Os(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,dp(t,e,!0)];case 1:return r=c.sent(),i=new _o(e,r.Nc),o=i.dh(r.documents),s=i.gr(o,!1),n.resolve(s.snapshot),[3,3];case 2:return u=c.sent(),a=El(u,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.Wu,t,e)})),e.promise)]}}))}))},t.prototype.j_=function(t,e){return void 0===e&&(e={}),Ds(this,void 0,void 0,(function(){var n,r=this;return Os(this,(function(i){switch(i.label){case 0:return this.O_(),[4,this.M_.promise];case 1:return i.sent(),n=new Xr,[2,(this.os.ds((function(){return function(t,e,n,r,i){var o=new zo({next:function(n){e.ds((function(){return _l(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Sn(An.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ci(n,o,{includeMetadataChanges:!0,Js:!0});return Il(t,s)}(r.B_,r.os,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.O_();var n=new Xr;return this.os.ds((function(){return function(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s;return Os(this,(function(u){switch(u.label){case 0:r=md(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=zc(t),i=Gn.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ch());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Dc.$r(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Ff(c,n.get(c.key));null!=h&&s.push(new Or(c.key,h,Kf(h.proto.mapValue),Ar.exists(!0)))}return r.vr.xo(t,i,s,e)}))})).then((function(t){var e=t.hr(n);return{batchId:t.batchId,dr:e}}))}(r.Wu,e)];case 2:return i=u.sent(),r.bh.Fi(i.batchId),function(t,e,n){var r=t.Mh[t.currentUser.Zs()];r||(r=new Qn(dh)),r=r.rt(e,n),t.Mh[t.currentUser.Zs()]=r}(r,i.batchId,n),[4,sd(r,i.dr)];case 3:return u.sent(),[4,Pp(r.Vh)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=El(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(e._i,t,n)})),n.promise},t.prototype.U=function(){return this.pl.U},t.prototype.K_=function(t){var e=this;this.O_();var n=new zo(t);return this.os.ds((function(){return Ds(e,void 0,void 0,(function(){return Os(this,(function(t){return[2,function(t,e){zc(t).Bs.add(e),e.next()}(this.B_,n)]}))}))})),function(){n.Xl(),e.os.ds((function(){return Ds(e,void 0,void 0,(function(){return Os(this,(function(t){return[2,function(t,e){zc(t).Bs.delete(e)}(this.B_,n)]}))}))}))}},Object.defineProperty(t.prototype,"G_",{get:function(){return this.os.Vs},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.O_();var n=new Xr;return this.os.ds((function(){return new cs(e.os,e.ju,t,n).run(),Promise.resolve()})),n.promise},t}(),fs=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.z_=n,this.H_=r,this.Y_=i}return t.prototype.J_=function(t){switch(Uh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zh(t.integerValue||t.doubleValue);case 3:return this.X_(t.timestampValue);case 4:return this.Z_(t);case 5:return t.stringValue;case 6:return this.Y_(Wh(t.bytesValue));case 7:return this.tf(t.referenceValue);case 8:return this.ef(t.geoPointValue);case 9:return this.nf(t.arrayValue);case 10:return this.sf(t.mapValue);default:throw qc()}},t.prototype.sf=function(t){var e=this,n={};return Kc(t.fields||{},(function(t,r){n[t]=e.J_(r)})),n},t.prototype.ef=function(t){return new ts(zh(t.latitude),zh(t.longitude))},t.prototype.nf=function(t){var e=this;return(t.values||[]).map((function(t){return e.J_(t)}))},t.prototype.Z_=function(t){switch(this.z_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Ph(n)?t(n):n}(t);return null==e?null:this.J_(e);case"estimate":return this.X_(Vh(t));default:return null}},t.prototype.X_=function(t){var e=Gh(t),n=new Gn(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.tf=function(t){var e=xn.P(t);Gc(Of(e));var n=new Bn(e.get(1),e.get(3)),r=new Rn(e.u(5));return n.isEqual(this.U)||jc("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.H_(r)},t}(),ls=Di.uo,ps=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Sn(An.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else th("settings","non-empty string","host",t.host),this.host=t.host,eh("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(ah("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),eh("settings","object","credentials",t.credentials),this.credentials=t.credentials,eh("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),eh("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?jc("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&jc("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,eh("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Di.lo;else{if(t.cacheSizeBytes!==ls&&t.cacheSizeBytes<Di.ho)throw new Sn(An.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Di.ho);this.cacheSizeBytes=t.cacheSizeBytes}eh("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),ds=function(){function t(e,n,r,i){var o=this;if(void 0===r&&(r=new Bo),void 0===i&&(i=new Go),this.if=r,this.rf=i,this.af=null,this.cf=new si,this.INTERNAL={delete:function(){return Ds(o,void 0,void 0,(function(){return Os(this,(function(t){switch(t.label){case 0:return this.uf(),[4,this.hf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.af=s,this.l_=t.lf(s),this._f=s.name,this.ff=new fo(n)}else{var u=e;if(!u.projectId)throw new Sn(An.INVALID_ARGUMENT,"Must provide projectId");this.l_=new Bn(u.projectId,u.database),this._f="[DEFAULT]",this.ff=new ho}this.df=new ps({})}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.mf||(this.mf=new us(this.l_,this.df.ignoreUndefinedProperties)),this.mf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Yc("Firestore.settings",arguments,1),Jc("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;var e=new ps(t);if(this.hf&&!this.df.isEqual(e))throw new Sn(An.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.df=e,void 0!==e.credentials&&(this.ff=function(t){if(!t)return new ho;switch(t.type){case"gapi":var e=t.client;return Gc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new po(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Sn(An.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.uf(),this.hf.enableNetwork()},t.prototype.disableNetwork=function(){return this.uf(),this.hf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.hf)throw new Sn(An.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&jc("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Sn(An.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Tf(this.if,this.rf,{Wl:!0,cacheSizeBytes:this.df.cacheSizeBytes,synchronizeTabs:r,xa:i})},t.prototype.clearPersistence=function(){return Ds(this,void 0,void 0,(function(){var t,e=this;return Os(this,(function(n){if(void 0!==this.hf&&!this.hf.G_)throw new Sn(An.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Xr,[2,(this.cf.ps((function(){return Ds(e,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.if.clearPersistence(this.l_,this._f)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Ef",{get:function(){return this.uf(),this.hf.G_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.uf(),this.hf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.uf(),Ld(t))return this.hf.K_(t);Jc("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.hf.K_(e)},t.prototype.uf=function(){return this.hf||this.Tf(new Bo,new Go,{Wl:!1}),this.hf},t.prototype.If=function(){return new Fn(this.l_,this._f,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling)},t.prototype.Tf=function(t,e,n){var r=this.If();return this.hf=new hs(this.ff,this.cf),this.hf.start(r,t,e,n)},t.lf=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Sn(An.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new Sn(An.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Bn(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.af)throw new Sn(An.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.af},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Yc("Firestore.collection",arguments,1),Jc("Firestore.collection","non-empty string",1,t),this.uf(),new _s(xn.P(t),this,null)},t.prototype.doc=function(t){return Yc("Firestore.doc",arguments,1),Jc("Firestore.doc","non-empty string",1,t),this.uf(),gs.Af(xn.P(t),this,null)},t.prototype.collectionGroup=function(t){if(Yc("Firestore.collectionGroup",arguments,1),Jc("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Sn(An.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new Es(function(t){return new jr(xn.g(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Yc("Firestore.runTransaction",arguments,1),Jc("Firestore.runTransaction","function",1,t),this.uf().transaction((function(n){return t(new vs(e,n))}))},t.prototype.batch=function(){return this.uf(),new ys(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Uc()){case Tt.DEBUG:return"debug";case Tt.ERROR:return"error";case Tt.SILENT:return"silent";case Tt.WARN:return"warn";case Tt.INFO:return"info";case Tt.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Yc("Firestore.setLogLevel",arguments,1),rh("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,Dn.setLogLevel(e)},t.prototype.Rf=function(){return this.df.timestampsInSnapshots},t.prototype.Pf=function(){return this.df},t}(),vs=function(){function t(t,e){this.gf=t,this.yf=e}return t.prototype.get=function(t){var e=this;Yc("Transaction.get",arguments,1);var n=zd("Transaction.get",t,this.gf);return this.yf.b_([n.__]).then((function(t){if(!t||1!==t.length)return qc();var r=t[0];if(r instanceof Ur)return new bs(e.gf,n.__,null,!1,!1,n.f_);if(r instanceof Vr)return new bs(e.gf,n.__,r,!1,!1,n.f_);throw qc()}))},t.prototype.set=function(t,e,n){$c("Transaction.set",arguments,2,3);var r=zd("Transaction.set",t,this.gf);n=Bd("Transaction.set",n);var i=Kd(r.f_,e,n),o=Id(this.gf.wf,"Transaction.set",r.__,i,null!==r.f_,n);return this.yf.set(r.__,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Ko?(Xc("Transaction.update",arguments,3),r=zd("Transaction.update",t,this.gf),i=Td(this.gf.wf,"Transaction.update",r.__,e,n,o)):(Yc("Transaction.update",arguments,2),r=zd("Transaction.update",t,this.gf),i=_d(this.gf.wf,"Transaction.update",r.__,e)),this.yf.update(r.__,i),this},t.prototype.delete=function(t){Yc("Transaction.delete",arguments,1);var e=zd("Transaction.delete",t,this.gf);return this.yf.delete(e.__),this},t}(),ys=function(){function t(t){this.gf=t,this.Vf=[],this.pf=!1}return t.prototype.set=function(t,e,n){$c("WriteBatch.set",arguments,2,3),this.bf();var r=zd("WriteBatch.set",t,this.gf);n=Bd("WriteBatch.set",n);var i=Kd(r.f_,e,n),o=Id(this.gf.wf,"WriteBatch.set",r.__,i,null!==r.f_,n);return this.Vf=this.Vf.concat(o.d_(r.__,Ar.Ge())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.bf(),"string"==typeof e||e instanceof Ko?(Xc("WriteBatch.update",arguments,3),r=zd("WriteBatch.update",t,this.gf),i=Td(this.gf.wf,"WriteBatch.update",r.__,e,n,o)):(Yc("WriteBatch.update",arguments,2),r=zd("WriteBatch.update",t,this.gf),i=_d(this.gf.wf,"WriteBatch.update",r.__,e)),this.Vf=this.Vf.concat(i.d_(r.__,Ar.exists(!0))),this},t.prototype.delete=function(t){Yc("WriteBatch.delete",arguments,1),this.bf();var e=zd("WriteBatch.delete",t,this.gf);return this.Vf=this.Vf.concat(new Cr(e.__,Ar.Ge())),this},t.prototype.commit=function(){return this.bf(),this.pf=!0,this.Vf.length>0?this.gf.uf().write(this.Vf):Promise.resolve()},t.prototype.bf=function(){if(this.pf)throw new Sn(An.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),gs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.l_,e,r)||this).__=e,i.firestore=n,i.f_=r,i.hf=i.firestore.uf(),i}return Ss(e,t),e.Af=function(t,n,r){if(t.length%2!=0)throw new Sn(An.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new Rn(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.__.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new _s(this.__.path.h(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.__.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Yc("DocumentReference.collection",arguments,1),Jc("DocumentReference.collection","non-empty string",1,t),!t)throw new Sn(An.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=xn.P(t);return new _s(this.__.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw ch("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},e.prototype.set=function(t,e){$c("DocumentReference.set",arguments,1,2),e=Bd("DocumentReference.set",e);var n=Kd(this.f_,t,e),r=Id(this.firestore.wf,"DocumentReference.set",this.__,n,null!==this.f_,e);return this.hf.write(r.d_(this.__,Ar.Ge()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Ko?(Xc("DocumentReference.update",arguments,2),n=Td(this.firestore.wf,"DocumentReference.update",this.__,t,e,r)):(Yc("DocumentReference.update",arguments,1),n=_d(this.firestore.wf,"DocumentReference.update",this.__,t)),this.hf.write(n.d_(this.__,Ar.exists(!0)))},e.prototype.delete=function(){return Yc("DocumentReference.delete",arguments,0),this.hf.write([new Cr(this.__,Ar.Ge())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];$c("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Ld(i[u])||(ah("DocumentReference.onSnapshot",s=i[u],["includeMetadataChanges"]),eh("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(Ld(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Jc("DocumentReference.onSnapshot","function",u,i[u]),Zc("DocumentReference.onSnapshot","function",u+1,i[u+1]),Zc("DocumentReference.onSnapshot","function",u+2,i[u+2]);var h={next:function(t){i[u]&&i[u](r.vf(t))},error:i[u+1],complete:i[u+2]};return this.hf.listen(Qf(this.__.path),a,h)},e.prototype.get=function(t){var e=this;$c("DocumentReference.get",arguments,0,1),Gd("DocumentReference.get",t);var n=this.firestore.uf();return t&&"cache"===t.source?n.U_(this.__).then((function(t){return new bs(e.firestore,e.__,t,!0,t instanceof Vr&&t.Ye,e.f_)})):n.Q_(this.__,t).then((function(t){return e.vf(t)}))},e.prototype.withConverter=function(t){return new e(this.__,this.firestore,t)},e.prototype.vf=function(t){var e=t.docs.get(this.__);return new bs(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},e}(rs),ms=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),bs=function(){function t(t,e,n,r,i,o){this.gf=t,this.__=e,this.Sf=n,this.Df=r,this.Cf=i,this.f_=o}return t.prototype.data=function(t){var e=this;if($c("DocumentSnapshot.data",arguments,0,1),t=qd("DocumentSnapshot.data",t),this.Sf){if(this.f_){var n=new ws(this.gf,this.__,this.Sf,this.Df,this.Cf,null);return this.f_.fromFirestore(n,t)}return new fs(this.gf.l_,this.gf.Rf(),t.serverTimestamps||"none",(function(t){return new gs(t,e.gf,null)}),(function(t){return new jn(t)})).J_(this.Sf.sn())}},t.prototype.get=function(t,e){var n=this;if($c("DocumentSnapshot.get",arguments,1,2),e=qd("DocumentSnapshot.get",e),this.Sf){var r=this.Sf.data().field(xd("DocumentSnapshot.get",t,this.__));if(null!==r)return new fs(this.gf.l_,this.gf.Rf(),e.serverTimestamps||"none",(function(t){return new gs(t,n.gf,n.f_)}),(function(t){return new jn(t)})).J_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.__.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gs(this.__,this.gf,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Sf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ms(this.Cf,this.Df)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw ch("isEqual","DocumentSnapshot",1,e);return this.gf===e.gf&&this.Df===e.Df&&this.__.isEqual(e.__)&&(null===this.Sf?null===e.Sf:this.Sf.isEqual(e.Sf))&&this.f_===e.f_},t}(),ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(bs),Es=function(){function t(t,e,n){this.Nf=t,this.firestore=e,this.f_=n}return t.prototype.where=function(e,n,r){Yc("Query.where",arguments,3),uh("Query.where",3,r);var i=rh("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=xd("Query.where",e),s=Pd(this.Nf,"Query.where",this.firestore.wf,this.firestore.l_,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new jr(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.on,t.startAt,t.endAt)}(this.Nf,s),this.firestore,this.f_)},t.prototype.orderBy=function(e,n){var r;if($c("Query.orderBy",arguments,1,2),Zc("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Sn(An.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=xd("Query.orderBy",e),o=Vd(this.Nf,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new jr(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(this.Nf,o),this.firestore,this.f_)},t.prototype.limit=function(e){return Yc("Query.limit",arguments,1),Jc("Query.limit","number",1,e),hh("Query.limit",1,e),new t(nl(this.Nf,e,"F"),this.firestore,this.f_)},t.prototype.limitToLast=function(e){return Yc("Query.limitToLast",arguments,1),Jc("Query.limitToLast","number",1,e),hh("Query.limitToLast",1,e),new t(nl(this.Nf,e,"L"),this.firestore,this.f_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xc("Query.startAt",arguments,1);var i=this.Ff("Query.startAt",e,n,!0);return new t(rl(this.Nf,i),this.firestore,this.f_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xc("Query.startAfter",arguments,1);var i=this.Ff("Query.startAfter",e,n,!1);return new t(rl(this.Nf,i),this.firestore,this.f_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xc("Query.endBefore",arguments,1);var i=this.Ff("Query.endBefore",e,n,!0);return new t(il(this.Nf,i),this.firestore,this.f_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xc("Query.endAt",arguments,1);var i=this.Ff("Query.endAt",e,n,!1);return new t(il(this.Nf,i),this.firestore,this.f_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ch("isEqual","Query",1,e);return this.firestore===e.firestore&&ol(this.Nf,e.Nf)&&this.f_===e.f_},t.prototype.withConverter=function(e){return new t(this.Nf,this.firestore,e)},t.prototype.Ff=function(t,e,n,r){if(uh(t,1,e),e instanceof bs)return Yc(t,Rs([e],n),1),function(t,e,n,r,i){if(!r)throw new Sn(An.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=tl(t);s<u.length;s++){var a=u[s];if(a.field.p())o.push(Kh(e,r.key));else{var c=r.field(a.field);if(Ph(c))throw new Sn(An.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.R();throw new Sn(An.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Qr(o,i)}(this.Nf,this.firestore.l_,t,e.Sf,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new Sn(An.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.p()){if("string"!=typeof c)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Zf(t)&&-1!==c.indexOf("/"))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(xn.P(c));if(!Rn.F(h))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Rn(h);u.push(Kh(e,f))}else{var l=Nd(n,r,c);u.push(l)}}return new Qr(u,o)}(this.Nf,this.firestore.l_,this.firestore.wf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];$c("Query.onSnapshot",arguments,1,4);var s={},u=0;if("object"!=typeof i[u]||Ld(i[u])||(ah("Query.onSnapshot",s=i[u],["includeMetadataChanges"]),eh("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),u++),Ld(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}else Jc("Query.onSnapshot","function",u,i[u]),Zc("Query.onSnapshot","function",u+1,i[u+1]),Zc("Query.onSnapshot","function",u+2,i[u+2]);var c={next:function(t){i[u]&&i[u](new Is(r.firestore,r.Nf,t,r.f_))},error:i[u+1],complete:i[u+2]};return Fd(this.Nf),this.firestore.uf().listen(this.Nf,s,c)},t.prototype.get=function(t){var e=this;$c("Query.get",arguments,0,1),Gd("Query.get",t),Fd(this.Nf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.W_(this.Nf):n.j_(this.Nf,t)).then((function(t){return new Is(e.firestore,e.Nf,t,e.f_)}))},t}(),Is=function(){function t(t,e,n,r){this.gf=t,this.$f=e,this.xf=n,this.f_=r,this.kf=null,this.Mf=null,this.metadata=new ms(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.xf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.xf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;$c("QuerySnapshot.forEach",arguments,1,2),Jc("QuerySnapshot.forEach","function",1,t),this.xf.docs.forEach((function(r){t.call(e,n.Of(r,n.metadata.fromCache,n.xf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Es(this.$f,this.gf,this.f_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(ah("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),eh("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.xf.jt)throw new Sn(An.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.kf&&this.Mf===e||(this.kf=function(t,e,n){if(t.Ut.m()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ut;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Wd(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.xf,e,this.Of.bind(this)),this.Mf=e),this.kf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw ch("isEqual","QuerySnapshot",1,e);return this.gf===e.gf&&ol(this.$f,e.$f)&&this.xf.isEqual(e.xf)&&this.f_===e.f_},t.prototype.Of=function(t,e,n){return new ws(this.gf,t.key,t,e,n,this.f_)},t}(),_s=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Qf(e),n,r)||this).Lf=e,e.length%2!=1)throw new Sn(An.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return Ss(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Nf.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Nf.path.h();return t.m()?null:new gs(new Rn(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Nf.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){$c("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ln.k()),Jc("CollectionReference.doc","non-empty string",1,t);var e=xn.P(t);return gs.Af(this.Nf.path.child(e),this.firestore,this.f_)},e.prototype.add=function(t){Yc("CollectionReference.add",arguments,1);var e=this.f_?this.f_.toFirestore(t):t;Jc("CollectionReference.add","object",1,e);var n=this.doc();return new gs(n.__,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Lf,this.firestore,t)},e}(Es),Ts=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ss(e,t),e.serverTimestamp=function(){Qc("FieldValue.serverTimestamp",arguments);var t=new Xo("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){Qc("FieldValue.delete",arguments);var t=new Yo("deleteField");return t.t_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Xc("FieldValue.arrayUnion",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xc("arrayUnion()",arguments,1),new $o("arrayUnion",t)}.apply(void 0,t);return r.t_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Xc("FieldValue.arrayRemove",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xc("arrayRemove()",arguments,1),new Jo("arrayRemove",t)}.apply(void 0,t);return r.t_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){Jc("FieldValue.increment","number",1,t),Yc("FieldValue.increment",arguments,1);var n=function(t){return new Zo("increment",t)}(t);return n.t_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.h_.isEqual(t.h_)},e}(es),Ns={Firestore:ds,GeoPoint:ts,Timestamp:Gn,Blob:jn,Transaction:vs,WriteBatch:ys,DocumentReference:gs,DocumentSnapshot:bs,Query:Es,QueryDocumentSnapshot:ws,QuerySnapshot:Is,CollectionReference:_s,FieldPath:Ko,FieldValue:Ts,setLogLevel:ds.setLogLevel,CACHE_SIZE_UNLIMITED:ls};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hd(Nn.default),Yt=Hd,Zt.__PRIVATE_registerFirestore=Yt;var As=function(t){return t&&t.__esModule?t.default:t}(e);r.default=As,parcelRequire.register("1b5fcaa91158452b3cc68afb402edcaf",(function(){return r})),t._executed=!0}function Ss(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Ds(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function Os(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function xs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ks(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Cs(arguments[e]));return t}function Rs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function Ls(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Ls(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ps(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Vs(){try{return"[object process]"===Object.prototype.toString.call(n.process)}catch(t){return!1}}function Us(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ms(t){return JSON.parse(t)}function js(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Bs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t){At.forEach((function(e){e.setLogLevel(t)}))}function Gs(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Pt.create("bad-app-name",{appName:String(s)});if(u.contains(e,s))throw Pt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Vt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ut.warn(a.join(" "))}o(new yt.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:qs,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Pt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Ot[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Tt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=At;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!u.contains(e,t))throw Pt.create("no-app",{appName:t});return e[t]}function o(o){var s,a,c=o.name;if(n.has(c))return Ut.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;if(n.set(c,o),"PUBLIC"===o.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[c])throw Pt.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==o.serviceProps&&u.deepExtend(h,o.serviceProps),r[c]=h,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,c);return n.apply(this,o.multipleInstances?t:[])}}try{for(var f=xs(Object.keys(e)),l=f.next();!l.done;l=f.next()){var p=l.value;e[p]._addComponent(o)}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[c]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}function zs(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function Ws(){throw new Error("setTimeout has not been defined")}function Ks(){throw new Error("clearTimeout has not been defined")}function Hs(t){if($t===setTimeout)return setTimeout(t,0);if(($t===Ws||!$t)&&setTimeout)return $t=setTimeout,setTimeout(t,0);try{return $t(t,0)}catch(e){try{return $t.call(null,t,0)}catch(e){return $t.call(this,t,0)}}}function Qs(){re&&ee&&(re=!1,ee.length?ne=ee.concat(ne):ie=-1,ne.length&&Ys())}function Ys(){if(!re){var t=Hs(Qs);re=!0;for(var e=ne.length;e;){for(ee=ne,ne=[];++ie<e;)ee&&ee[ie].run();ie=-1,e=ne.length}ee=null,re=!1,function(t){if(Jt===clearTimeout)return clearTimeout(t);if((Jt===Ks||!Jt)&&clearTimeout)return Jt=clearTimeout,clearTimeout(t);try{Jt(t)}catch(e){try{return Jt.call(null,t)}catch(e){return Jt.call(this,t)}}}(t)}}function Xs(t,e){this.fun=t,this.array=e}function $s(){}function Js(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zs(){}function tu(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function eu(t){var e=tu(t);return"array"==e||"object"==e&&"number"==typeof t.length}function nu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function ru(t,e,n){return t.call.apply(t.bind,arguments)}function iu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ou(t,e,n){return(ou=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ru:iu).apply(null,arguments)}function su(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function uu(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function au(){this.j=this.j,this.i=this.i}function cu(t){return Array.prototype.concat.apply([],arguments)}function hu(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function fu(t){return/^[\s\xa0]*$/.test(t)}function lu(t,e){return-1!=t.indexOf(e)}function pu(t,e){return t<e?-1:t>e?1:0}function du(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function vu(t){var e={};for(var n in t)e[n]=t[n];return e}function yu(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ee.length;o++)n=Ee[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gu(t){return gu[" "](t),t}function mu(){var t=fe.document;return t?t.documentMode:void 0}function bu(t){return function(t,e){var n=Re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=me(String(Ie)).split("."),r=me(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=pu(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||pu(0==s[2].length,0==u[2].length)||pu(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}function wu(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Eu(t,e){if(wu.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Se){t:{try{gu(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:je[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}function Iu(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Be,this.Y=this.Z=!1}function _u(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Tu(t){this.src=t,this.a={},this.b=0}function Nu(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ye(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_u(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Au(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}function Su(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Lu(r),e&&e[Fe]?e.wa(n,r,nu(i)?!!i.capture:!!i,o):Du(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Su(t,e[o],n,r,i);return null}return n=Lu(n),t&&t[Fe]?t.va(e,n,nu(r)?!!r.capture:!!r,i):Du(t,e,n,!1,r,i)}function Du(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=nu(i)?!!i.capture:!!i;if(s&&!Ve)return null;var u=Ru(t);if(u||(t[qe]=u=new Tu(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ku,e=Ve?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Me||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ou(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Fe])Nu(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ru(e))?(Nu(n,t),0==n.b&&(n.src=null,e[qe]=null)):_u(t)}}}function xu(t){return t in Ge?Ge[t]:Ge[t]="on"+t}function Cu(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ou(t),n.call(r,e)}function ku(t,e){if(t.Y)return!0;if(!Ve){if(!e)t:{e=["window","event"];for(var n=fe,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Cu(t,e=new Eu(e,this))}return Cu(t,new Eu(e,this))}function Ru(t){return(t=t[qe])instanceof Tu?t:null}function Lu(t){return"function"==tu(t)?t:(t[ze]||(t[ze]=function(e){return t.handleEvent(e)}),t[ze])}function Pu(){au.call(this),this.c=new Tu(this),this.J=this,this.C=null}function Vu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&Nu(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}function Uu(){this.b=this.a=null}function Mu(){var t=Ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ju(){this.next=this.b=this.a=null}function Fu(t){fe.setTimeout((function(){throw t}),0)}function Bu(t,e){We||function(){var t=fe.Promise.resolve(void 0);We=function(){t.then(qu)}}(),Qe||(We(),Qe=!0),Ye.add(t,e)}function qu(){for(var t;t=Mu();){try{t.a.call(t.b)}catch(t){Fu(t)}var e=He;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Qe=!1}function Gu(t,e){Pu.call(this),this.b=t||1,this.a=e||fe,this.f=ou(this.Ya,this),this.g=de()}function zu(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Wu(t,e,n){if("function"==tu(t))n&&(t=ou(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ou(t.handleEvent,t)}return 2147483647<Number(e)?-1:fe.setTimeout(t,e||0)}function Ku(t){t.a=Wu((function(){t.a=null,t.c&&(t.c=!1,Ku(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}function Hu(t){au.call(this),this.b=t,this.a={}}function Qu(t,e,n,r){Array.isArray(n)||(n&&($e[0]=n.toString()),n=$e);for(var i=0;i<n.length;i++){var o=Su(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yu(t){du(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ou(t)}),t),t.a={}}function Xu(){this.a=!0}function $u(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ke(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}function Ju(){return Je=Je||new Pu}function Zu(t){wu.call(this,"serverreachability",t)}function ta(t){var e=Ju();e.dispatchEvent(new Zu(e,t))}function ea(t){wu.call(this,"statevent",t)}function na(t){var e=Ju();e.dispatchEvent(new ea(e,t))}function ra(t){wu.call(this,"timingevent",t)}function ia(t,e){if("function"!=tu(t))throw Error("Fn must not be null and must be a function");return fe.setTimeout((function(){t()}),e)}function oa(){}function sa(t){var e;return(e=t.a)||(e=t.a={}),e}function ua(){}function aa(){wu.call(this,"d")}function ca(){wu.call(this,"c")}function ha(){}function fa(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Hu(this),this.P=rn,t=Ae?125:void 0,this.R=new Gu(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}function la(t,e,n){t.H=1,t.i=Ra(Sa(e)),t.j=n,t.I=!0,pa(t,null)}function pa(t,e){t.u=de(),ya(t),t.l=Sa(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Ba(n.b,"t",r),t.D=0,t.a=xc(t.g,t.g.C?e:null),0<t.O&&(t.F=new Xe(ou(t.Ca,t,t.a),t.O)),Qu(t.J,t.a,"readystatechange",t.Wa),e=t.B?vu(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ta(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function da(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=va(t,n);if(i==sn){4==e&&(t.h=4,na(14),r=!1),$u(t.c,t.f,null,"[Incomplete Response]");break}if(i==on){t.h=4,na(15),$u(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$u(t.c,t.f,i,null),Ea(t,i)}4==e&&0==n.length&&(t.h=1,na(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ic(e),e.F=!0)):($u(t.c,t.f,n,"[Invalid Chunked Response]"),wa(t),ba(t))}function va(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?sn:(n=Number(e.substring(n,r)),isNaN(n)?on:(r+=1)+n>e.length?sn:(e=e.substr(r,n),t.D=r+n,e))}function ya(t){t.U=de()+t.P,ga(t,t.P)}function ga(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ia(ou(t.Ua,t),e)}function ma(t){t.o&&(fe.clearTimeout(t.o),t.o=null)}function ba(t){0==t.g.v||t.A||Nc(t.g,t)}function wa(t){ma(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zu(t.R),Yu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ea(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ha(n.b,t)))if(n.I=t.N,!t.C&&Ha(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Tc(n),pc(n)}Ec(n),na(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ia(ou(n.Ra,n),6e3));if(1>=Ka(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Sc(n,11)}else if((t.C||n.a==t)&&Tc(n),!fu(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(lu(h,"spdy")||lu(h,"quic")||lu(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Qa(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,ka(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=de()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Oc(a,a.C?a.ga:null,a.fa),p.C){Ya(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(ma(d),ya(d)),a.a=p}else wc(a);0<n.g.length&&yc(n)}else"stop"!=i[0]&&"close"!=i[0]||Sc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Sc(n,7):lc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ta(4)}catch(t){}}function Ia(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(eu(t)||"string"==typeof t)ge(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(eu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(eu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function _a(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _a)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ta(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Na(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Na(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Aa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Aa){this.a=void 0!==e?e:t.a,Da(this,t.f),this.j=t.j,Oa(this,t.c),xa(this,t.h),this.g=t.g,e=t.b;var n=new Ua;n.c=e.c,e.a&&(n.a=new _a(e.a),n.b=e.b),Ca(this,n),this.i=t.i}else t&&(n=String(t).match(un))?(this.a=!!e,Da(this,n[1]||"",!0),this.j=La(n[2]||""),Oa(this,n[3]||"",!0),xa(this,n[4]),this.g=La(n[5]||"",!0),Ca(this,n[6]||"",!0),this.i=La(n[7]||"")):(this.a=!!e,this.b=new Ua(null,this.a))}function Sa(t){return new Aa(t)}function Da(t,e,n){t.f=n?La(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Oa(t,e,n){t.c=n?La(e,!0):e}function xa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ca(t,e,n){e instanceof Ua?(t.b=e,function(t,e){e&&!t.f&&(Ma(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ja(this,e),Ba(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Pa(e,fn)),t.b=new Ua(e,t.a))}function ka(t,e,n){t.b.set(e,n)}function Ra(t){return ka(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^de()).toString(36)),t}function La(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Va),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Va(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}function Ua(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ma(t){t.a||(t.a=new _a,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ja(t,e){Ma(t),e=qa(t,e),Na(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Na((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ta(t)))}function Fa(t,e){return Ma(t),e=qa(t,e),Na(t.a.b,e)}function Ba(t,e,n){ja(t,e),0<n.length&&(t.c=null,t.a.set(qa(t,e),hu(n)),t.b+=n.length)}function qa(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ga(t,e){this.b=t,this.a=e}function za(t){this.g=t||pn,fe.PerformanceNavigationTiming?t=0<(t=fe.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(fe.ia&&fe.ia.ya&&fe.ia.ya()&&fe.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}function Wa(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ka(t){return t.b?1:t.a?t.a.size:0}function Ha(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Qa(t,e){t.a?t.a.add(e):t.b=e}function Ya(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Xa(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Js(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return hu(t.c)}function $a(){}function Ja(){this.a=new $a}function Za(t,e,n){var r=n||"";try{Ia(t,(function(t,n){var i=t;nu(t)&&(i=Ke(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function tc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function ec(t){Pu.call(this),this.headers=new _a,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=vn,this.D=this.F=!1}function nc(t){return"content-type"==t.toLowerCase()}function rc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ic(t),sc(t)}function ic(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function oc(t){if(t.b&&void 0!==he&&(!t.s[1]||4!=ac(t)||2!=t.X()))if(t.l&&4==ac(t))Wu(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==ac(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(un)[1]||null;if(!o&&fe.self&&fe.self.location){var s=fe.self.location.protocol;o=s.substr(0,s.length-1)}i=!yn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<ac(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.X()+"]",ic(t)}}finally{sc(t)}}}function sc(t,e){if(t.a){uc(t);var n=t.a,r=t.s[0]?Zs:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function uc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(fe.clearTimeout(t.m),t.m=null)}function ac(t){return t.a?t.a.readyState:0}function cc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return du(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ka(t,e,n))}function hc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fc(t){this.pa=0,this.g=[],this.c=new Xu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=hc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=hc("baseRetryDelayMs",5e3,t),this.Ma=hc("retryDelaySeedMs",1e4,t),this.Ja=hc("forwardChannelMaxRetries",2,t),this.ma=hc("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new za(t&&t.concurrentRequestLimit),this.ka=new Ja,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function lc(t){if(dc(t),3==t.v){var e=t.R++,n=Sa(t.B);ka(n,"SID",t.J),ka(n,"RID",e),ka(n,"TYPE","terminate"),mc(t,n),(e=new fa(t,t.c,e,void 0)).H=2,e.i=Ra(Sa(n)),n=!1,fe.navigator&&fe.navigator.sendBeacon&&(n=fe.navigator.sendBeacon(e.i.toString(),"")),!n&&fe.Image&&((new Image).src=e.i,n=!0),n||(e.a=xc(e.g,null),e.a.ba(e.i)),e.u=de(),ya(e)}Dc(t)}function pc(t){t.a&&(Ic(t),t.a.cancel(),t.a=null)}function dc(t){pc(t),t.j&&(fe.clearTimeout(t.j),t.j=null),Tc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&fe.clearTimeout(t.h),t.h=null)}function vc(t,e){t.g.push(new Ga(t.La++,e)),3==t.v&&yc(t)}function yc(t){Wa(t.b)||t.h||(t.h=!0,Bu(t.Ba,t),t.u=0)}function gc(t,e){var n;n=e?e.f:t.R++;var r=Sa(t.B);ka(r,"SID",t.J),ka(r,"RID",n),ka(r,"AID",t.P),mc(t,r),t.i&&t.l&&cc(r,t.i,t.l),n=new fa(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=bc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Qa(t.b,n),la(n,r,e)}function mc(t,e){t.f&&Ia({},(function(t,n){ka(e,n,t)}))}function bc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ou(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Za(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function wc(t){t.a||t.j||(t.U=1,Bu(t.Aa,t),t.o=0)}function Ec(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=ia(ou(t.Aa,t),Ac(t,t.o)),t.o++,!0)}function Ic(t){null!=t.s&&(fe.clearTimeout(t.s),t.s=null)}function _c(t){t.a=new fa(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Sa(t.la);ka(e,"RID","rpc"),ka(e,"SID",t.J),ka(e,"CI",t.H?"0":"1"),ka(e,"AID",t.P),mc(t,e),ka(e,"TYPE","xmlhttp"),t.i&&t.l&&cc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ra(Sa(e)),n.j=null,n.I=!0,pa(n,t)}function Tc(t){null!=t.m&&(fe.clearTimeout(t.m),t.m=null)}function Nc(t,e){var n=null;if(t.a==e){Tc(t),Ic(t),t.a=null;var r=2}else{if(!Ha(t.b,e))return;n=e.s,Ya(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=de()-e.u;var i=t.u;(r=Ju()).dispatchEvent(new ra(r,n,e,i)),yc(t)}else wc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ka(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja))&&(t.h=ia(ou(t.Ba,t,e),Ac(t,t.u)),t.u++,!0))}(t,e)||2==r&&Ec(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Sc(t,5);break;case 4:Sc(t,10);break;case 3:Sc(t,6);break;default:Sc(t,2)}}function Ac(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Sc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ou(t.Xa,t);n||(n=new Aa("//www.google.com/images/cleardot.gif"),fe.location&&"http"==fe.location.protocol||Da(n,"https"),Ra(n)),function(t,e){var n=new Xu;if(fe.Image){var r=new Image;r.onload=su(tc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=su(tc,n,r,"TestLoadImage: error",!1,e),r.onabort=su(tc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=su(tc,n,r,"TestLoadImage: timeout",!1,e),fe.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else na(2);t.v=0,t.f&&t.f.ra(e),Dc(t),dc(t)}function Dc(t){t.v=0,t.I=-1,t.f&&(0==Xa(t.b).length&&0==t.g.length||(t.b.c.length=0,hu(t.g),t.g.length=0),t.f.qa())}function Oc(t,e,n){var r=function(t){return t instanceof Aa?Sa(t):new Aa(t,void 0)}(n);if(""!=r.c)e&&Oa(r,e+"."+r.c),xa(r,r.h);else{var i=fe.location;r=function(t,e,n,r){var i=new Aa(null,void 0);return t&&Da(i,t),e&&Oa(i,e),n&&xa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&du(t.W,(function(t,e){ka(r,e,t)})),e=t.A,n=t.na,e&&n&&ka(r,e,n),ka(r,"VER",t.ha),mc(t,r),r}function xc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ec(t.Ka)).F=t.C,e}function Cc(){}function kc(){if(Te&&!(10<=Number(Pe)))throw Error("Environmental error: no available transport.")}function Rc(t,e){Pu.call(this),this.a=new fc(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!fu(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fu(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Vc(this)}function Lc(t){aa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Pc(){ca.call(this),this.status=1}function Vc(t){this.a=t}function Uc(){return Dn.logLevel}function Mc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Dn.logLevel<=Tt.DEBUG){var r=e.map(Bc);Dn.debug.apply(Dn,Rs(["Firestore (7.23.0): "+t],r))}}function jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Dn.logLevel<=Tt.ERROR){var r=e.map(Bc);Dn.error.apply(Dn,Rs(["Firestore (7.23.0): "+t],r))}}function Fc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Dn.logLevel<=Tt.WARN){var r=e.map(Bc);Dn.warn.apply(Dn,Rs(["Firestore (7.23.0): "+t],r))}}function Bc(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.23.0) INTERNAL ASSERTION FAILED: "+t;throw jc(e),new Error(e)}function Gc(t,e){t||qc()}function zc(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Kc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qc(t,e){if(0!==e.length)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+lh(e.length,"argument")+".")}function Yc(t,e,n){if(e.length!==n)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires "+lh(n,"argument")+", but was called with "+lh(e.length,"argument")+".")}function Xc(t,e,n){if(e.length<n)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires at least "+lh(n,"argument")+", but was called with "+lh(e.length,"argument")+".")}function $c(t,e,n,r){if(e.length<n||e.length>r)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+lh(e.length,"argument")+".")}function Jc(t,e,n,r){ih(t,e,fh(n)+" argument",r)}function Zc(t,e,n,r){void 0!==r&&Jc(t,e,n,r)}function th(t,e,n,r){ih(t,e,n+" option",r)}function eh(t,e,n,r){void 0!==r&&th(t,e,n,r)}function nh(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,u=i;s<u.length;s++){var a=u[s];if(a===r)return;o.push(sh(a))}var c=sh(r);throw new Sn(An.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function rh(t,e,n,r){if(!e.some((function(t){return t===r})))throw new Sn(An.INVALID_ARGUMENT,"Invalid value "+sh(r)+" provided to function "+t+"() for its "+fh(n)+" argument. Acceptable values: "+e.join(", "));return r}function ih(t,e,n,r){if(!("object"===e?oh(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=sh(r);throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function oh(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function sh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":qc()}function uh(t,e,n){if(void 0===n)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+fh(e)+" argument, but it was undefined.")}function ah(t,e,n){Kc(e,(function(e,r){if(n.indexOf(e)<0)throw new Sn(An.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function ch(t,e,n,r){var i=sh(r);return new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires its "+fh(n)+" argument to be a "+e+", but it was: "+i)}function hh(t,e,n){if(n<=0)throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires its "+fh(e)+" argument to be a positive number, but it was: "+n+".")}function fh(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function lh(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){return t<e?-1:t>e?1:0}function vh(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function yh(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){if("undefined"==typeof Uint8Array)throw new Sn(An.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mh(){if("undefined"==typeof atob)throw new Sn(An.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bh(t){return null==t}function wh(t){return 0===t&&1/t==-1/0}function Eh(t){return"number"==typeof t&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Wn(t,e,n,r,i,o,s)}function _h(t){var e=zc(t);if(null===e.Z){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+qh(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fl(e.startAt)),e.endAt&&(n+="|ub:",n+=fl(e.endAt)),e.Z=n}return e.Z}function Th(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!vl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Mh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pl(t.startAt,e.startAt)&&pl(t.endAt,e.endAt)}function Nh(t){return Rn.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ah(t){switch(t){case An.OK:return qc();case An.CANCELLED:case An.UNKNOWN:case An.DEADLINE_EXCEEDED:case An.RESOURCE_EXHAUSTED:case An.INTERNAL:case An.UNAVAILABLE:case An.UNAUTHENTICATED:return!1;case An.INVALID_ARGUMENT:case An.NOT_FOUND:case An.ALREADY_EXISTS:case An.PERMISSION_DENIED:case An.FAILED_PRECONDITION:case An.ABORTED:case An.OUT_OF_RANGE:case An.UNIMPLEMENTED:case An.DATA_LOSS:return!0;default:return qc()}}function Sh(t){if(void 0===t)return jc("GRPC error has no .code"),An.UNKNOWN;switch(t){case Vn.OK:return An.OK;case Vn.CANCELLED:return An.CANCELLED;case Vn.UNKNOWN:return An.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return An.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return An.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return An.INTERNAL;case Vn.UNAVAILABLE:return An.UNAVAILABLE;case Vn.UNAUTHENTICATED:return An.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return An.INVALID_ARGUMENT;case Vn.NOT_FOUND:return An.NOT_FOUND;case Vn.ALREADY_EXISTS:return An.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return An.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return An.FAILED_PRECONDITION;case Vn.ABORTED:return An.ABORTED;case Vn.OUT_OF_RANGE:return An.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return An.UNIMPLEMENTED;case Vn.DATA_LOSS:return An.DATA_LOSS;default:return qc()}}function Dh(){return Zn}function Oh(){return Dh()}function xh(){return tr}function Ch(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=nr,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function kh(){return rr}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rh(){return new Qn(Rn.i)}function Lh(){return new Qn(Rn.i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vh(t){var e=Gh(t.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ph(t)?4:10:qc()}function Mh(t,e){var n=Uh(t);if(n!==Uh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vh(t).isEqual(Vh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Gh(t.timestampValue),r=Gh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Wh(t.bytesValue).isEqual(Wh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zh(t.geoPointValue.latitude)===zh(e.geoPointValue.latitude)&&zh(t.geoPointValue.longitude)===zh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zh(t.integerValue)===zh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zh(t.doubleValue),r=zh(e.doubleValue);return n===r?wh(n)===wh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vh(t.arrayValue.values||[],e.arrayValue.values||[],Mh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Wc(n)!==Wc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mh(n[i],r[i])))return!1;return!0}(t,e);default:return qc()}}function jh(t,e){return void 0!==(t.values||[]).find((function(t){return Mh(t,e)}))}function Fh(t,e){var n=Uh(t),r=Uh(e);if(n!==r)return dh(n,r);switch(n){case 0:return 0;case 1:return dh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=zh(t.integerValue||t.doubleValue),r=zh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Bh(t.timestampValue,e.timestampValue);case 4:return Bh(Vh(t),Vh(e));case 5:return dh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Wh(t),r=Wh(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=dh(n[i],r[i]);if(0!==o)return o}return dh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=dh(zh(t.latitude),zh(e.latitude));return 0!==n?n:dh(zh(t.longitude),zh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Fh(n[i],r[i]);if(o)return o}return dh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=dh(r[s],o[s]);if(0!==u)return u;var a=Fh(n[r[s]],i[o[s]]);if(0!==a)return a}return dh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw qc()}}function Bh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return dh(t,e);var n=Gh(t),r=Gh(e),i=dh(n.seconds,r.seconds);return 0!==i?i:dh(n.nanos,r.nanos)}function qh(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Gh(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wh(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,Rn.C(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):qc();var n,r}(t)}function Gh(t){if(Gc(!!t),"string"==typeof t){var e=0,n=dr.exec(t);if(Gc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zh(t.seconds),nanos:zh(t.nanos)}}function zh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wh(t){return"string"==typeof t?Pn.fromBase64String(t):Pn.fromUint8Array(t)}function Kh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function Hh(t){return!!t&&"integerValue"in t}function Qh(t){return!!t&&"arrayValue"in t}function Yh(t){return!!t&&"nullValue"in t}function Xh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){return{integerValue:""+t}}function Zh(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function tf(t,e){return Eh(e)?Jh(e):Zh(t,e)}function ef(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function nf(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function rf(t,e){return ef(t,e.X())}function of(t){return Gc(!!t),zn.Y(function(t){var e=Gh(t);return new Gn(e.seconds,e.nanos)}(t))}function sf(t,e){return function(t){return new xn(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function uf(t){var e=xn.P(t);return Gc(Of(e)),e}function af(t,e){return sf(t.U,e.path)}function cf(t,e){var n=uf(e);return Gc(n.get(1)===t.U.projectId),Gc(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new Rn(pf(n))}function hf(t,e){return sf(t.U,e)}function ff(t){var e=uf(t);return 4===e.length?xn.g():pf(e)}function lf(t){return new xn(["projects",t.U.projectId,"databases",t.U.database]).R()}function pf(t){return Gc(t.length>4&&"documents"===t.get(4)),t.u(5)}function df(t,e,n){return{name:af(t,e),fields:n.proto.mapValue.fields}}function vf(t,e){var n;if(e instanceof Dr)n={update:df(t,e.key,e.value)};else if(e instanceof Cr)n={delete:af(t,e.key)};else if(e instanceof Or)n={update:df(t,e.key,e.data),updateMask:Df(e.Qe)};else if(e instanceof xr)n={transform:{document:af(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof br)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof wr)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof Er)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof Ir)return{fieldPath:e.field.R(),increment:n.We};throw qc()}(0,t)}))}};else{if(!(e instanceof kr))return qc();n={verify:af(t,e.key)}}return e.Ke.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:rf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:qc()}(t,e.Ke)),n}function yf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ar.updateTime(of(t.updateTime)):void 0!==t.exists?Ar.exists(t.exists):Ar.Ge()}(e.currentDocument):Ar.Ge();if(e.update){e.update.name;var r=cf(t,e.update.name),i=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new _r(e.map((function(t){return kn.S(t)})))}(e.updateMask);return new Or(r,i,o,n)}return new Dr(r,i,n)}if(e.delete){var s=cf(t,e.delete);return new Cr(s,n)}if(e.transform){var u=cf(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Gc("REQUEST_TIME"===e.setToServerValue),n=new br;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new wr(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Er(i)}else"increment"in e?n=new Ir(t,e.increment):qc();var o=kn.S(e.fieldPath);return new Tr(o,n)}(t,e)}));return Gc(!0===n.exists),new xr(u,a)}if(e.verify){var c=cf(t,e.verify);return new kr(c,n)}return qc()}function gf(t,e){return{documents:[hf(t,e.path)]}}function mf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hf(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Xh(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NAN"}};if(Yh(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xh(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NOT_NAN"}};if(Yh(t.value))return{unaryFilter:{field:Tf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tf(t.field),op:_f(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Tf(t.field),direction:If(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ue||bh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=wf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wf(e.endAt)),n}function bf(t){var e=ff(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Gc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Sf(e)]:void 0!==e.fieldFilter?[Af(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):qc():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Yr(Nf(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return bh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ef(n.startAt));var h=null;return n.endAt&&(h=Ef(n.endAt)),el(Hf(e,i,u,s,a,"F",c,h))}function wf(t){return{before:t.before,values:t.position}}function Ef(t){var e=!!t.before,n=t.values||[];return new Qr(n,e)}function If(t){return vr[t]}function _f(t){return yr[t]}function Tf(t){return{fieldPath:t.R()}}function Nf(t){return kn.S(t.fieldPath)}function Af(t){return Fr.create(Nf(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return qc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Sf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Nf(t.unaryFilter.field);return Fr.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Nf(t.unaryFilter.field);return Fr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nf(t.unaryFilter.field);return Fr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nf(t.unaryFilter.field);return Fr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return qc()}}function Df(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function Of(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e,n){return t instanceof br?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof wr?Rf(t,e):t instanceof Er?Lf(t,e):function(t,e){var n=kf(t,e),r=Pf(n)+Pf(t.We);return Hh(n)&&Hh(t.We)?Jh(r):Zh(t.serializer,r)}(t,e)}function Cf(t,e,n){return t instanceof wr?Rf(t,e):t instanceof Er?Lf(t,e):n}function kf(t,e){return t instanceof Ir?Hh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}function Rf(t,e){for(var n=Vf(e),r=function(t){n.some((function(e){return Mh(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}function Lf(t,e){for(var n=Vf(e),r=function(t){n=n.filter((function(e){return!Mh(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}function Pf(t){return zh(t.integerValue||t.doubleValue)}function Vf(t){return Qh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){return void 0!==t.updateTime?e instanceof Vr&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Vr}function Mf(t,e,n){return t instanceof Dr?function(t,e,n){return new Vr(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Or?function(t,e,n){if(!Uf(t.Ke,e))return new Mr(t.key,n.version);var r=Gf(t,e);return new Vr(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof xr?function(t,e,n){if(Gc(null!=n.transformResults),!Uf(t.Ke,e))return new Mr(t.key,n.version);var r=zf(t,e),i=function(t,e,n){var r=[];Gc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Vr&&(u=e.field(o.field)),r.push(Cf(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Wf(t,r.data(),i);return new Vr(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ur(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function jf(t,e,n,r){return t instanceof Dr?function(t,e){if(!Uf(t.Ke,e))return e;var n=qf(e);return new Vr(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof Or?function(t,e){if(!Uf(t.Ke,e))return e;var n=qf(e),r=Gf(t,e);return new Vr(t.key,n,r,{Ye:!0})}(t,e):t instanceof xr?function(t,e,n,r){if(!Uf(t.Ke,e))return e;var i=zf(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Vr&&(c=n.field(u.field)),null===c&&r instanceof Vr&&(c=r.field(u.field)),i.push(xf(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=Wf(t,i.data(),o);return new Vr(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return Uf(t.Ke,e)?new Ur(t.key,zn.min()):e}(t,e)}function Ff(t,e){return t instanceof xr?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Vr?e.field(o.field):void 0,u=kf(o.transform,s||null);null!=u&&(n=null==n?(new Lr).set(o.field,u):n.set(o.field,u))}return n?n.Je():null}(t,e):null}function Bf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ke.isEqual(e.Ke)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||vh(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof wr&&e instanceof wr||t instanceof Er&&e instanceof Er?vh(t.elements,e.elements,Mh):t instanceof Ir&&e instanceof Ir?Mh(t.We,e.We):t instanceof br&&e instanceof br}(t.transform,e.transform)}(t,e)})))}function qf(t){return t instanceof Vr?t.version:zn.min()}function Gf(t,e){return function(t,e){var n=new Lr(e);return t.Qe.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Je()}(t,e instanceof Vr?e.data():Rr.empty())}function zf(t,e){return e}function Wf(t,e,n){for(var r=new Lr(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Je()}function Kf(t){var e=[];return Kc(t.fields||{},(function(t,n){var r=new kn([t]);if($h(n)){var i=Kf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new _r(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Hf(t,e,n,r,i,o,s,u){return new jr(t,e,n,r,i,o,s,u)}function Qf(t){return new jr(t)}function Yf(t){return!bh(t.limit)&&"F"===t.on}function Xf(t){return!bh(t.limit)&&"L"===t.on}function $f(t){return t.rn.length>0?t.rn[0].field:null}function Jf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Zf(t){return null!==t.collectionGroup}function tl(t){var e=zc(t);if(null===e.an){e.an=[];var n=Jf(e),r=$f(e);if(null!==n&&null===r)n.p()||e.an.push(new Yr(n)),e.an.push(new Yr(kn.v(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var u=s[o];e.an.push(u),u.field.p()&&(i=!0)}if(!i){var a=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.an.push(new Yr(kn.v(),a))}}}return e.an}function el(t){var e=zc(t);if(!e.cn)if("F"===e.on)e.cn=Ih(e.path,e.collectionGroup,tl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=tl(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Yr(o.field,s))}var u=e.endAt?new Qr(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Qr(e.startAt.position,!e.startAt.before):null;e.cn=Ih(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.cn}function nl(t,e,n){return new jr(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rl(t,e){return new jr(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,e,t.endAt)}function il(t,e){return new jr(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,e)}function ol(t,e){return Th(el(t),el(e))&&t.on===e.on}function sl(t){return _h(el(t))+"|lt:"+t.on}function ul(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+qh(e.value);var e})).join(", ")+"]"),bh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+fl(t.startAt)),t.endAt&&(e+=", endAt: "+fl(t.endAt)),"Target("+e+")"}(el(t))+"; limitType="+t.on+")"}function al(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):Rn.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ll(t.startAt,tl(t),e)||t.endAt&&ll(t.endAt,tl(t),e))}(t,e)}function cl(t){return function(e,n){for(var r=!1,i=0,o=tl(t);i<o.length;i++){var s=o[i],u=dl(s,e,n);if(0!==u)return u;r=r||s.field.p()}return 0}}function hl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Rn.C(t.referenceValue)}))}function fl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return qh(t)})).join(",")}function ll(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.p()?Rn.i(Rn.C(s.referenceValue),n.key):Fh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function pl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mh(t.position[n],e.position[n]))return!1;return!0}function dl(t,e,n){var r=t.field.p()?Rn.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Fh(r,i):qc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return qc()}}function vl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){return"IndexedDbTransactionError"===t.name}function gl(t){return new Jr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ml(t.target.error);n(e)}}))}function ml(t){var e=Zr.Mn(u.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Sn("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ii||(ii=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(){return"undefined"!=typeof window?window:null}function wl(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t,e){if(jc("AsyncQueue",e+": "+t),yl(t))return new Sn(An.UNAVAILABLE,e+": "+t);throw t}function Il(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Os(this,(function(c){switch(c.label){case 0:if(n=zc(t),r=e.query,i=!1,(o=n.Ls.get(r))||(i=!0,o=new ui),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.qs(r)];case 2:return s.Os=c.sent(),[3,4];case 3:return u=c.sent(),a=El(u,"Initialization of query '"+ul(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.Ls.set(r,o),o.listeners.push(e),e.Us(n.onlineState),o.Os&&e.Qs(o.Os)&&Al(n),[2]}}))}))}function _l(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s;return Os(this,(function(u){return n=zc(t),r=e.query,i=!1,(o=n.Ls.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.Ls.delete(r),n.Ws(r))]:[2]}))}))}function Tl(t,e){for(var n=zc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.Ls.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);a.Os=s}}r&&Al(n)}function Nl(t,e,n){var r=zc(t),i=r.Ls.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Ls.delete(e)}function Al(t){t.Bs.forEach((function(t){t.next()}))}function Sl(t,e){return"firestore_clients_"+t+"_"+e}function Dl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Xs()&&(r+="_"+e.uid),r}function Ol(t,e){return"firestore_targets_"+t+"_"+e}function xl(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=dh(n,i);return 0===s?dh(r,o):s}function Cl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Rl(e)),e=kl(t.get(n),e);return Rl(e)}function kl(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Rl(t){return t+""}function Ll(t){var e=t.length;if(Gc(e>=2),2===e)return Gc(""===t.charAt(0)&&""===t.charAt(1)),xn.g();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&qc(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:qc()}o=s+2}return new xn(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e){if(e.document)return function(t,e,n){var r=cf(t,e.name),i=of(e.updateTime),o=new Rr({mapValue:{fields:e.fields}});return new Vr(r,i,o,{hasCommittedMutations:!!n})}(t.Do,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Rn.$(e.noDocument.path),r=Fl(e.noDocument.readTime);return new Ur(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Rn.$(e.unknownDocument.path),o=Fl(e.unknownDocument.version);return new Mr(i,o)}return qc()}function Vl(t,e,n){var r=Ul(n),i=e.key.path.h().A();if(e instanceof Vr){var o=function(t,e){return{name:af(t,e.key),fields:e.sn().mapValue.fields,updateTime:ef(t,e.version.X())}}(t.Do,e),s=e.hasCommittedMutations;return new Wi(null,null,o,s,r,i)}if(e instanceof Ur){var u=e.key.path.A(),a=jl(e.version),c=e.hasCommittedMutations;return new Wi(null,new Gi(u,a),null,c,r,i)}if(e instanceof Mr){var h=e.key.path.A(),f=jl(e.version);return new Wi(new zi(h,f),null,null,!0,r,i)}return qc()}function Ul(t){var e=t.X();return[e.seconds,e.nanoseconds]}function Ml(t){var e=new Gn(t[0],t[1]);return zn.Y(e)}function jl(t){var e=t.X();return new Mi(e.seconds,e.nanoseconds)}function Fl(t){var e=new Gn(t.seconds,t.nanoseconds);return zn.Y(e)}function Bl(t,e){var n=(e.baseMutations||[]).map((function(e){return yf(t.Do,e)})),r=e.mutations.map((function(e){return yf(t.Do,e)})),i=Gn.fromMillis(e.localWriteTimeMs);return new bi(e.batchId,i,n,r)}function ql(t){var e,n,r=Fl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Fl(t.lastLimboFreeSnapshotVersion):zn.min();return void 0!==t.query.documents?(Gc(1===(n=t.query).documents.length),e=el(Qf(ff(n.documents[0])))):e=bf(t.query),new Kn(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Pn.fromBase64String(t.resumeToken))}function Gl(t,e){var n,r=jl(e.et),i=jl(e.lastLimboFreeSnapshotVersion);n=Nh(e.target)?gf(t.Do,e.target):mf(t.Do,e.target);var o=e.resumeToken.toBase64();return new Hi(e.targetId,_h(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t,e,n){var r=qi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Hl(t).ss({range:o,ns:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Wl(t,e,n){var r=t.store(Bi.store),i=t.store(qi.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ss({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Gc(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=qi.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Jr.$n(o).next((function(){return c}))}function Kl(t){return io.Un(t,Bi.store)}function Hl(t){return io.Un(t,qi.store)}function Ql(t){return io.Un(t,Fi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){return io.Un(t,Ki.store)}function Xl(t){return io.Un(t,Wi.store)}function $l(t){return t.path.A()}function Jl(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw qc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){t.createObjectStore(Qi.store,{keyPath:Qi.keyPath}).createIndex(Qi.documentTargetsIndex,Qi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hi.store,{keyPath:Hi.keyPath}).createIndex(Hi.queryTargetsIndexName,Hi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yi.store)}function tp(t){return io.Un(t,Xi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ep(t){return io.Un(t,Hi.store)}function np(t){return io.Un(t,Yi.store)}function rp(t){return io.Un(t,Qi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return io.Un(t,ji.store)}function op(t){return io.Un(t,$i.store)}function sp(t,e){return rp(t).put(function(t,e){return new Qi(0,Cl(t.path),e)}(e,t.Fa))}function up(t,e){var n=t.projectId;return t.W||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function ap(t,e){var n=zc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Sc.ia({ra:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Jr.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,s=n._r.get(t);Gc(null!==s),(!o||o.version.L(s)<0)&&(o=i.ar(t,o,n))&&r.Tr(o,n.lr)}))})),s.next((function(){return t.vr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.vr.Go(t)})).next((function(){return n.Dc.$r(t,r)}))}))}function cp(t){var e=zc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ja.Ta(t)}))}function hp(t,e){var n=zc(t),r=e.et,i=n.Vc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Sc.ia({ra:!0});i=n.Vc;var s=[];e.Gt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ja.Da(t,e.ne,o).next((function(){return n.ja.va(t,e.te,o)})));var a=e.resumeToken;if(a.O()>0){var c=u.st(a,r).nt(t.Fa);i=i.rt(o,c),function(t,e,n){return Gc(e.resumeToken.O()>0),0===t.resumeToken.O()||e.et.J()-t.et.J()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(u,c,e)&&s.push(n.ja.ga(t,c))}}}));var u=Dh(),a=Ch();if(e.Ht.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Ht.forEach((function(a,c){var h=i.get(a);c instanceof Ur&&c.version.isEqual(zn.min())?(o.Ir(a,r),u=u.rt(a,c)):null==h||c.version.L(h.version)>0||0===c.version.L(h.version)&&h.hasPendingWrites?(o.Tr(c,r),u=u.rt(a,c)):Mc("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Yt.has(a)&&s.push(n.persistence.Co.gc(t,a))}))}))),!r.isEqual(zn.min())){var c=n.ja.Ta(t).next((function(e){return n.ja.Ia(t,t.Fa,r)}));s.push(c)}return Jr.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Dc.kr(t,u)}))})).then((function(t){return n.Vc=i,t}))}function fp(t,e){var n=zc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.vr.Lo(t,e)}))}function lp(t,e){var n=zc(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ja.ba(t,e).next((function(i){return i?(r=i,Jr.resolve(r)):n.ja.da(t).next((function(i){return r=new Kn(e,i,0,t.Fa),n.ja.Aa(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Vc.get(t.targetId);return(null===r||t.et.L(r.et)>0)&&(n.Vc=n.Vc.rt(t.targetId,t),n.bc.set(e,t.targetId)),t}))}function pp(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s;return Os(this,(function(u){switch(u.label){case 0:r=zc(t),i=r.Vc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Co.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!yl(s=u.sent()))throw s;return Mc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Vc=r.Vc.remove(e),r.bc.delete(i.target),[2]}}))}))}function dp(t,e,n){var r=zc(t),i=zn.min(),o=Ch();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=zc(t),i=r.bc.get(n);return void 0!==i?Jr.resolve(r.Vc.get(i)):r.ja.ba(e,n)}(r,t,el(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ja.Na(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.yc.Or(t,e,n?i:zn.min(),n?o:Ch())})).next((function(t){return{documents:t,Nc:o}}))}))}function vp(t,e){var n=zc(t),r=zc(n.ja),i=n.Vc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.qe(t,e).next((function(t){return t?t.target:null}))}))}function yp(t){var e=zc(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=zc(t),i=Dh(),o=Ul(n),s=Xl(e),u=IDBKeyRange.lowerBound(o,!0);return s.ss({index:Wi.readTimeIndex,range:u},(function(t,e){var n=Pl(r.serializer,e);i=i.rt(n.key,n),o=e.readTime})).next((function(){return{Fc:i,readTime:Ml(o)}}))}(e.Sc,t,e.vc)})).then((function(t){var n=t.Fc,r=t.readTime;return e.vc=r,n}))}function gp(t){return Ds(this,void 0,void 0,(function(){var e;return Os(this,(function(n){return[2,(e=zc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Xl(t),n=zn.min();return e.ss({index:Wi.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ml(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.vc=t}))]}))}))}function mp(t){return Ds(this,void 0,void 0,(function(){return Os(this,(function(e){if(t.code!==An.FAILED_PRECONDITION||t.message!==Ii)throw t;return Mc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t){return Ds(this,void 0,void 0,(function(){var e,n;return Os(this,(function(r){switch(r.label){case 0:if(!Dp(t))return[3,4];e=0,n=t.Yu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function wp(t){return Ds(this,void 0,void 0,(function(){var e,n;return Os(this,(function(r){switch(r.label){case 0:e=0,n=t.Yu,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ep(t){return Ds(this,void 0,void 0,(function(){var e;return Os(this,(function(n){switch(n.label){case 0:return e=zc(t),Mc("RemoteStore","RemoteStore shutting down."),e.Hu.add(5),[4,wp(e)];case 1:return n.sent(),e.Ju.Si(),e.Zu.set("Unknown"),[2]}}))}))}function Ip(t,e){var n=zc(t);n.zu.has(e.targetId)||(n.zu.set(e.targetId,e),Sp(n)?Ap(n):Gp(n).cu()&&Tp(n,e))}function _p(t,e){var n=zc(t),r=Gp(n);n.zu.delete(e),r.cu()&&Np(n,e),0===n.zu.size&&(r.cu()?r.lu():Dp(n)&&n.Zu.set("Unknown"))}function Tp(t,e){t.th.Ee(e.targetId),Gp(t).yu(e)}function Np(t,e){t.th.Ee(e),Gp(t).Vu(e)}function Ap(t){t.th=new pr({Be:function(e){return t.Ku.Be(e)},qe:function(e){return t.zu.get(e)||null}}),Gp(t).start(),t.Zu.Lu()}function Sp(t){return Dp(t)&&!Gp(t).au()&&t.zu.size>0}function Dp(t){return 0===zc(t).Hu.size}function Op(t){t.th=void 0}function xp(t){return Ds(this,void 0,void 0,(function(){return Os(this,(function(e){return t.zu.forEach((function(e,n){Tp(t,e)})),[2]}))}))}function Cp(t,e){return Ds(this,void 0,void 0,(function(){return Os(this,(function(n){return Op(t),Sp(t)?(t.Zu.Uu(e),Ap(t)):t.Zu.set("Unknown"),[2]}))}))}function kp(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o;return Os(this,(function(s){switch(s.label){case 0:if(t.Zu.set("Online"),!(e instanceof fr&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o;return Os(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.zu.has(o)?[4,t.Ku.eh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.zu.delete(o),t.th.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Mc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Rp(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof cr?t.th.pe(e):e instanceof hr?t.th.$e(e):t.th.Se(e),n.isEqual(zn.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,cp(t.Wu)];case 8:return i=s.sent(),n.L(i)>=0?[4,function(t,e){var n=t.th.Me(e);return n.Gt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.zu.get(r);i&&t.zu.set(r,i.st(n.resumeToken,e))}})),n.zt.forEach((function(e){var n=t.zu.get(e);if(n){t.zu.set(e,n.st(Pn.B,n.et)),Np(t,e);var r=new Kn(n.target,e,1,n.sequenceNumber);Tp(t,r)}})),t.Ku.nh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Mc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Rp(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Rp(t,e,n){return Ds(this,void 0,void 0,(function(){var r=this;return Os(this,(function(i){switch(i.label){case 0:if(!yl(e))throw e;return t.Hu.add(1),[4,wp(t)];case 1:return i.sent(),t.Zu.set("Offline"),n||(n=function(){return cp(t.Wu)}),t.os.Ds((function(){return Ds(r,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return Mc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Hu.delete(1),[4,bp(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Lp(t,e){return e().catch((function(n){return Rp(t,n,e)}))}function Pp(t){return Ds(this,void 0,void 0,(function(){var e,n,r,i,o;return Os(this,(function(s){switch(s.label){case 0:e=zc(t),n=zp(e),r=e.Gu.length>0?e.Gu[e.Gu.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Dp(t)&&t.Gu.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,fp(e.Wu,r)];case 3:return null===(i=s.sent())?(0===e.Gu.length&&n.lu(),[3,7]):(r=i.batchId,function(t,e){t.Gu.push(e);var n=zp(t);n.cu()&&n.bu&&n.vu(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Rp(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Vp(e)&&Up(e),[2]}}))}))}function Vp(t){return Dp(t)&&!zp(t).au()&&t.Gu.length>0}function Up(t){zp(t).start()}function Mp(t){return Ds(this,void 0,void 0,(function(){return Os(this,(function(e){return zp(t).Cu(),[2]}))}))}function jp(t){return Ds(this,void 0,void 0,(function(){var e,n,r,i;return Os(this,(function(o){for(e=zp(t),n=0,r=t.Gu;n<r.length;n++)i=r[n],e.vu(i.mutations);return[2]}))}))}function Fp(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i;return Os(this,(function(o){switch(o.label){case 0:return r=t.Gu.shift(),i=wi.from(r,e,n),[4,Lp(t,(function(){return t.Ku.sh(i)}))];case 1:return o.sent(),[4,Pp(t)];case 2:return o.sent(),[2]}}))}))}function Bp(t,e){return Ds(this,void 0,void 0,(function(){return Os(this,(function(n){switch(n.label){case 0:return e&&zp(t).bu?[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r;return Os(this,(function(i){switch(i.label){case 0:return Ah(r=e.code)&&r!==An.ABORTED?(n=t.Gu.shift(),zp(t).hu(),[4,Lp(t,(function(){return t.Ku.ih(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Pp(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Vp(t)&&Up(t),[2]}}))}))}function qp(t,e){return Ds(this,void 0,void 0,(function(){var n;return Os(this,(function(r){switch(r.label){case 0:return n=zc(t),e?(n.Hu.delete(2),[4,bp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Hu.add(2),[4,wp(n)]);case 3:r.sent(),n.Zu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Gp(t){var e=this;return t.rh||(t.rh=function(t,e,n){var r=zc(t);return r.Fu(),new yo(e,r.su,r.credentials,r.serializer,n)}(t.ju,t.os,{Ru:xp.bind(null,t),mu:Cp.bind(null,t),gu:kp.bind(null,t)}),t.Yu.push((function(n){return Ds(e,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return n?(t.rh.hu(),Sp(t)?Ap(t):t.Zu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.rh.stop()];case 2:e.sent(),Op(t),e.label=3;case 3:return[2]}}))}))}))),t.rh}function zp(t){var e=this;return t.oh||(t.oh=function(t,e,n){var r=zc(t);return r.Fu(),new go(e,r.su,r.credentials,r.serializer,n)}(t.ju,t.os,{Ru:Mp.bind(null,t),mu:Bp.bind(null,t),Du:jp.bind(null,t),Su:Fp.bind(null,t)}),t.Yu.push((function(n){return Ds(e,void 0,void 0,(function(){return Os(this,(function(e){switch(e.label){case 0:return n?(t.oh.hu(),[4,Pp(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.oh.stop()];case 3:e.sent(),t.Gu.length>0&&(Mc("RemoteStore","Stopping write stream with "+t.Gu.length+" pending writes"),t.Gu=[]),e.label=4;case 4:return[2]}}))}))}))),t.oh
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Wp(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Os(this,(function(a){switch(a.label){case 0:return n=gd(t),(o=n.Ch.get(e))?(r=o.targetId,n.bh.Mi(r),i=o.view.gh(),[3,4]):[3,1];case 1:return[4,lp(n.Wu,el(e))];case 2:return s=a.sent(),u=n.bh.Mi(s.targetId),r=s.targetId,[4,Kp(n,e,r,"current"===u)];case 3:i=a.sent(),n.qh&&Ip(n.Vh,s),a.label=4;case 4:return[2,i]}}))}))}function Kp(t,e,n,r){return Ds(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Os(this,(function(h){switch(h.label){case 0:return t.Uh=function(e,n,r){return function(t,e,n,r){return Ds(this,void 0,void 0,(function(){var i,o,s;return Os(this,(function(u){switch(u.label){case 0:return(i=e.view.dh(n)).Th?[4,dp(t.Wu,e.query,!1).then((function(t){var n=t.documents;return e.view.dh(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Gt.get(e.targetId),s=e.view.gr(i,t.qh,o),[2,(rd(t,e.targetId,s.Ah),s.snapshot)]}}))}))}(t,e,n,r)},[4,dp(t.Wu,e,!0)];case 1:return i=h.sent(),o=new _o(e,i.Nc),s=o.dh(i.documents),u=ar.Xt(n,r&&"Offline"!==t.onlineState),a=o.gr(s,t.qh,u),rd(t,n,a.Ah),c=new To(e,n,o),[2,(t.Ch.set(e,c),t.Nh.has(n)?t.Nh.get(n).push(e):t.Nh.set(n,[e]),a.snapshot)]}}))}))}function Hp(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i;return Os(this,(function(o){switch(o.label){case 0:return n=zc(t),r=n.Ch.get(e),(i=n.Nh.get(r.targetId)).length>1?[2,(n.Nh.set(r.targetId,i.filter((function(t){return!ol(t,e)}))),void n.Ch.delete(e))]:n.qh?(n.bh.Li(r.targetId),n.bh.Ni(r.targetId)?[3,2]:[4,pp(n.Wu,r.targetId,!1).then((function(){n.bh.qi(r.targetId),_p(n.Vh,r.targetId),ed(n,r.targetId)})).catch(mp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ed(n,r.targetId),[4,pp(n.Wu,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Qp(t,e){return Ds(this,void 0,void 0,(function(){var n,r;return Os(this,(function(i){switch(i.label){case 0:n=zc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,hp(n.Wu,e)];case 2:return r=i.sent(),e.Gt.forEach((function(t,e){var r=n.xh.get(e);r&&(Gc(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.yh=!0:t.ee.size>0?Gc(r.yh):t.ne.size>0&&(Gc(r.yh),r.yh=!1))})),[4,sd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Yp(t,e,n){var r=zc(t);if(r.qh&&0===n||!r.qh&&1===n){var i=[];r.Ch.forEach((function(t,n){var r=n.view.Us(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=zc(t);n.onlineState=e;var r=!1;n.Ls.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Us(e)&&(r=!0)})),r&&Al(n)}(r.ph,e),i.length&&r.Dh.gu(i),r.onlineState=e,r.qh&&r.bh.ji(e)}}function Xp(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Os(this,(function(c){switch(c.label){case 0:return(r=zc(t)).bh.Ui(e,"rejected",n),i=r.xh.get(e),(o=i&&i.key)?(s=(s=new Qn(Rn.i)).rt(o,new Ur(o,zn.min())),u=Ch().add(o),a=new ur(zn.min(),new Map,new $n(dh),s,u),[4,Qp(r,a)]):[3,2];case 1:return c.sent(),r.$h=r.$h.remove(o),r.xh.delete(e),od(r),[3,4];case 2:return[4,pp(r.Wu,e,!1).then((function(){return ed(r,e,n)})).catch(mp)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function $p(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i;return Os(this,(function(o){switch(o.label){case 0:n=zc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ap(n.Wu,e)];case 2:return i=o.sent(),td(n,r,null),Zp(n,r),n.bh.xi(r,"acknowledged"),[4,sd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Jp(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i;return Os(this,(function(o){switch(o.label){case 0:r=zc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=zc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.vr.Mo(t,e).next((function(e){return Gc(null!==e),r=e.keys(),n.vr.Qo(t,e)})).next((function(){return n.vr.Go(t)})).next((function(){return n.Dc.$r(t,r)}))}))}(r.Wu,e)];case 2:return i=o.sent(),td(r,e,n),Zp(r,e),r.bh.xi(e,"rejected",n),[4,sd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zp(t,e){(t.Oh.get(e)||[]).forEach((function(t){t.resolve()})),t.Oh.delete(e)}function td(t,e,n){var r=zc(t),i=r.Mh[r.currentUser.Zs()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Mh[r.currentUser.Zs()]=i}}function ed(t,e,n){void 0===n&&(n=null),t.bh.Li(e);for(var r=0,i=t.Nh.get(e);r<i.length;r++){var o=i[r];t.Ch.delete(o),n&&t.Dh.Qh(o,n)}t.Nh.delete(e),t.qh&&t.kh.qc(e).forEach((function(e){t.kh.zo(e)||nd(t,e)}))}function nd(t,e){var n=t.$h.get(e);null!==n&&(_p(t.Vh,n),t.$h=t.$h.remove(e),t.xh.delete(n),od(t))}function rd(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Eo?(t.kh.Sa(o.key,e),id(t,o)):o instanceof Io?(Mc("SyncEngine","Document no longer in limbo: "+o.key),t.kh.Ca(o.key,e),t.kh.zo(o.key)||nd(t,o.key)):qc()}}function id(t,e){var n=e.key;t.$h.get(n)||(Mc("SyncEngine","New document in limbo: "+n),t.Fh.push(n),od(t))}function od(t){for(;t.Fh.length>0&&t.$h.size<t.Sh;){var e=t.Fh.shift(),n=t.Lh.next();t.xh.set(n,new No(e)),t.$h=t.$h.rt(e,n),Ip(t.Vh,new Kn(el(Qf(e.path)),n,2,fi.oi))}}function sd(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s;return Os(this,(function(u){switch(u.label){case 0:return r=zc(t),i=[],o=[],s=[],r.Ch.m()?[3,3]:(r.Ch.forEach((function(t,u){s.push(r.Uh(u,e,n).then((function(t){if(t){r.qh&&r.bh.Ui(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ni.Gr(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Dh.gu(i),[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return Os(this,(function(f){switch(f.label){case 0:n=zc(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Jr.forEach(e,(function(e){return Jr.forEach(e.jr,(function(r){return n.persistence.Co.Sa(t,e.targetId,r)})).next((function(){return Jr.forEach(e.Kr,(function(r){return n.persistence.Co.Ca(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!yl(r=f.sent()))throw r;return Mc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.Vc.get(u),c=a.et,h=a.it(c),n.Vc=n.Vc.rt(u,h));return[2]}}))}))}(r.Wu,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function ud(t,e){return Ds(this,void 0,void 0,(function(){var n,r;return Os(this,(function(i){switch(i.label){case 0:return(n=zc(t)).currentUser.isEqual(e)?[3,3]:(Mc("SyncEngine","User change. New user:",e.Zs()),[4,function(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o;return Os(this,(function(s){switch(s.label){case 0:return n=zc(t),r=n.vr,i=n.Dc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.vr.qo(t).next((function(s){return o=s,r=n.persistence.wc(e),i=new Ti(n.Sc,r,n.persistence.Ec()),r.qo(t)})).next((function(e){for(var n=[],r=[],s=Ch(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.$r(t,s).next((function(t){return{Wh:t,jh:n,Kh:r}}))}))}))];case 1:return o=s.sent(),[2,(n.vr=r,n.Dc=i,n.yc.Cc(n.Dc),o)]}}))}))}(n.Wu,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Oh.forEach((function(t){t.forEach((function(t){t.reject(new Sn(An.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Oh.clear()}(n),n.bh.Wi(e,r.jh,r.Kh),[4,sd(n,r.Wh)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ad(t,e){var n=zc(t),r=n.xh.get(e);if(r&&r.yh)return Ch().add(r.key);var i=Ch(),o=n.Nh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Ch.get(a);i=i.xt(c.view.fh)}return i}function cd(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i;return Os(this,(function(o){switch(o.label){case 0:return[4,dp((n=zc(t)).Wu,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ph(r),[2,(n.qh&&rd(n,e.targetId,i.Ah),i)]}}))}))}function hd(t,e,n,r){return Ds(this,void 0,void 0,(function(){var i,o;return Os(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=zc(t),r=zc(n.vr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Oo(t,e).next((function(e){return e?n.Dc.$r(t,e):Jr.resolve(null)}))}))}((i=zc(t)).Wu,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Pp(i.Vh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(td(i,e,r||null),Zp(i,e),function(t,e){zc(zc(t).vr).jo(e)}(i.Wu,e)):qc(),s.label=4;case 4:return[4,sd(i,o)];case 5:return s.sent(),[3,7];case 6:Mc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function fd(t,e){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Os(this,(function(h){switch(h.label){case 0:return gd(n=zc(t)),md(n),!0!==e||!0===n.Bh?[3,3]:(r=n.bh.Di(),[4,ld(n,r.A())]);case 1:return i=h.sent(),n.Bh=!0,[4,qp(n.Vh,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Ip(n.Vh,u);return[3,7];case 3:return!1!==e||!1===n.Bh?[3,7]:(a=[],c=Promise.resolve(),n.Nh.forEach((function(t,e){n.bh.Bi(e)?a.push(e):c=c.then((function(){return ed(n,e),pp(n.Wu,e,!0)})),_p(n.Vh,e)})),[4,c]);case 4:return h.sent(),[4,ld(n,a)];case 5:return h.sent(),function(t){var e=zc(t);e.xh.forEach((function(t,n){_p(e.Vh,n)})),e.kh.Uc(),e.xh=new Map,e.$h=new Qn(Rn.i)}(n),n.Bh=!1,[4,qp(n.Vh,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function ld(t,e,n){return Ds(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return Os(this,(function(y){switch(y.label){case 0:n=zc(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Nh.get(u))&&0!==c.length?[4,lp(n.Wu,el(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Ch.get(l),[4,cd(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,vp(n.Wu,u)];case 8:return v=y.sent(),[4,lp(n.Wu,v)];case 9:return a=y.sent(),[4,Kp(n,pd(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Dh.gu(i),r)]}}))}))}function pd(t){return Hf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dd(t){var e=zc(t);return zc(zc(e.Wu).persistence).Vi()}function vd(t,e,n,r){return Ds(this,void 0,void 0,(function(){var i,o,s;return Os(this,(function(u){switch(u.label){case 0:return(i=zc(t)).Bh?(Mc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Nh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,yp(i.Wu)];case 3:return o=u.sent(),s=ur.Jt(e,"current"===n),[4,sd(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,pp(i.Wu,e,!0)];case 6:return u.sent(),ed(i,e,r),[3,8];case 7:qc(),u.label=8;case 8:return[2]}}))}))}function yd(t,e,n){return Ds(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return Os(this,(function(p){switch(p.label){case 0:if(!(r=gd(t)).Bh)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Nh.has(s)?(Mc("SyncEngine","Adding an already active target "+s),[3,5]):[4,vp(r.Wu,s)]):[3,6];case 2:return u=p.sent(),[4,lp(r.Wu,u)];case 3:return a=p.sent(),[4,Kp(r,pd(u),a.targetId,!1)];case 4:p.sent(),Ip(r.Vh,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Os(this,(function(e){switch(e.label){case 0:return r.Nh.has(t)?[4,pp(r.Wu,t,!1).then((function(){_p(r.Vh,t),ed(r,t)})).catch(mp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function gd(t){var e=zc(t);return e.Vh.Ku.nh=Qp.bind(null,e),e.Vh.Ku.Be=ad.bind(null,e),e.Vh.Ku.eh=Xp.bind(null,e),e.Dh.gu=Tl.bind(null,e.ph),e.Dh.Qh=Nl.bind(null,e.ph),e}function md(t){var e=zc(t);return e.Vh.Ku.sh=$p.bind(null,e),e.Vh.Ku.ih=Jp.bind(null,e),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bd(t){return new gr(t,!0)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t,e,n){return new ss({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}function Ed(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qc()}}function Id(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Od("Data must be an object, but it was:",s,r);var u,a,c=Sd(r,s);if(o.merge)u=new _r(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=l[f],d=void 0;if(p instanceof Wo)d=p.Zl;else{if("string"!=typeof p)throw qc();d=Cd(e,p,n)}if(!s.contains(d))throw new Sn(An.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Rd(h,d)||h.push(d)}u=new _r(h),a=s.fieldTransforms.filter((function(t){return u.He(t.field)}))}else u=null,a=s.fieldTransforms;return new is(new Rr(c),u,a)}function _d(t,e,n,r){var i=t.P_(1,e,n);Od("Data must be an object, but it was:",i,r);var o=[],s=new Lr;Kc(r,(function(t,r){var u=Cd(e,t,n),a=i.I_(u);if(r instanceof Yo||r instanceof es&&r.h_ instanceof Yo)o.push(u);else{var c=Ad(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new _r(o);return new os(s.Je(),u,i.fieldTransforms)}function Td(t,e,n,r,i,o){var s=t.P_(1,e,n),u=[xd(e,r,n)],a=[i];if(o.length%2!=0)throw new Sn(An.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(xd(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Lr,l=u.length-1;l>=0;--l)if(!Rd(h,u[l])){var p=u[l],d=a[l],v=s.I_(p);if(d instanceof Yo||d instanceof es&&d.h_ instanceof Yo)h.push(p);else{var y=Ad(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new _r(h);return new os(f.Je(),g,s.fieldTransforms)}function Nd(t,e,n,r){return void 0===r&&(r=!1),Ad(n,t.P_(r?4:3,e))}function Ad(t,e){if(t instanceof es&&(t=t.h_),Dd(t))return Od("Unsupported field value:",e,t),Sd(t,e);if(t instanceof Qo)return function(t,e){if(!Ed(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");var n=t.e_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.r_&&4!==e.n_)throw e.s_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ad(o[i],e.A_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return tf(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gn.fromDate(t);return{timestampValue:ef(e.serializer,n)}}if(t instanceof Gn){var r=new Gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ef(e.serializer,r)}}if(t instanceof ts)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mn)return{bytesValue:nf(e.serializer,t.q)};if(t instanceof rs){var i=e.U,o=t.l_;if(!o.isEqual(i))throw e.s_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:sf(t.l_||e.U,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+sh(t))}(t,e)}function Sd(t,e){var n={};return Hc(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Kc(t,(function(t,r){var i=Ad(r,e.T_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Dd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gn||t instanceof ts||t instanceof Mn||t instanceof rs||t instanceof Qo)}function Od(t,e,n){if(!Dd(n)||!oh(n)){var r=sh(n);throw"an object"===r?e.s_(t+" a custom object"):e.s_(t+" "+r)}}function xd(t,e,n){if(e instanceof Wo)return e.Zl;if("string"==typeof e)return Cd(t,e);throw kd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Cd(t,e,n){try{return function(t){if(t.search(Ho)>=0)throw new Sn(An.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ko.bind.apply(Ko,Rs([void 0],t.split("."))))}catch(e){throw new Sn(An.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw kd((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function kd(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new Sn(An.INVALID_ARGUMENT,(u+=". ")+t+a)}function Rd(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ld(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pd(t,e,n,r,i,o,s){var u;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new Sn(An.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Md(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Ud(r,t,f))}u={arrayValue:{values:a}}}else u=Ud(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Md(s,o),u=Nd(n,e,s,"in"===o||"not-in"===o);var l=Fr.create(i,o,u);return function(t,e){if(e.un()){var n=Jf(t);if(null!==n&&!n.isEqual(e.field))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$f(t);null!==r&&jd(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Sn(An.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Sn(An.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}function Vd(t,e,n){if(null!==t.startAt)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yr(e,n);return function(t,e){if(null===$f(t)){var n=Jf(t);null!==n&&jd(t,n,e.field)}}(t,r),r}function Ud(t,e,n){if("string"==typeof n){if(""===n)throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zf(e)&&-1!==n.indexOf("/"))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(xn.P(n));if(!Rn.F(r))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Kh(t,new Rn(r))}if(n instanceof rs)return Kh(t,n.__);throw new Sn(An.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+sh(n)+".")}function Md(t,e){if(!Array.isArray(t)||0===t.length)throw new Sn(An.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Sn(An.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new Sn(An.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new Sn(An.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function jd(t,e,n){if(!n.isEqual(e))throw new Sn(An.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Fd(t){if(Xf(t)&&0===t.rn.length)throw new Sn(An.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function Bd(t,e){if(void 0===e)return{merge:!1};if(ah(t,e,["merge","mergeFields"]),eh(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+sh(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Sn(An.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+sh(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Ko}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new Sn(An.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qd(t,e){return void 0===e?{}:(ah(t,e,["serverTimestamps"]),nh(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Gd(t,e){Zc(t,"object",1,e),e&&(ah(t,e,["source"]),nh(t,0,"source",e.source,["default","server","cache"]))}function zd(t,e,n){if(e instanceof rs){if(e.firestore!==n)throw new Sn(An.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ch(t,"DocumentReference",1,e)}function Wd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qc()}}function Kd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hd(t){!function(t,e){t.INTERNAL.registerComponent(new yt.Component("firestore",(function(t){return function(t,e){var n=new Go,r=new qo(n);return new ds(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ns)))}(t),t.registerVersion("@firebase/firestore","1.17.3")}}for(var e=["1b5fcaa91158452b3cc68afb402edcaf"],n=0;n<e.length;n++)parcelRequire.registerBundle(e[n],t)}();
//# sourceMappingURL=firebasePackage.f93418f2.js.map
